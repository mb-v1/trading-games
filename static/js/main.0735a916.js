/*! For license information please see main.0735a916.js.LICENSE.txt */
(()=>{"use strict";var e={730:(e,t,n)=>{var r=n(43),i=n(853);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,o={};function l(e,t){u(e,t),u(e+"Capture",t)}function u(e,t){for(o[e]=t,e=0;e<t.length;e++)s.add(t[e])}var c=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,n,r,i,a,s){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=s}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function _(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(p,e)||!d.call(f,e)&&(h.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),C=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),x=Symbol.for("react.provider"),N=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),j=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var D=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var A=Symbol.iterator;function O(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=A&&e[A]||e["@@iterator"])?e:null}var L,M=Object.assign;function F(e){if(void 0===L)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var $=!1;function z(e,t){if(!e||$)return"";$=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&"string"===typeof u.stack){for(var i=u.stack.split("\n"),a=r.stack.split("\n"),s=i.length-1,o=a.length-1;1<=s&&0<=o&&i[s]!==a[o];)o--;for(;1<=s&&0<=o;s--,o--)if(i[s]!==a[o]){if(1!==s||1!==o)do{if(s--,0>--o||i[s]!==a[o]){var l="\n"+i[s].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=s&&0<=o);break}}}finally{$=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function U(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=z(e.type,!1);case 11:return e=z(e.type.render,!1);case 1:return e=z(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case k:return"Fragment";case C:return"Portal";case E:return"Profiler";case S:return"StrictMode";case I:return"Suspense";case P:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case N:return(e.displayName||"Context")+".Consumer";case x:return(e._context.displayName||"Context")+".Provider";case T:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case R:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case j:t=e._payload,e=e._init;try{return B(e(t))}catch(n){}}return null}function W(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function q(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function H(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function V(e){e._valueTracker||(e._valueTracker=function(e){var t=H(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Q(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=H(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function K(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return M({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function G(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=q(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&_(e,"checked",t,!1)}function X(e,t){J(e,t);var n=q(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,q(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&K(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+q(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return M({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:q(n)}}function ae(e,t){var n=q(t.value),r=q(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function se(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ue,ce,de=(ce=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ue=ue||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ue.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ce(e,t)}))}:ce);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]}))}));var ye=M({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function _e(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ce=null,ke=null,Se=null;function Ee(e){if(e=_i(e)){if("function"!==typeof Ce)throw Error(a(280));var t=e.stateNode;t&&(t=wi(t),Ce(e.stateNode,e.type,t))}}function xe(e){ke?Se?Se.push(e):Se=[e]:ke=e}function Ne(){if(ke){var e=ke,t=Se;if(Se=ke=null,Ee(e),t)for(e=0;e<t.length;e++)Ee(t[e])}}function Te(e,t){return e(t)}function Ie(){}var Pe=!1;function Re(e,t,n){if(Pe)return e(t,n);Pe=!0;try{return Te(e,t,n)}finally{Pe=!1,(null!==ke||null!==Se)&&(Ie(),Ne())}}function je(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var De=!1;if(c)try{var Ae={};Object.defineProperty(Ae,"passive",{get:function(){De=!0}}),window.addEventListener("test",Ae,Ae),window.removeEventListener("test",Ae,Ae)}catch(ce){De=!1}function Oe(e,t,n,r,i,a,s,o,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var Le=!1,Me=null,Fe=!1,$e=null,ze={onError:function(e){Le=!0,Me=e}};function Ue(e,t,n,r,i,a,s,o,l){Le=!1,Me=null,Oe.apply(ze,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function We(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function qe(e){if(Be(e)!==e)throw Error(a(188))}function He(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var s=i.alternate;if(null===s){if(null!==(r=i.return)){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return qe(i),e;if(s===r)return qe(i),t;s=s.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?Ve(e):null}function Ve(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ve(e);if(null!==t)return t;e=e.sibling}return null}var Qe=i.unstable_scheduleCallback,Ke=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,Ge=i.unstable_requestPaint,Je=i.unstable_now,Xe=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var st=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ot(e)/lt|0)|0},ot=Math.log,lt=Math.LN2;var ut=64,ct=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,s=268435455&n;if(0!==s){var o=s&~i;0!==o?r=dt(o):0!==(a&=s)&&(r=dt(a))}else 0!==(s=n&~i)?r=dt(s):0!==a&&(r=dt(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-st(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ut;return 0===(4194240&(ut<<=1))&&(ut=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-st(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-st(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var _t=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,Ct,kt,St,Et,xt=!1,Nt=[],Tt=null,It=null,Pt=null,Rt=new Map,jt=new Map,Dt=[],At="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ot(e,t){switch(e){case"focusin":case"focusout":Tt=null;break;case"dragenter":case"dragleave":It=null;break;case"mouseover":case"mouseout":Pt=null;break;case"pointerover":case"pointerout":Rt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":jt.delete(t.pointerId)}}function Lt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=_i(t))&&Ct(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Mt(e){var t=vi(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=We(n)))return e.blockedOn=t,void Et(e.priority,(function(){kt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=_i(n))&&Ct(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function $t(e,t,n){Ft(e)&&n.delete(t)}function zt(){xt=!1,null!==Tt&&Ft(Tt)&&(Tt=null),null!==It&&Ft(It)&&(It=null),null!==Pt&&Ft(Pt)&&(Pt=null),Rt.forEach($t),jt.forEach($t)}function Ut(e,t){e.blockedOn===t&&(e.blockedOn=null,xt||(xt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,zt)))}function Bt(e){function t(t){return Ut(t,e)}if(0<Nt.length){Ut(Nt[0],e);for(var n=1;n<Nt.length;n++){var r=Nt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Tt&&Ut(Tt,e),null!==It&&Ut(It,e),null!==Pt&&Ut(Pt,e),Rt.forEach(t),jt.forEach(t),n=0;n<Dt.length;n++)(r=Dt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Dt.length&&null===(n=Dt[0]).blockedOn;)Mt(n),null===n.blockedOn&&Dt.shift()}var Wt=b.ReactCurrentBatchConfig,qt=!0;function Ht(e,t,n,r){var i=_t,a=Wt.transition;Wt.transition=null;try{_t=1,Qt(e,t,n,r)}finally{_t=i,Wt.transition=a}}function Vt(e,t,n,r){var i=_t,a=Wt.transition;Wt.transition=null;try{_t=4,Qt(e,t,n,r)}finally{_t=i,Wt.transition=a}}function Qt(e,t,n,r){if(qt){var i=Yt(e,t,n,r);if(null===i)qr(e,t,r,Kt,n),Ot(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Tt=Lt(Tt,e,t,n,r,i),!0;case"dragenter":return It=Lt(It,e,t,n,r,i),!0;case"mouseover":return Pt=Lt(Pt,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Rt.set(a,Lt(Rt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,jt.set(a,Lt(jt.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Ot(e,r),4&t&&-1<At.indexOf(e)){for(;null!==i;){var a=_i(i);if(null!==a&&wt(a),null===(a=Yt(e,t,n,r))&&qr(e,t,r,Kt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else qr(e,t,r,null,n)}}var Kt=null;function Yt(e,t,n,r){if(Kt=null,null!==(e=vi(e=we(r))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=We(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Kt=e,null}function Gt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Jt=null,Xt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Xt,r=n.length,i="value"in Jt?Jt.value:Jt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var s=r-e;for(t=1;t<=s&&n[r-t]===i[a-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var s in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(s)&&(t=e[s],this[s]=t?t(i):i[s]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return M(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var sn,on,ln,un={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cn=an(un),dn=M({},un,{view:0,detail:0}),hn=an(dn),fn=M({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:En,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(sn=e.screenX-ln.screenX,on=e.screenY-ln.screenY):on=sn=0,ln=e),sn)},movementY:function(e){return"movementY"in e?e.movementY:on}}),pn=an(fn),mn=an(M({},fn,{dataTransfer:0})),gn=an(M({},dn,{relatedTarget:0})),yn=an(M({},un,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=M({},un,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),_n=an(vn),bn=an(M({},un,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Cn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=kn[e])&&!!t[e]}function En(){return Sn}var xn=M({},dn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Cn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:En,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Nn=an(xn),Tn=an(M({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),In=an(M({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:En})),Pn=an(M({},un,{propertyName:0,elapsedTime:0,pseudoElement:0})),Rn=M({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),jn=an(Rn),Dn=[9,13,27,32],An=c&&"CompositionEvent"in window,On=null;c&&"documentMode"in document&&(On=document.documentMode);var Ln=c&&"TextEvent"in window&&!On,Mn=c&&(!An||On&&8<On&&11>=On),Fn=String.fromCharCode(32),$n=!1;function zn(e,t){switch(e){case"keyup":return-1!==Dn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Un(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1;var Wn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Wn[e.type]:"textarea"===t}function Hn(e,t,n,r){xe(r),0<(t=Vr(t,"onChange")).length&&(n=new cn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Vn=null,Qn=null;function Kn(e){Fr(e,0)}function Yn(e){if(Q(bi(e)))return e}function Gn(e,t){if("change"===e)return t}var Jn=!1;if(c){var Xn;if(c){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Xn=Zn}else Xn=!1;Jn=Xn&&(!document.documentMode||9<document.documentMode)}function tr(){Vn&&(Vn.detachEvent("onpropertychange",nr),Qn=Vn=null)}function nr(e){if("value"===e.propertyName&&Yn(Qn)){var t=[];Hn(t,Qn,e,we(e)),Re(Kn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Qn=n,(Vn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Qn)}function ar(e,t){if("click"===e)return Yn(t)}function sr(e,t){if("input"===e||"change"===e)return Yn(t)}var or="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(or(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!d.call(t,i)||!or(e[i],t[i]))return!1}return!0}function ur(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function cr(e,t){var n,r=ur(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ur(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=K();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=K((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=cr(n,a);var s=cr(n,r);i&&s&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=c&&"documentMode"in document&&11>=document.documentMode,gr=null,yr=null,vr=null,_r=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;_r||null==gr||gr!==K(r)||("selectionStart"in(r=gr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},vr&&lr(vr,r)||(vr=r,0<(r=Vr(yr,"onSelect")).length&&(t=new cn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Cr={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},kr={},Sr={};function Er(e){if(kr[e])return kr[e];if(!Cr[e])return e;var t,n=Cr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Sr)return kr[e]=n[t];return e}c&&(Sr=document.createElement("div").style,"AnimationEvent"in window||(delete Cr.animationend.animation,delete Cr.animationiteration.animation,delete Cr.animationstart.animation),"TransitionEvent"in window||delete Cr.transitionend.transition);var xr=Er("animationend"),Nr=Er("animationiteration"),Tr=Er("animationstart"),Ir=Er("transitionend"),Pr=new Map,Rr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function jr(e,t){Pr.set(e,t),l(t,[e])}for(var Dr=0;Dr<Rr.length;Dr++){var Ar=Rr[Dr];jr(Ar.toLowerCase(),"on"+(Ar[0].toUpperCase()+Ar.slice(1)))}jr(xr,"onAnimationEnd"),jr(Nr,"onAnimationIteration"),jr(Tr,"onAnimationStart"),jr("dblclick","onDoubleClick"),jr("focusin","onFocus"),jr("focusout","onBlur"),jr(Ir,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Or="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Or));function Mr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,s,o,l,u){if(Ue.apply(this,arguments),Le){if(!Le)throw Error(a(198));var c=Me;Le=!1,Me=null,Fe||(Fe=!0,$e=c)}}(r,t,void 0,e),e.currentTarget=null}function Fr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var s=r.length-1;0<=s;s--){var o=r[s],l=o.instance,u=o.currentTarget;if(o=o.listener,l!==a&&i.isPropagationStopped())break e;Mr(i,o,u),a=l}else for(s=0;s<r.length;s++){if(l=(o=r[s]).instance,u=o.currentTarget,o=o.listener,l!==a&&i.isPropagationStopped())break e;Mr(i,o,u),a=l}}}if(Fe)throw e=$e,Fe=!1,$e=null,e}function $r(e,t){var n=t[mi];void 0===n&&(n=t[mi]=new Set);var r=e+"__bubble";n.has(r)||(Wr(t,e,2,!1),n.add(r))}function zr(e,t,n){var r=0;t&&(r|=4),Wr(n,e,r,t)}var Ur="_reactListening"+Math.random().toString(36).slice(2);function Br(e){if(!e[Ur]){e[Ur]=!0,s.forEach((function(t){"selectionchange"!==t&&(Lr.has(t)||zr(t,!1,e),zr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Ur]||(t[Ur]=!0,zr("selectionchange",!1,t))}}function Wr(e,t,n,r){switch(Gt(t)){case 1:var i=Ht;break;case 4:i=Vt;break;default:i=Qt}n=i.bind(null,t,n,e),i=void 0,!De||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function qr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var s=r.tag;if(3===s||4===s){var o=r.stateNode.containerInfo;if(o===i||8===o.nodeType&&o.parentNode===i)break;if(4===s)for(s=r.return;null!==s;){var l=s.tag;if((3===l||4===l)&&((l=s.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;s=s.return}for(;null!==o;){if(null===(s=vi(o)))return;if(5===(l=s.tag)||6===l){r=a=s;continue e}o=o.parentNode}}r=r.return}Re((function(){var r=a,i=we(n),s=[];e:{var o=Pr.get(e);if(void 0!==o){var l=cn,u=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Nn;break;case"focusin":u="focus",l=gn;break;case"focusout":u="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=In;break;case xr:case Nr:case Tr:l=yn;break;case Ir:l=Pn;break;case"scroll":l=hn;break;case"wheel":l=jn;break;case"copy":case"cut":case"paste":l=_n;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Tn}var c=0!==(4&t),d=!c&&"scroll"===e,h=c?null!==o?o+"Capture":null:o;c=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==h&&(null!=(m=je(p,h))&&c.push(Hr(p,m,f)))),d)break;p=p.return}0<c.length&&(o=new l(o,u,null,n,i),s.push({event:o,listeners:c}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===be||!(u=n.relatedTarget||n.fromElement)||!vi(u)&&!u[pi])&&(l||o)&&(o=i.window===i?i:(o=i.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=r,null!==(u=(u=n.relatedTarget||n.toElement)?vi(u):null)&&(u!==(d=Be(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(l=null,u=r),l!==u)){if(c=pn,m="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(c=Tn,m="onPointerLeave",h="onPointerEnter",p="pointer"),d=null==l?o:bi(l),f=null==u?o:bi(u),(o=new c(m,p+"leave",l,n,i)).target=d,o.relatedTarget=f,m=null,vi(i)===r&&((c=new c(h,p+"enter",u,n,i)).target=f,c.relatedTarget=d,m=c),d=m,l&&u)e:{for(h=u,p=0,f=c=l;f;f=Qr(f))p++;for(f=0,m=h;m;m=Qr(m))f++;for(;0<p-f;)c=Qr(c),p--;for(;0<f-p;)h=Qr(h),f--;for(;p--;){if(c===h||null!==h&&c===h.alternate)break e;c=Qr(c),h=Qr(h)}c=null}else c=null;null!==l&&Kr(s,o,l,c,!1),null!==u&&null!==d&&Kr(s,d,u,c,!0)}if("select"===(l=(o=r?bi(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var g=Gn;else if(qn(o))if(Jn)g=sr;else{g=ir;var y=rr}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(g=ar);switch(g&&(g=g(e,r))?Hn(s,g,n,i):(y&&y(e,o,r),"focusout"===e&&(y=o._wrapperState)&&y.controlled&&"number"===o.type&&ee(o,"number",o.value)),y=r?bi(r):window,e){case"focusin":(qn(y)||"true"===y.contentEditable)&&(gr=y,yr=r,vr=null);break;case"focusout":vr=yr=gr=null;break;case"mousedown":_r=!0;break;case"contextmenu":case"mouseup":case"dragend":_r=!1,br(s,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":br(s,n,i)}var v;if(An)e:{switch(e){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else Bn?zn(e,n)&&(_="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(_="onCompositionStart");_&&(Mn&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==_?"onCompositionEnd"===_&&Bn&&(v=en()):(Xt="value"in(Jt=i)?Jt.value:Jt.textContent,Bn=!0)),0<(y=Vr(r,_)).length&&(_=new bn(_,e,null,n,i),s.push({event:_,listeners:y}),v?_.data=v:null!==(v=Un(n))&&(_.data=v))),(v=Ln?function(e,t){switch(e){case"compositionend":return Un(t);case"keypress":return 32!==t.which?null:($n=!0,Fn);case"textInput":return(e=t.data)===Fn&&$n?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!An&&zn(e,t)?(e=en(),Zt=Xt=Jt=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Mn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Vr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),s.push({event:i,listeners:r}),i.data=v))}Fr(s,t)}))}function Hr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Vr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=je(e,n))&&r.unshift(Hr(e,a,i)),null!=(a=je(e,t))&&r.push(Hr(e,a,i))),e=e.return}return r}function Qr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Kr(e,t,n,r,i){for(var a=t._reactName,s=[];null!==n&&n!==r;){var o=n,l=o.alternate,u=o.stateNode;if(null!==l&&l===r)break;5===o.tag&&null!==u&&(o=u,i?null!=(l=je(n,a))&&s.unshift(Hr(n,l,o)):i||null!=(l=je(n,a))&&s.push(Hr(n,l,o))),n=n.return}0!==s.length&&e.push({event:t,listeners:s})}var Yr=/\r\n?/g,Gr=/\u0000|\uFFFD/g;function Jr(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace(Gr,"")}function Xr(e,t,n){if(t=Jr(t),Jr(e)!==t&&n)throw Error(a(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,si="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(oi)}:ri;function oi(e){setTimeout((function(){throw e}))}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Bt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Bt(t)}function ui(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ci(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var di=Math.random().toString(36).slice(2),hi="__reactFiber$"+di,fi="__reactProps$"+di,pi="__reactContainer$"+di,mi="__reactEvents$"+di,gi="__reactListeners$"+di,yi="__reactHandles$"+di;function vi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ci(e);null!==e;){if(n=e[hi])return n;e=ci(e)}return t}n=(e=n).parentNode}return null}function _i(e){return!(e=e[hi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function wi(e){return e[fi]||null}var Ci=[],ki=-1;function Si(e){return{current:e}}function Ei(e){0>ki||(e.current=Ci[ki],Ci[ki]=null,ki--)}function xi(e,t){ki++,Ci[ki]=e.current,e.current=t}var Ni={},Ti=Si(Ni),Ii=Si(!1),Pi=Ni;function Ri(e,t){var n=e.type.contextTypes;if(!n)return Ni;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function ji(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Di(){Ei(Ii),Ei(Ti)}function Ai(e,t,n){if(Ti.current!==Ni)throw Error(a(168));xi(Ti,t),xi(Ii,n)}function Oi(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,W(e)||"Unknown",i));return M({},n,r)}function Li(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ni,Pi=Ti.current,xi(Ti,e),xi(Ii,Ii.current),!0}function Mi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Oi(e,t,Pi),r.__reactInternalMemoizedMergedChildContext=e,Ei(Ii),Ei(Ti),xi(Ti,e)):Ei(Ii),xi(Ii,n)}var Fi=null,$i=!1,zi=!1;function Ui(e){null===Fi?Fi=[e]:Fi.push(e)}function Bi(){if(!zi&&null!==Fi){zi=!0;var e=0,t=_t;try{var n=Fi;for(_t=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Fi=null,$i=!1}catch(i){throw null!==Fi&&(Fi=Fi.slice(e+1)),Qe(Ze,Bi),i}finally{_t=t,zi=!1}}return null}var Wi=[],qi=0,Hi=null,Vi=0,Qi=[],Ki=0,Yi=null,Gi=1,Ji="";function Xi(e,t){Wi[qi++]=Vi,Wi[qi++]=Hi,Hi=e,Vi=t}function Zi(e,t,n){Qi[Ki++]=Gi,Qi[Ki++]=Ji,Qi[Ki++]=Yi,Yi=e;var r=Gi;e=Ji;var i=32-st(r)-1;r&=~(1<<i),n+=1;var a=32-st(t)+i;if(30<a){var s=i-i%5;a=(r&(1<<s)-1).toString(32),r>>=s,i-=s,Gi=1<<32-st(t)+i|n<<i|r,Ji=a+e}else Gi=1<<a|n<<i|r,Ji=e}function ea(e){null!==e.return&&(Xi(e,1),Zi(e,1,0))}function ta(e){for(;e===Hi;)Hi=Wi[--qi],Wi[qi]=null,Vi=Wi[--qi],Wi[qi]=null;for(;e===Yi;)Yi=Qi[--Ki],Qi[Ki]=null,Ji=Qi[--Ki],Qi[Ki]=null,Gi=Qi[--Ki],Qi[Ki]=null}var na=null,ra=null,ia=!1,aa=null;function sa(e,t){var n=Ru(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function oa(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=ui(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yi?{id:Gi,overflow:Ji}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Ru(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function la(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ua(e){if(ia){var t=ra;if(t){var n=t;if(!oa(e,t)){if(la(e))throw Error(a(418));t=ui(n.nextSibling);var r=na;t&&oa(e,t)?sa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(la(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function ca(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function da(e){if(e!==na)return!1;if(!ia)return ca(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(la(e))throw ha(),Error(a(418));for(;t;)sa(e,t),t=ui(t.nextSibling)}if(ca(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=ui(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?ui(e.stateNode.nextSibling):null;return!0}function ha(){for(var e=ra;e;)e=ui(e.nextSibling)}function fa(){ra=na=null,ia=!1}function pa(e){null===aa?aa=[e]:aa.push(e)}var ma=b.ReactCurrentBatchConfig;function ga(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,s=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===s?t.ref:(t=function(e){var t=i.refs;null===e?delete t[s]:t[s]=e},t._stringRef=s,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function ya(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function va(e){return(0,e._init)(e._payload)}function _a(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Du(e,t)).index=0,e.sibling=null,e}function s(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Mu(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function u(e,t,n,r){var a=n.type;return a===k?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===j&&va(a)===t.type)?((r=i(t,n.props)).ref=ga(e,t,n),r.return=e,r):((r=Au(n.type,n.key,n.props,null,e.mode,r)).ref=ga(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Fu(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,a){return null===t||7!==t.tag?((t=Ou(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Mu(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Au(t.type,t.key,t.props,null,e.mode,n)).ref=ga(e,null,t),n.return=e,n;case C:return(t=Fu(t,e.mode,n)).return=e,t;case j:return h(e,(0,t._init)(t._payload),n)}if(te(t)||O(t))return(t=Ou(t,e.mode,n,null)).return=e,t;ya(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?u(e,t,n,r):null;case C:return n.key===i?c(e,t,n,r):null;case j:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||O(n))return null!==i?null:d(e,t,n,r,null);ya(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case C:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case j:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||O(r))return d(t,e=e.get(n)||null,r,i,null);ya(t,r)}return null}function m(i,a,o,l){for(var u=null,c=null,d=a,m=a=0,g=null;null!==d&&m<o.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var y=f(i,d,o[m],l);if(null===y){null===d&&(d=g);break}e&&d&&null===y.alternate&&t(i,d),a=s(y,a,m),null===c?u=y:c.sibling=y,c=y,d=g}if(m===o.length)return n(i,d),ia&&Xi(i,m),u;if(null===d){for(;m<o.length;m++)null!==(d=h(i,o[m],l))&&(a=s(d,a,m),null===c?u=d:c.sibling=d,c=d);return ia&&Xi(i,m),u}for(d=r(i,d);m<o.length;m++)null!==(g=p(d,i,m,o[m],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),a=s(g,a,m),null===c?u=g:c.sibling=g,c=g);return e&&d.forEach((function(e){return t(i,e)})),ia&&Xi(i,m),u}function g(i,o,l,u){var c=O(l);if("function"!==typeof c)throw Error(a(150));if(null==(l=c.call(l)))throw Error(a(151));for(var d=c=null,m=o,g=o=0,y=null,v=l.next();null!==m&&!v.done;g++,v=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var _=f(i,m,v.value,u);if(null===_){null===m&&(m=y);break}e&&m&&null===_.alternate&&t(i,m),o=s(_,o,g),null===d?c=_:d.sibling=_,d=_,m=y}if(v.done)return n(i,m),ia&&Xi(i,g),c;if(null===m){for(;!v.done;g++,v=l.next())null!==(v=h(i,v.value,u))&&(o=s(v,o,g),null===d?c=v:d.sibling=v,d=v);return ia&&Xi(i,g),c}for(m=r(i,m);!v.done;g++,v=l.next())null!==(v=p(m,i,g,v.value,u))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),o=s(v,o,g),null===d?c=v:d.sibling=v,d=v);return e&&m.forEach((function(e){return t(i,e)})),ia&&Xi(i,g),c}return function e(r,a,s,l){if("object"===typeof s&&null!==s&&s.type===k&&null===s.key&&(s=s.props.children),"object"===typeof s&&null!==s){switch(s.$$typeof){case w:e:{for(var u=s.key,c=a;null!==c;){if(c.key===u){if((u=s.type)===k){if(7===c.tag){n(r,c.sibling),(a=i(c,s.props.children)).return=r,r=a;break e}}else if(c.elementType===u||"object"===typeof u&&null!==u&&u.$$typeof===j&&va(u)===c.type){n(r,c.sibling),(a=i(c,s.props)).ref=ga(r,c,s),a.return=r,r=a;break e}n(r,c);break}t(r,c),c=c.sibling}s.type===k?((a=Ou(s.props.children,r.mode,l,s.key)).return=r,r=a):((l=Au(s.type,s.key,s.props,null,r.mode,l)).ref=ga(r,a,s),l.return=r,r=l)}return o(r);case C:e:{for(c=s.key;null!==a;){if(a.key===c){if(4===a.tag&&a.stateNode.containerInfo===s.containerInfo&&a.stateNode.implementation===s.implementation){n(r,a.sibling),(a=i(a,s.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Fu(s,r.mode,l)).return=r,r=a}return o(r);case j:return e(r,a,(c=s._init)(s._payload),l)}if(te(s))return m(r,a,s,l);if(O(s))return g(r,a,s,l);ya(r,s)}return"string"===typeof s&&""!==s||"number"===typeof s?(s=""+s,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,s)).return=r,r=a):(n(r,a),(a=Mu(s,r.mode,l)).return=r,r=a),o(r)):n(r,a)}}var ba=_a(!0),wa=_a(!1),Ca=Si(null),ka=null,Sa=null,Ea=null;function xa(){Ea=Sa=ka=null}function Na(e){var t=Ca.current;Ei(Ca),e._currentValue=t}function Ta(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ia(e,t){ka=e,Ea=Sa=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(_o=!0),e.firstContext=null)}function Pa(e){var t=e._currentValue;if(Ea!==e)if(e={context:e,memoizedValue:t,next:null},null===Sa){if(null===ka)throw Error(a(308));Sa=e,ka.dependencies={lanes:0,firstContext:e}}else Sa=Sa.next=e;return t}var Ra=null;function ja(e){null===Ra?Ra=[e]:Ra.push(e)}function Da(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,ja(t)):(n.next=i.next,i.next=n),t.interleaved=n,Aa(e,r)}function Aa(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Oa=!1;function La(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ma(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Fa(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function $a(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Tl)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Aa(e,n)}return null===(i=r.interleaved)?(t.next=t,ja(r)):(t.next=i.next,i.next=t),r.interleaved=t,Aa(e,n)}function za(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}function Ua(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=s:a=a.next=s,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ba(e,t,n,r){var i=e.updateQueue;Oa=!1;var a=i.firstBaseUpdate,s=i.lastBaseUpdate,o=i.shared.pending;if(null!==o){i.shared.pending=null;var l=o,u=l.next;l.next=null,null===s?a=u:s.next=u,s=l;var c=e.alternate;null!==c&&((o=(c=c.updateQueue).lastBaseUpdate)!==s&&(null===o?c.firstBaseUpdate=u:o.next=u,c.lastBaseUpdate=l))}if(null!==a){var d=i.baseState;for(s=0,c=u=l=null,o=a;;){var h=o.lane,f=o.eventTime;if((r&h)===h){null!==c&&(c=c.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,m=o;switch(h=t,f=n,m.tag){case 1:if("function"===typeof(p=m.payload)){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=m.payload)?p.call(f,d,h):p)||void 0===h)break e;d=M({},d,h);break e;case 2:Oa=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[o]:h.push(o))}else f={eventTime:f,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===c?(u=c=f,l=d):c=c.next=f,s|=h;if(null===(o=o.next)){if(null===(o=i.shared.pending))break;o=(h=o).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===c&&(l=d),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,null!==(t=i.shared.interleaved)){i=t;do{s|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Ll|=s,e.lanes=s,e.memoizedState=d}}function Wa(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var qa={},Ha=Si(qa),Va=Si(qa),Qa=Si(qa);function Ka(e){if(e===qa)throw Error(a(174));return e}function Ya(e,t){switch(xi(Qa,t),xi(Va,e),xi(Ha,qa),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ei(Ha),xi(Ha,t)}function Ga(){Ei(Ha),Ei(Va),Ei(Qa)}function Ja(e){Ka(Qa.current);var t=Ka(Ha.current),n=le(t,e.type);t!==n&&(xi(Va,e),xi(Ha,n))}function Xa(e){Va.current===e&&(Ei(Ha),Ei(Va))}var Za=Si(0);function es(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ts=[];function ns(){for(var e=0;e<ts.length;e++)ts[e]._workInProgressVersionPrimary=null;ts.length=0}var rs=b.ReactCurrentDispatcher,is=b.ReactCurrentBatchConfig,as=0,ss=null,os=null,ls=null,us=!1,cs=!1,ds=0,hs=0;function fs(){throw Error(a(321))}function ps(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!or(e[n],t[n]))return!1;return!0}function ms(e,t,n,r,i,s){if(as=s,ss=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,rs.current=null===e||null===e.memoizedState?Xs:Zs,e=n(r,i),cs){s=0;do{if(cs=!1,ds=0,25<=s)throw Error(a(301));s+=1,ls=os=null,t.updateQueue=null,rs.current=eo,e=n(r,i)}while(cs)}if(rs.current=Js,t=null!==os&&null!==os.next,as=0,ls=os=ss=null,us=!1,t)throw Error(a(300));return e}function gs(){var e=0!==ds;return ds=0,e}function ys(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ls?ss.memoizedState=ls=e:ls=ls.next=e,ls}function vs(){if(null===os){var e=ss.alternate;e=null!==e?e.memoizedState:null}else e=os.next;var t=null===ls?ss.memoizedState:ls.next;if(null!==t)ls=t,os=e;else{if(null===e)throw Error(a(310));e={memoizedState:(os=e).memoizedState,baseState:os.baseState,baseQueue:os.baseQueue,queue:os.queue,next:null},null===ls?ss.memoizedState=ls=e:ls=ls.next=e}return ls}function _s(e,t){return"function"===typeof t?t(e):t}function bs(e){var t=vs(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=os,i=r.baseQueue,s=n.pending;if(null!==s){if(null!==i){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(null!==i){s=i.next,r=r.baseState;var l=o=null,u=null,c=s;do{var d=c.lane;if((as&d)===d)null!==u&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===u?(l=u=h,o=r):u=u.next=h,ss.lanes|=d,Ll|=d}c=c.next}while(null!==c&&c!==s);null===u?o=r:u.next=l,or(r,t.memoizedState)||(_o=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=u,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{s=i.lane,ss.lanes|=s,Ll|=s,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function ws(e){var t=vs(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(null!==i){n.pending=null;var o=i=i.next;do{s=e(s,o.action),o=o.next}while(o!==i);or(s,t.memoizedState)||(_o=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function Cs(){}function ks(e,t){var n=ss,r=vs(),i=t(),s=!or(r.memoizedState,i);if(s&&(r.memoizedState=i,_o=!0),r=r.queue,Os(xs.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||null!==ls&&1&ls.memoizedState.tag){if(n.flags|=2048,Ps(9,Es.bind(null,n,r,i,t),void 0,null),null===Il)throw Error(a(349));0!==(30&as)||Ss(n,t,i)}return i}function Ss(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=ss.updateQueue)?(t={lastEffect:null,stores:null},ss.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Es(e,t,n,r){t.value=n,t.getSnapshot=r,Ns(t)&&Ts(e)}function xs(e,t,n){return n((function(){Ns(t)&&Ts(e)}))}function Ns(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!or(e,n)}catch(r){return!0}}function Ts(e){var t=Aa(e,1);null!==t&&nu(t,e,1,-1)}function Is(e){var t=ys();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_s,lastRenderedState:e},t.queue=e,e=e.dispatch=Qs.bind(null,ss,e),[t.memoizedState,e]}function Ps(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=ss.updateQueue)?(t={lastEffect:null,stores:null},ss.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Rs(){return vs().memoizedState}function js(e,t,n,r){var i=ys();ss.flags|=e,i.memoizedState=Ps(1|t,n,void 0,void 0===r?null:r)}function Ds(e,t,n,r){var i=vs();r=void 0===r?null:r;var a=void 0;if(null!==os){var s=os.memoizedState;if(a=s.destroy,null!==r&&ps(r,s.deps))return void(i.memoizedState=Ps(t,n,a,r))}ss.flags|=e,i.memoizedState=Ps(1|t,n,a,r)}function As(e,t){return js(8390656,8,e,t)}function Os(e,t){return Ds(2048,8,e,t)}function Ls(e,t){return Ds(4,2,e,t)}function Ms(e,t){return Ds(4,4,e,t)}function Fs(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function $s(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ds(4,4,Fs.bind(null,t,e),n)}function zs(){}function Us(e,t){var n=vs();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ps(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Bs(e,t){var n=vs();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ps(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ws(e,t,n){return 0===(21&as)?(e.baseState&&(e.baseState=!1,_o=!0),e.memoizedState=n):(or(n,t)||(n=mt(),ss.lanes|=n,Ll|=n,e.baseState=!0),t)}function qs(e,t){var n=_t;_t=0!==n&&4>n?n:4,e(!0);var r=is.transition;is.transition={};try{e(!1),t()}finally{_t=n,is.transition=r}}function Hs(){return vs().memoizedState}function Vs(e,t,n){var r=tu(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Ks(e))Ys(t,n);else if(null!==(n=Da(e,t,n,r))){nu(n,e,r,eu()),Gs(n,t,r)}}function Qs(e,t,n){var r=tu(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ks(e))Ys(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var s=t.lastRenderedState,o=a(s,n);if(i.hasEagerState=!0,i.eagerState=o,or(o,s)){var l=t.interleaved;return null===l?(i.next=i,ja(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(u){}null!==(n=Da(e,t,i,r))&&(nu(n,e,r,i=eu()),Gs(n,t,r))}}function Ks(e){var t=e.alternate;return e===ss||null!==t&&t===ss}function Ys(e,t){cs=us=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Gs(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}var Js={readContext:Pa,useCallback:fs,useContext:fs,useEffect:fs,useImperativeHandle:fs,useInsertionEffect:fs,useLayoutEffect:fs,useMemo:fs,useReducer:fs,useRef:fs,useState:fs,useDebugValue:fs,useDeferredValue:fs,useTransition:fs,useMutableSource:fs,useSyncExternalStore:fs,useId:fs,unstable_isNewReconciler:!1},Xs={readContext:Pa,useCallback:function(e,t){return ys().memoizedState=[e,void 0===t?null:t],e},useContext:Pa,useEffect:As,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,js(4194308,4,Fs.bind(null,t,e),n)},useLayoutEffect:function(e,t){return js(4194308,4,e,t)},useInsertionEffect:function(e,t){return js(4,2,e,t)},useMemo:function(e,t){var n=ys();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ys();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Vs.bind(null,ss,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},ys().memoizedState=e},useState:Is,useDebugValue:zs,useDeferredValue:function(e){return ys().memoizedState=e},useTransition:function(){var e=Is(!1),t=e[0];return e=qs.bind(null,e[1]),ys().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=ss,i=ys();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Il)throw Error(a(349));0!==(30&as)||Ss(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,As(xs.bind(null,r,s,e),[e]),r.flags|=2048,Ps(9,Es.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=ys(),t=Il.identifierPrefix;if(ia){var n=Ji;t=":"+t+"R"+(n=(Gi&~(1<<32-st(Gi)-1)).toString(32)+n),0<(n=ds++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=hs++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Zs={readContext:Pa,useCallback:Us,useContext:Pa,useEffect:Os,useImperativeHandle:$s,useInsertionEffect:Ls,useLayoutEffect:Ms,useMemo:Bs,useReducer:bs,useRef:Rs,useState:function(){return bs(_s)},useDebugValue:zs,useDeferredValue:function(e){return Ws(vs(),os.memoizedState,e)},useTransition:function(){return[bs(_s)[0],vs().memoizedState]},useMutableSource:Cs,useSyncExternalStore:ks,useId:Hs,unstable_isNewReconciler:!1},eo={readContext:Pa,useCallback:Us,useContext:Pa,useEffect:Os,useImperativeHandle:$s,useInsertionEffect:Ls,useLayoutEffect:Ms,useMemo:Bs,useReducer:ws,useRef:Rs,useState:function(){return ws(_s)},useDebugValue:zs,useDeferredValue:function(e){var t=vs();return null===os?t.memoizedState=e:Ws(t,os.memoizedState,e)},useTransition:function(){return[ws(_s)[0],vs().memoizedState]},useMutableSource:Cs,useSyncExternalStore:ks,useId:Hs,unstable_isNewReconciler:!1};function to(e,t){if(e&&e.defaultProps){for(var n in t=M({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function no(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:M({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ro={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=eu(),i=tu(e),a=Fa(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=$a(e,a,i))&&(nu(t,e,i,r),za(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=eu(),i=tu(e),a=Fa(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=$a(e,a,i))&&(nu(t,e,i,r),za(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=eu(),r=tu(e),i=Fa(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=$a(e,i,r))&&(nu(t,e,r,n),za(t,e,r))}};function io(e,t,n,r,i,a,s){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,s):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,a))}function ao(e,t,n){var r=!1,i=Ni,a=t.contextType;return"object"===typeof a&&null!==a?a=Pa(a):(i=ji(t)?Pi:Ti.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ri(e,i):Ni),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ro,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function so(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ro.enqueueReplaceState(t,t.state,null)}function oo(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},La(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Pa(a):(a=ji(t)?Pi:Ti.current,i.context=Ri(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(no(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ro.enqueueReplaceState(i,i.state,null),Ba(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function lo(e,t){try{var n="",r=t;do{n+=U(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function uo(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function co(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var ho="function"===typeof WeakMap?WeakMap:Map;function fo(e,t,n){(n=Fa(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){ql||(ql=!0,Hl=r),co(0,t)},n}function po(e,t,n){(n=Fa(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){co(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){co(0,t),"function"!==typeof r&&(null===Vl?Vl=new Set([this]):Vl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function mo(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ho;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Eu.bind(null,e,t,n),t.then(e,e))}function go(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function yo(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Fa(-1,1)).tag=2,$a(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var vo=b.ReactCurrentOwner,_o=!1;function bo(e,t,n,r){t.child=null===e?wa(t,null,n,r):ba(t,e.child,n,r)}function wo(e,t,n,r,i){n=n.render;var a=t.ref;return Ia(t,i),r=ms(e,t,n,r,a,i),n=gs(),null===e||_o?(ia&&n&&ea(t),t.flags|=1,bo(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,qo(e,t,i))}function Co(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||ju(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Au(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,ko(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var s=a.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(s,r)&&e.ref===t.ref)return qo(e,t,i)}return t.flags|=1,(e=Du(a,r)).ref=t.ref,e.return=t,t.child=e}function ko(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(lr(a,r)&&e.ref===t.ref){if(_o=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,qo(e,t,i);0!==(131072&e.flags)&&(_o=!0)}}return xo(e,t,n,r,i)}function So(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},xi(Dl,jl),jl|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,xi(Dl,jl),jl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,xi(Dl,jl),jl|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,xi(Dl,jl),jl|=r;return bo(e,t,i,n),t.child}function Eo(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function xo(e,t,n,r,i){var a=ji(n)?Pi:Ti.current;return a=Ri(t,a),Ia(t,i),n=ms(e,t,n,r,a,i),r=gs(),null===e||_o?(ia&&r&&ea(t),t.flags|=1,bo(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,qo(e,t,i))}function No(e,t,n,r,i){if(ji(n)){var a=!0;Li(t)}else a=!1;if(Ia(t,i),null===t.stateNode)Wo(e,t),ao(t,n,r),oo(t,n,r,i),r=!0;else if(null===e){var s=t.stateNode,o=t.memoizedProps;s.props=o;var l=s.context,u=n.contextType;"object"===typeof u&&null!==u?u=Pa(u):u=Ri(t,u=ji(n)?Pi:Ti.current);var c=n.getDerivedStateFromProps,d="function"===typeof c||"function"===typeof s.getSnapshotBeforeUpdate;d||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(o!==r||l!==u)&&so(t,s,r,u),Oa=!1;var h=t.memoizedState;s.state=h,Ba(t,r,s,i),l=t.memoizedState,o!==r||h!==l||Ii.current||Oa?("function"===typeof c&&(no(t,n,c,r),l=t.memoizedState),(o=Oa||io(t,n,o,r,h,l,u))?(d||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(t.flags|=4194308)):("function"===typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),s.props=r,s.state=l,s.context=u,r=o):("function"===typeof s.componentDidMount&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,Ma(e,t),o=t.memoizedProps,u=t.type===t.elementType?o:to(t.type,o),s.props=u,d=t.pendingProps,h=s.context,"object"===typeof(l=n.contextType)&&null!==l?l=Pa(l):l=Ri(t,l=ji(n)?Pi:Ti.current);var f=n.getDerivedStateFromProps;(c="function"===typeof f||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(o!==d||h!==l)&&so(t,s,r,l),Oa=!1,h=t.memoizedState,s.state=h,Ba(t,r,s,i);var p=t.memoizedState;o!==d||h!==p||Ii.current||Oa?("function"===typeof f&&(no(t,n,f,r),p=t.memoizedState),(u=Oa||io(t,n,u,r,h,p,l)||!1)?(c||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(r,p,l),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof s.componentDidUpdate&&(t.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof s.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),s.props=r,s.state=p,s.context=l,r=u):("function"!==typeof s.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return To(e,t,n,r,a,i)}function To(e,t,n,r,i,a){Eo(e,t);var s=0!==(128&t.flags);if(!r&&!s)return i&&Mi(t,n,!1),qo(e,t,a);r=t.stateNode,vo.current=t;var o=s&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&s?(t.child=ba(t,e.child,null,a),t.child=ba(t,null,o,a)):bo(e,t,o,a),t.memoizedState=r.state,i&&Mi(t,n,!0),t.child}function Io(e){var t=e.stateNode;t.pendingContext?Ai(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ai(0,t.context,!1),Ya(e,t.containerInfo)}function Po(e,t,n,r,i){return fa(),pa(i),t.flags|=256,bo(e,t,n,r),t.child}var Ro,jo,Do,Ao,Oo={dehydrated:null,treeContext:null,retryLane:0};function Lo(e){return{baseLanes:e,cachePool:null,transitions:null}}function Mo(e,t,n){var r,i=t.pendingProps,s=Za.current,o=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&s)),r?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(s|=1),xi(Za,1&s),null===e)return ua(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,o?(i=t.mode,o=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=Lu(l,i,0,null),e=Ou(e,i,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Lo(n),t.memoizedState=Oo,e):Fo(t,l));if(null!==(s=e.memoizedState)&&null!==(r=s.dehydrated))return function(e,t,n,r,i,s,o){if(n)return 256&t.flags?(t.flags&=-257,$o(e,t,o,r=uo(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=Lu({mode:"visible",children:r.children},i,0,null),(s=Ou(s,i,o,null)).flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,0!==(1&t.mode)&&ba(t,e.child,null,o),t.child.memoizedState=Lo(o),t.memoizedState=Oo,s);if(0===(1&t.mode))return $o(e,t,o,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,$o(e,t,o,r=uo(s=Error(a(419)),r,void 0))}if(l=0!==(o&e.childLanes),_o||l){if(null!==(r=Il)){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|o))?0:i)&&i!==s.retryLane&&(s.retryLane=i,Aa(e,i),nu(r,e,i,-1))}return mu(),$o(e,t,o,r=uo(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Nu.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,ra=ui(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(Qi[Ki++]=Gi,Qi[Ki++]=Ji,Qi[Ki++]=Yi,Gi=e.id,Ji=e.overflow,Yi=t),t=Fo(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,s,n);if(o){o=i.fallback,l=t.mode,r=(s=e.child).sibling;var u={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==s?((i=t.child).childLanes=0,i.pendingProps=u,t.deletions=null):(i=Du(s,u)).subtreeFlags=14680064&s.subtreeFlags,null!==r?o=Du(r,o):(o=Ou(o,l,n,null)).flags|=2,o.return=t,i.return=t,i.sibling=o,t.child=i,i=o,o=t.child,l=null===(l=e.child.memoizedState)?Lo(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~n,t.memoizedState=Oo,i}return e=(o=e.child).sibling,i=Du(o,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Fo(e,t){return(t=Lu({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function $o(e,t,n,r){return null!==r&&pa(r),ba(t,e.child,null,n),(e=Fo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function zo(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ta(e.return,t,n)}function Uo(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function Bo(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(bo(e,t,r.children,n),0!==(2&(r=Za.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&zo(e,n,t);else if(19===e.tag)zo(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(xi(Za,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===es(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Uo(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===es(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Uo(t,!0,n,null,a);break;case"together":Uo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Wo(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function qo(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ll|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Du(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Du(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ho(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Vo(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Qo(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vo(t),null;case 1:case 17:return ji(t.type)&&Di(),Vo(t),null;case 3:return r=t.stateNode,Ga(),Ei(Ii),Ei(Ti),ns(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(da(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(su(aa),aa=null))),jo(e,t),Vo(t),null;case 5:Xa(t);var i=Ka(Qa.current);if(n=t.type,null!==e&&null!=t.stateNode)Do(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Vo(t),null}if(e=Ka(Ha.current),da(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[hi]=t,r[fi]=s,e=0!==(1&t.mode),n){case"dialog":$r("cancel",r),$r("close",r);break;case"iframe":case"object":case"embed":$r("load",r);break;case"video":case"audio":for(i=0;i<Or.length;i++)$r(Or[i],r);break;case"source":$r("error",r);break;case"img":case"image":case"link":$r("error",r),$r("load",r);break;case"details":$r("toggle",r);break;case"input":G(r,s),$r("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},$r("invalid",r);break;case"textarea":ie(r,s),$r("invalid",r)}for(var l in ve(n,s),i=null,s)if(s.hasOwnProperty(l)){var u=s[l];"children"===l?"string"===typeof u?r.textContent!==u&&(!0!==s.suppressHydrationWarning&&Xr(r.textContent,u,e),i=["children",u]):"number"===typeof u&&r.textContent!==""+u&&(!0!==s.suppressHydrationWarning&&Xr(r.textContent,u,e),i=["children",""+u]):o.hasOwnProperty(l)&&null!=u&&"onScroll"===l&&$r("scroll",r)}switch(n){case"input":V(r),Z(r,s,!0);break;case"textarea":V(r),se(r);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[hi]=t,e[fi]=r,Ro(e,t,!1,!1),t.stateNode=e;e:{switch(l=_e(n,r),n){case"dialog":$r("cancel",e),$r("close",e),i=r;break;case"iframe":case"object":case"embed":$r("load",e),i=r;break;case"video":case"audio":for(i=0;i<Or.length;i++)$r(Or[i],e);i=r;break;case"source":$r("error",e),i=r;break;case"img":case"image":case"link":$r("error",e),$r("load",e),i=r;break;case"details":$r("toggle",e),i=r;break;case"input":G(e,r),i=Y(e,r),$r("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=M({},r,{value:void 0}),$r("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),$r("invalid",e)}for(s in ve(n,i),u=i)if(u.hasOwnProperty(s)){var c=u[s];"style"===s?ge(e,c):"dangerouslySetInnerHTML"===s?null!=(c=c?c.__html:void 0)&&de(e,c):"children"===s?"string"===typeof c?("textarea"!==n||""!==c)&&he(e,c):"number"===typeof c&&he(e,""+c):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(o.hasOwnProperty(s)?null!=c&&"onScroll"===s&&$r("scroll",e):null!=c&&_(e,s,c,l))}switch(n){case"input":V(e),Z(e,r,!1);break;case"textarea":V(e),se(e);break;case"option":null!=r.value&&e.setAttribute("value",""+q(r.value));break;case"select":e.multiple=!!r.multiple,null!=(s=r.value)?ne(e,!!r.multiple,s,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Vo(t),null;case 6:if(e&&null!=t.stateNode)Ao(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=Ka(Qa.current),Ka(Ha.current),da(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(s=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Xr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xr(r.nodeValue,n,0!==(1&e.mode))}s&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Vo(t),null;case 13:if(Ei(Za),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))ha(),fa(),t.flags|=98560,s=!1;else if(s=da(t),null!==r&&null!==r.dehydrated){if(null===e){if(!s)throw Error(a(318));if(!(s=null!==(s=t.memoizedState)?s.dehydrated:null))throw Error(a(317));s[hi]=t}else fa(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Vo(t),s=!1}else null!==aa&&(su(aa),aa=null),s=!0;if(!s)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Za.current)?0===Al&&(Al=3):mu())),null!==t.updateQueue&&(t.flags|=4),Vo(t),null);case 4:return Ga(),jo(e,t),null===e&&Br(t.stateNode.containerInfo),Vo(t),null;case 10:return Na(t.type._context),Vo(t),null;case 19:if(Ei(Za),null===(s=t.memoizedState))return Vo(t),null;if(r=0!==(128&t.flags),null===(l=s.rendering))if(r)Ho(s,!1);else{if(0!==Al||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=es(e))){for(t.flags|=128,Ho(s,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(s=n).flags&=14680066,null===(l=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,e=l.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return xi(Za,1&Za.current|2),t.child}e=e.sibling}null!==s.tail&&Je()>Bl&&(t.flags|=128,r=!0,Ho(s,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=es(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ho(s,!0),null===s.tail&&"hidden"===s.tailMode&&!l.alternate&&!ia)return Vo(t),null}else 2*Je()-s.renderingStartTime>Bl&&1073741824!==n&&(t.flags|=128,r=!0,Ho(s,!1),t.lanes=4194304);s.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=s.last)?n.sibling=l:t.child=l,s.last=l)}return null!==s.tail?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Je(),t.sibling=null,n=Za.current,xi(Za,r?1&n|2:1&n),t):(Vo(t),null);case 22:case 23:return du(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&jl)&&(Vo(t),6&t.subtreeFlags&&(t.flags|=8192)):Vo(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Ko(e,t){switch(ta(t),t.tag){case 1:return ji(t.type)&&Di(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Ga(),Ei(Ii),Ei(Ti),ns(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Xa(t),null;case 13:if(Ei(Za),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));fa()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ei(Za),null;case 4:return Ga(),null;case 10:return Na(t.type._context),null;case 22:case 23:return du(),null;default:return null}}Ro=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},jo=function(){},Do=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Ka(Ha.current);var a,s=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),s=[];break;case"select":i=M({},i,{value:void 0}),r=M({},r,{value:void 0}),s=[];break;case"textarea":i=re(e,i),r=re(e,r),s=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(c in ve(n,r),n=null,i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&null!=i[c])if("style"===c){var l=i[c];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(o.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var u=r[c];if(l=null!=i?i[c]:void 0,r.hasOwnProperty(c)&&u!==l&&(null!=u||null!=l))if("style"===c)if(l){for(a in l)!l.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in u)u.hasOwnProperty(a)&&l[a]!==u[a]&&(n||(n={}),n[a]=u[a])}else n||(s||(s=[]),s.push(c,n)),n=u;else"dangerouslySetInnerHTML"===c?(u=u?u.__html:void 0,l=l?l.__html:void 0,null!=u&&l!==u&&(s=s||[]).push(c,u)):"children"===c?"string"!==typeof u&&"number"!==typeof u||(s=s||[]).push(c,""+u):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(o.hasOwnProperty(c)?(null!=u&&"onScroll"===c&&$r("scroll",e),s||l===u||(s=[])):(s=s||[]).push(c,u))}n&&(s=s||[]).push("style",n);var c=s;(t.updateQueue=c)&&(t.flags|=4)}},Ao=function(e,t,n,r){n!==r&&(t.flags|=4)};var Yo=!1,Go=!1,Jo="function"===typeof WeakSet?WeakSet:Set,Xo=null;function Zo(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Su(e,t,r)}else n.current=null}function el(e,t,n){try{n()}catch(r){Su(e,t,r)}}var tl=!1;function nl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&el(t,n,a)}i=i.next}while(i!==r)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function il(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function al(e){var t=e.alternate;null!==t&&(e.alternate=null,al(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[fi],delete t[mi],delete t[gi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function sl(e){return 5===e.tag||3===e.tag||4===e.tag}function ol(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||sl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function ul(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ul(e,t,n),e=e.sibling;null!==e;)ul(e,t,n),e=e.sibling}var cl=null,dl=!1;function hl(e,t,n){for(n=n.child;null!==n;)fl(e,t,n),n=n.sibling}function fl(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(o){}switch(n.tag){case 5:Go||Zo(n,t);case 6:var r=cl,i=dl;cl=null,hl(e,t,n),dl=i,null!==(cl=r)&&(dl?(e=cl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):cl.removeChild(n.stateNode));break;case 18:null!==cl&&(dl?(e=cl,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),Bt(e)):li(cl,n.stateNode));break;case 4:r=cl,i=dl,cl=n.stateNode.containerInfo,dl=!0,hl(e,t,n),cl=r,dl=i;break;case 0:case 11:case 14:case 15:if(!Go&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,s=a.destroy;a=a.tag,void 0!==s&&(0!==(2&a)||0!==(4&a))&&el(n,t,s),i=i.next}while(i!==r)}hl(e,t,n);break;case 1:if(!Go&&(Zo(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){Su(n,t,o)}hl(e,t,n);break;case 21:hl(e,t,n);break;case 22:1&n.mode?(Go=(r=Go)||null!==n.memoizedState,hl(e,t,n),Go=r):hl(e,t,n);break;default:hl(e,t,n)}}function pl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Jo),t.forEach((function(t){var r=Tu.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function ml(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:cl=l.stateNode,dl=!1;break e;case 3:case 4:cl=l.stateNode.containerInfo,dl=!0;break e}l=l.return}if(null===cl)throw Error(a(160));fl(s,o,i),cl=null,dl=!1;var u=i.alternate;null!==u&&(u.return=null),i.return=null}catch(c){Su(i,t,c)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ml(t,e),yl(e),4&r){try{nl(3,e,e.return),rl(3,e)}catch(g){Su(e,e.return,g)}try{nl(5,e,e.return)}catch(g){Su(e,e.return,g)}}break;case 1:ml(t,e),yl(e),512&r&&null!==n&&Zo(n,n.return);break;case 5:if(ml(t,e),yl(e),512&r&&null!==n&&Zo(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(g){Su(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var s=e.memoizedProps,o=null!==n?n.memoizedProps:s,l=e.type,u=e.updateQueue;if(e.updateQueue=null,null!==u)try{"input"===l&&"radio"===s.type&&null!=s.name&&J(i,s),_e(l,o);var c=_e(l,s);for(o=0;o<u.length;o+=2){var d=u[o],h=u[o+1];"style"===d?ge(i,h):"dangerouslySetInnerHTML"===d?de(i,h):"children"===d?he(i,h):_(i,d,h,c)}switch(l){case"input":X(i,s);break;case"textarea":ae(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var p=s.value;null!=p?ne(i,!!s.multiple,p,!1):f!==!!s.multiple&&(null!=s.defaultValue?ne(i,!!s.multiple,s.defaultValue,!0):ne(i,!!s.multiple,s.multiple?[]:"",!1))}i[fi]=s}catch(g){Su(e,e.return,g)}}break;case 6:if(ml(t,e),yl(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(g){Su(e,e.return,g)}}break;case 3:if(ml(t,e),yl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(g){Su(e,e.return,g)}break;case 4:default:ml(t,e),yl(e);break;case 13:ml(t,e),yl(e),8192&(i=e.child).flags&&(s=null!==i.memoizedState,i.stateNode.isHidden=s,!s||null!==i.alternate&&null!==i.alternate.memoizedState||(Ul=Je())),4&r&&pl(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Go=(c=Go)||d,ml(t,e),Go=c):ml(t,e),yl(e),8192&r){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!d&&0!==(1&e.mode))for(Xo=e,d=e.child;null!==d;){for(h=Xo=d;null!==Xo;){switch(p=(f=Xo).child,f.tag){case 0:case 11:case 14:case 15:nl(4,f,f.return);break;case 1:Zo(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Su(r,n,g)}}break;case 5:Zo(f,f.return);break;case 22:if(null!==f.memoizedState){wl(h);continue}}null!==p?(p.return=f,Xo=p):wl(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{i=h.stateNode,c?"function"===typeof(s=i.style).setProperty?s.setProperty("display","none","important"):s.display="none":(l=h.stateNode,o=void 0!==(u=h.memoizedProps.style)&&null!==u&&u.hasOwnProperty("display")?u.display:null,l.style.display=me("display",o))}catch(g){Su(e,e.return,g)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(g){Su(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ml(t,e),yl(e),4&r&&pl(e);case 21:}}function yl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(sl(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),ul(e,ol(e),i);break;case 3:case 4:var s=r.stateNode.containerInfo;ll(e,ol(e),s);break;default:throw Error(a(161))}}catch(o){Su(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function vl(e,t,n){Xo=e,_l(e,t,n)}function _l(e,t,n){for(var r=0!==(1&e.mode);null!==Xo;){var i=Xo,a=i.child;if(22===i.tag&&r){var s=null!==i.memoizedState||Yo;if(!s){var o=i.alternate,l=null!==o&&null!==o.memoizedState||Go;o=Yo;var u=Go;if(Yo=s,(Go=l)&&!u)for(Xo=i;null!==Xo;)l=(s=Xo).child,22===s.tag&&null!==s.memoizedState?Cl(i):null!==l?(l.return=s,Xo=l):Cl(i);for(;null!==a;)Xo=a,_l(a,t,n),a=a.sibling;Xo=i,Yo=o,Go=u}bl(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Xo=a):bl(e)}}function bl(e){for(;null!==Xo;){var t=Xo;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Go||rl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Go)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:to(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;null!==s&&Wa(t,s,r);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Wa(t,o,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var d=c.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&Bt(h)}}}break;default:throw Error(a(163))}Go||512&t.flags&&il(t)}catch(f){Su(t,t.return,f)}}if(t===e){Xo=null;break}if(null!==(n=t.sibling)){n.return=t.return,Xo=n;break}Xo=t.return}}function wl(e){for(;null!==Xo;){var t=Xo;if(t===e){Xo=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Xo=n;break}Xo=t.return}}function Cl(e){for(;null!==Xo;){var t=Xo;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(l){Su(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){Su(t,i,l)}}var a=t.return;try{il(t)}catch(l){Su(t,a,l)}break;case 5:var s=t.return;try{il(t)}catch(l){Su(t,s,l)}}}catch(l){Su(t,t.return,l)}if(t===e){Xo=null;break}var o=t.sibling;if(null!==o){o.return=t.return,Xo=o;break}Xo=t.return}}var kl,Sl=Math.ceil,El=b.ReactCurrentDispatcher,xl=b.ReactCurrentOwner,Nl=b.ReactCurrentBatchConfig,Tl=0,Il=null,Pl=null,Rl=0,jl=0,Dl=Si(0),Al=0,Ol=null,Ll=0,Ml=0,Fl=0,$l=null,zl=null,Ul=0,Bl=1/0,Wl=null,ql=!1,Hl=null,Vl=null,Ql=!1,Kl=null,Yl=0,Gl=0,Jl=null,Xl=-1,Zl=0;function eu(){return 0!==(6&Tl)?Je():-1!==Xl?Xl:Xl=Je()}function tu(e){return 0===(1&e.mode)?1:0!==(2&Tl)&&0!==Rl?Rl&-Rl:null!==ma.transition?(0===Zl&&(Zl=mt()),Zl):0!==(e=_t)?e:e=void 0===(e=window.event)?16:Gt(e.type)}function nu(e,t,n,r){if(50<Gl)throw Gl=0,Jl=null,Error(a(185));yt(e,n,r),0!==(2&Tl)&&e===Il||(e===Il&&(0===(2&Tl)&&(Ml|=n),4===Al&&ou(e,Rl)),ru(e,r),1===n&&0===Tl&&0===(1&t.mode)&&(Bl=Je()+500,$i&&Bi()))}function ru(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var s=31-st(a),o=1<<s,l=i[s];-1===l?0!==(o&n)&&0===(o&r)||(i[s]=ft(o,t)):l<=t&&(e.expiredLanes|=o),a&=~o}}(e,t);var r=ht(e,e===Il?Rl:0);if(0===r)null!==n&&Ke(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ke(n),1===t)0===e.tag?function(e){$i=!0,Ui(e)}(lu.bind(null,e)):Ui(lu.bind(null,e)),si((function(){0===(6&Tl)&&Bi()})),n=null;else{switch(bt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Iu(n,iu.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function iu(e,t){if(Xl=-1,Zl=0,0!==(6&Tl))throw Error(a(327));var n=e.callbackNode;if(Cu()&&e.callbackNode!==n)return null;var r=ht(e,e===Il?Rl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=gu(e,r);else{t=r;var i=Tl;Tl|=2;var s=pu();for(Il===e&&Rl===t||(Wl=null,Bl=Je()+500,hu(e,t));;)try{vu();break}catch(l){fu(e,l)}xa(),El.current=s,Tl=i,null!==Pl?t=0:(Il=null,Rl=0,t=Al)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=au(e,i))),1===t)throw n=Ol,hu(e,0),ou(e,r),ru(e,Je()),n;if(6===t)ou(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!or(a(),i))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=gu(e,r))&&(0!==(s=pt(e))&&(r=s,t=au(e,s))),1===t))throw n=Ol,hu(e,0),ou(e,r),ru(e,Je()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:wu(e,zl,Wl);break;case 3:if(ou(e,r),(130023424&r)===r&&10<(t=Ul+500-Je())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){eu(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(wu.bind(null,e,zl,Wl),t);break}wu(e,zl,Wl);break;case 4:if(ou(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-st(r);s=1<<o,(o=t[o])>i&&(i=o),r&=~s}if(r=i,10<(r=(120>(r=Je()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Sl(r/1960))-r)){e.timeoutHandle=ri(wu.bind(null,e,zl,Wl),r);break}wu(e,zl,Wl);break;default:throw Error(a(329))}}}return ru(e,Je()),e.callbackNode===n?iu.bind(null,e):null}function au(e,t){var n=$l;return e.current.memoizedState.isDehydrated&&(hu(e,t).flags|=256),2!==(e=gu(e,t))&&(t=zl,zl=n,null!==t&&su(t)),e}function su(e){null===zl?zl=e:zl.push.apply(zl,e)}function ou(e,t){for(t&=~Fl,t&=~Ml,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-st(t),r=1<<n;e[n]=-1,t&=~r}}function lu(e){if(0!==(6&Tl))throw Error(a(327));Cu();var t=ht(e,0);if(0===(1&t))return ru(e,Je()),null;var n=gu(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=au(e,r))}if(1===n)throw n=Ol,hu(e,0),ou(e,t),ru(e,Je()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wu(e,zl,Wl),ru(e,Je()),null}function uu(e,t){var n=Tl;Tl|=1;try{return e(t)}finally{0===(Tl=n)&&(Bl=Je()+500,$i&&Bi())}}function cu(e){null!==Kl&&0===Kl.tag&&0===(6&Tl)&&Cu();var t=Tl;Tl|=1;var n=Nl.transition,r=_t;try{if(Nl.transition=null,_t=1,e)return e()}finally{_t=r,Nl.transition=n,0===(6&(Tl=t))&&Bi()}}function du(){jl=Dl.current,Ei(Dl)}function hu(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Pl)for(n=Pl.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Di();break;case 3:Ga(),Ei(Ii),Ei(Ti),ns();break;case 5:Xa(r);break;case 4:Ga();break;case 13:case 19:Ei(Za);break;case 10:Na(r.type._context);break;case 22:case 23:du()}n=n.return}if(Il=e,Pl=e=Du(e.current,null),Rl=jl=t,Al=0,Ol=null,Fl=Ml=Ll=0,zl=$l=null,null!==Ra){for(t=0;t<Ra.length;t++)if(null!==(r=(n=Ra[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var s=a.next;a.next=i,r.next=s}n.pending=r}Ra=null}return e}function fu(e,t){for(;;){var n=Pl;try{if(xa(),rs.current=Js,us){for(var r=ss.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}us=!1}if(as=0,ls=os=ss=null,cs=!1,ds=0,xl.current=null,null===n||null===n.return){Al=1,Ol=t,Pl=null;break}e:{var s=e,o=n.return,l=n,u=t;if(t=Rl,l.flags|=32768,null!==u&&"object"===typeof u&&"function"===typeof u.then){var c=u,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=go(o);if(null!==p){p.flags&=-257,yo(p,o,l,0,t),1&p.mode&&mo(s,c,t),u=c;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(u),t.updateQueue=g}else m.add(u);break e}if(0===(1&t)){mo(s,c,t),mu();break e}u=Error(a(426))}else if(ia&&1&l.mode){var y=go(o);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),yo(y,o,l,0,t),pa(lo(u,l));break e}}s=u=lo(u,l),4!==Al&&(Al=2),null===$l?$l=[s]:$l.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t,Ua(s,fo(0,u,t));break e;case 1:l=u;var v=s.type,_=s.stateNode;if(0===(128&s.flags)&&("function"===typeof v.getDerivedStateFromError||null!==_&&"function"===typeof _.componentDidCatch&&(null===Vl||!Vl.has(_)))){s.flags|=65536,t&=-t,s.lanes|=t,Ua(s,po(s,l,t));break e}}s=s.return}while(null!==s)}bu(n)}catch(b){t=b,Pl===n&&null!==n&&(Pl=n=n.return);continue}break}}function pu(){var e=El.current;return El.current=Js,null===e?Js:e}function mu(){0!==Al&&3!==Al&&2!==Al||(Al=4),null===Il||0===(268435455&Ll)&&0===(268435455&Ml)||ou(Il,Rl)}function gu(e,t){var n=Tl;Tl|=2;var r=pu();for(Il===e&&Rl===t||(Wl=null,hu(e,t));;)try{yu();break}catch(i){fu(e,i)}if(xa(),Tl=n,El.current=r,null!==Pl)throw Error(a(261));return Il=null,Rl=0,Al}function yu(){for(;null!==Pl;)_u(Pl)}function vu(){for(;null!==Pl&&!Ye();)_u(Pl)}function _u(e){var t=kl(e.alternate,e,jl);e.memoizedProps=e.pendingProps,null===t?bu(e):Pl=t,xl.current=null}function bu(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Qo(n,t,jl)))return void(Pl=n)}else{if(null!==(n=Ko(n,t)))return n.flags&=32767,void(Pl=n);if(null===e)return Al=6,void(Pl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Pl=t);Pl=t=e}while(null!==t);0===Al&&(Al=5)}function wu(e,t,n){var r=_t,i=Nl.transition;try{Nl.transition=null,_t=1,function(e,t,n,r){do{Cu()}while(null!==Kl);if(0!==(6&Tl))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-st(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,s),e===Il&&(Pl=Il=null,Rl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Ql||(Ql=!0,Iu(tt,(function(){return Cu(),null}))),s=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||s){s=Nl.transition,Nl.transition=null;var o=_t;_t=1;var l=Tl;Tl|=4,xl.current=null,function(e,t){if(ei=qt,fr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch(w){n=null;break e}var o=0,l=-1,u=-1,c=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(l=o+i),h!==s||0!==r&&3!==h.nodeType||(u=o+r),3===h.nodeType&&(o+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===n&&++c===i&&(l=o),f===s&&++d===r&&(u=o),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}n=-1===l||-1===u?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},qt=!1,Xo=t;null!==Xo;)if(e=(t=Xo).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Xo=e;else for(;null!==Xo;){t=Xo;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,y=m.memoizedState,v=t.stateNode,_=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:to(t.type,g),y);v.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(a(163))}}catch(w){Su(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Xo=e;break}Xo=t.return}m=tl,tl=!1}(e,n),gl(n,e),pr(ti),qt=!!ei,ti=ei=null,e.current=n,vl(n,e,i),Ge(),Tl=l,_t=o,Nl.transition=s}else e.current=n;if(Ql&&(Ql=!1,Kl=e,Yl=i),s=e.pendingLanes,0===s&&(Vl=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ru(e,Je()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(ql)throw ql=!1,e=Hl,Hl=null,e;0!==(1&Yl)&&0!==e.tag&&Cu(),s=e.pendingLanes,0!==(1&s)?e===Jl?Gl++:(Gl=0,Jl=e):Gl=0,Bi()}(e,t,n,r)}finally{Nl.transition=i,_t=r}return null}function Cu(){if(null!==Kl){var e=bt(Yl),t=Nl.transition,n=_t;try{if(Nl.transition=null,_t=16>e?16:e,null===Kl)var r=!1;else{if(e=Kl,Kl=null,Yl=0,0!==(6&Tl))throw Error(a(331));var i=Tl;for(Tl|=4,Xo=e.current;null!==Xo;){var s=Xo,o=s.child;if(0!==(16&Xo.flags)){var l=s.deletions;if(null!==l){for(var u=0;u<l.length;u++){var c=l[u];for(Xo=c;null!==Xo;){var d=Xo;switch(d.tag){case 0:case 11:case 15:nl(8,d,s)}var h=d.child;if(null!==h)h.return=d,Xo=h;else for(;null!==Xo;){var f=(d=Xo).sibling,p=d.return;if(al(d),d===c){Xo=null;break}if(null!==f){f.return=p,Xo=f;break}Xo=p}}}var m=s.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}Xo=s}}if(0!==(2064&s.subtreeFlags)&&null!==o)o.return=s,Xo=o;else e:for(;null!==Xo;){if(0!==(2048&(s=Xo).flags))switch(s.tag){case 0:case 11:case 15:nl(9,s,s.return)}var v=s.sibling;if(null!==v){v.return=s.return,Xo=v;break e}Xo=s.return}}var _=e.current;for(Xo=_;null!==Xo;){var b=(o=Xo).child;if(0!==(2064&o.subtreeFlags)&&null!==b)b.return=o,Xo=b;else e:for(o=_;null!==Xo;){if(0!==(2048&(l=Xo).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(C){Su(l,l.return,C)}if(l===o){Xo=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,Xo=w;break e}Xo=l.return}}if(Tl=i,Bi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(C){}r=!0}return r}finally{_t=n,Nl.transition=t}}return!1}function ku(e,t,n){e=$a(e,t=fo(0,t=lo(n,t),1),1),t=eu(),null!==e&&(yt(e,1,t),ru(e,t))}function Su(e,t,n){if(3===e.tag)ku(e,e,n);else for(;null!==t;){if(3===t.tag){ku(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Vl||!Vl.has(r))){t=$a(t,e=po(t,e=lo(n,e),1),1),e=eu(),null!==t&&(yt(t,1,e),ru(t,e));break}}t=t.return}}function Eu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=eu(),e.pingedLanes|=e.suspendedLanes&n,Il===e&&(Rl&n)===n&&(4===Al||3===Al&&(130023424&Rl)===Rl&&500>Je()-Ul?hu(e,0):Fl|=n),ru(e,t)}function xu(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ct,0===(130023424&(ct<<=1))&&(ct=4194304)));var n=eu();null!==(e=Aa(e,t))&&(yt(e,t,n),ru(e,n))}function Nu(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),xu(e,n)}function Tu(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),xu(e,n)}function Iu(e,t){return Qe(e,t)}function Pu(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ru(e,t,n,r){return new Pu(e,t,n,r)}function ju(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Du(e,t){var n=e.alternate;return null===n?((n=Ru(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Au(e,t,n,r,i,s){var o=2;if(r=e,"function"===typeof e)ju(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case k:return Ou(n.children,i,s,t);case S:o=8,i|=8;break;case E:return(e=Ru(12,n,t,2|i)).elementType=E,e.lanes=s,e;case I:return(e=Ru(13,n,t,i)).elementType=I,e.lanes=s,e;case P:return(e=Ru(19,n,t,i)).elementType=P,e.lanes=s,e;case D:return Lu(n,i,s,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case x:o=10;break e;case N:o=9;break e;case T:o=11;break e;case R:o=14;break e;case j:o=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Ru(o,n,t,i)).elementType=e,t.type=r,t.lanes=s,t}function Ou(e,t,n,r){return(e=Ru(7,e,r,t)).lanes=n,e}function Lu(e,t,n,r){return(e=Ru(22,e,r,t)).elementType=D,e.lanes=n,e.stateNode={isHidden:!1},e}function Mu(e,t,n){return(e=Ru(6,e,null,t)).lanes=n,e}function Fu(e,t,n){return(t=Ru(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function $u(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function zu(e,t,n,r,i,a,s,o,l){return e=new $u(e,t,n,o,l),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Ru(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},La(a),e}function Uu(e){if(!e)return Ni;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ji(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(ji(n))return Oi(e,n,t)}return t}function Bu(e,t,n,r,i,a,s,o,l){return(e=zu(n,r,!0,e,0,a,0,o,l)).context=Uu(null),n=e.current,(a=Fa(r=eu(),i=tu(n))).callback=void 0!==t&&null!==t?t:null,$a(n,a,i),e.current.lanes=i,yt(e,i,r),ru(e,r),e}function Wu(e,t,n,r){var i=t.current,a=eu(),s=tu(i);return n=Uu(n),null===t.context?t.context=n:t.pendingContext=n,(t=Fa(a,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=$a(i,t,s))&&(nu(e,i,s,a),za(e,i,s)),s}function qu(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Hu(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Vu(e,t){Hu(e,t),(e=e.alternate)&&Hu(e,t)}kl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ii.current)_o=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return _o=!1,function(e,t,n){switch(t.tag){case 3:Io(t),fa();break;case 5:Ja(t);break;case 1:ji(t.type)&&Li(t);break;case 4:Ya(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;xi(Ca,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(xi(Za,1&Za.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Mo(e,t,n):(xi(Za,1&Za.current),null!==(e=qo(e,t,n))?e.sibling:null);xi(Za,1&Za.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Bo(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),xi(Za,Za.current),r)break;return null;case 22:case 23:return t.lanes=0,So(e,t,n)}return qo(e,t,n)}(e,t,n);_o=0!==(131072&e.flags)}else _o=!1,ia&&0!==(1048576&t.flags)&&Zi(t,Vi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Wo(e,t),e=t.pendingProps;var i=Ri(t,Ti.current);Ia(t,n),i=ms(null,t,r,e,i,n);var s=gs();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ji(r)?(s=!0,Li(t)):s=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,La(t),i.updater=ro,t.stateNode=i,i._reactInternals=t,oo(t,r,e,n),t=To(null,t,r,!0,s,n)):(t.tag=0,ia&&s&&ea(t),bo(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Wo(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return ju(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===T)return 11;if(e===R)return 14}return 2}(r),e=to(r,e),i){case 0:t=xo(null,t,r,e,n);break e;case 1:t=No(null,t,r,e,n);break e;case 11:t=wo(null,t,r,e,n);break e;case 14:t=Co(null,t,r,to(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,xo(e,t,r,i=t.elementType===r?i:to(r,i),n);case 1:return r=t.type,i=t.pendingProps,No(e,t,r,i=t.elementType===r?i:to(r,i),n);case 3:e:{if(Io(t),null===e)throw Error(a(387));r=t.pendingProps,i=(s=t.memoizedState).element,Ma(e,t),Ba(t,r,null,n);var o=t.memoizedState;if(r=o.element,s.isDehydrated){if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=Po(e,t,r,n,i=lo(Error(a(423)),t));break e}if(r!==i){t=Po(e,t,r,n,i=lo(Error(a(424)),t));break e}for(ra=ui(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=wa(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fa(),r===i){t=qo(e,t,n);break e}bo(e,t,r,n)}t=t.child}return t;case 5:return Ja(t),null===e&&ua(t),r=t.type,i=t.pendingProps,s=null!==e?e.memoizedProps:null,o=i.children,ni(r,i)?o=null:null!==s&&ni(r,s)&&(t.flags|=32),Eo(e,t),bo(e,t,o,n),t.child;case 6:return null===e&&ua(t),null;case 13:return Mo(e,t,n);case 4:return Ya(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=ba(t,null,r,n):bo(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,wo(e,t,r,i=t.elementType===r?i:to(r,i),n);case 7:return bo(e,t,t.pendingProps,n),t.child;case 8:case 12:return bo(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value,xi(Ca,r._currentValue),r._currentValue=o,null!==s)if(or(s.value,o)){if(s.children===i.children&&!Ii.current){t=qo(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var l=s.dependencies;if(null!==l){o=s.child;for(var u=l.firstContext;null!==u;){if(u.context===r){if(1===s.tag){(u=Fa(-1,n&-n)).tag=2;var c=s.updateQueue;if(null!==c){var d=(c=c.shared).pending;null===d?u.next=u:(u.next=d.next,d.next=u),c.pending=u}}s.lanes|=n,null!==(u=s.alternate)&&(u.lanes|=n),Ta(s.return,n,t),l.lanes|=n;break}u=u.next}}else if(10===s.tag)o=s.type===t.type?null:s.child;else if(18===s.tag){if(null===(o=s.return))throw Error(a(341));o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),Ta(o,n,t),o=s.sibling}else o=s.child;if(null!==o)o.return=s;else for(o=s;null!==o;){if(o===t){o=null;break}if(null!==(s=o.sibling)){s.return=o.return,o=s;break}o=o.return}s=o}bo(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ia(t,n),r=r(i=Pa(i)),t.flags|=1,bo(e,t,r,n),t.child;case 14:return i=to(r=t.type,t.pendingProps),Co(e,t,r,i=to(r.type,i),n);case 15:return ko(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:to(r,i),Wo(e,t),t.tag=1,ji(r)?(e=!0,Li(t)):e=!1,Ia(t,n),ao(t,r,i),oo(t,r,i,n),To(null,t,r,!0,e,n);case 19:return Bo(e,t,n);case 22:return So(e,t,n)}throw Error(a(156,t.tag))};var Qu="function"===typeof reportError?reportError:function(e){console.error(e)};function Ku(e){this._internalRoot=e}function Yu(e){this._internalRoot=e}function Gu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Ju(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Xu(){}function Zu(e,t,n,r,i){var a=n._reactRootContainer;if(a){var s=a;if("function"===typeof i){var o=i;i=function(){var e=qu(s);o.call(e)}}Wu(t,s,e,i)}else s=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=qu(s);a.call(e)}}var s=Bu(t,r,e,0,null,!1,0,"",Xu);return e._reactRootContainer=s,e[pi]=s.current,Br(8===e.nodeType?e.parentNode:e),cu(),s}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var o=r;r=function(){var e=qu(l);o.call(e)}}var l=zu(e,0,!1,null,0,!1,0,"",Xu);return e._reactRootContainer=l,e[pi]=l.current,Br(8===e.nodeType?e.parentNode:e),cu((function(){Wu(t,l,n,r)})),l}(n,t,e,i,r);return qu(s)}Yu.prototype.render=Ku.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Wu(e,t,null,null)},Yu.prototype.unmount=Ku.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;cu((function(){Wu(null,e,null,null)})),t[pi]=null}},Yu.prototype.unstable_scheduleHydration=function(e){if(e){var t=St();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Dt.length&&0!==t&&t<Dt[n].priority;n++);Dt.splice(n,0,e),0===n&&Mt(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(vt(t,1|n),ru(t,Je()),0===(6&Tl)&&(Bl=Je()+500,Bi()))}break;case 13:cu((function(){var t=Aa(e,1);if(null!==t){var n=eu();nu(t,e,1,n)}})),Vu(e,1)}},Ct=function(e){if(13===e.tag){var t=Aa(e,134217728);if(null!==t)nu(t,e,134217728,eu());Vu(e,134217728)}},kt=function(e){if(13===e.tag){var t=tu(e),n=Aa(e,t);if(null!==n)nu(n,e,t,eu());Vu(e,t)}},St=function(){return _t},Et=function(e,t){var n=_t;try{return _t=e,t()}finally{_t=n}},Ce=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(a(90));Q(r),X(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Te=uu,Ie=cu;var ec={usingClientEntryPoint:!1,Events:[_i,bi,wi,xe,Ne,uu]},tc={findFiberByHostInstance:vi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nc={bundleType:tc.bundleType,version:tc.version,rendererPackageName:tc.rendererPackageName,rendererConfig:tc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=He(e))?null:e.stateNode},findFiberByHostInstance:tc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var rc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rc.isDisabled&&rc.supportsFiber)try{it=rc.inject(nc),at=rc}catch(ce){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ec,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Gu(t))throw Error(a(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:C,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Gu(e))throw Error(a(299));var n=!1,r="",i=Qu;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=zu(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,Br(8===e.nodeType?e.parentNode:e),new Ku(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=He(t))?null:e.stateNode},t.flushSync=function(e){return cu(e)},t.hydrate=function(e,t,n){if(!Ju(t))throw Error(a(200));return Zu(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Gu(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,s="",o=Qu;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(s=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),t=Bu(t,null,e,1,null!=n?n:null,i,0,s,o),e[pi]=t.current,Br(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Yu(t)},t.render=function(e,t,n){if(!Ju(t))throw Error(a(200));return Zu(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Ju(e))throw Error(a(40));return!!e._reactRootContainer&&(cu((function(){Zu(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=uu,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Ju(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return Zu(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},391:(e,t,n)=>{var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)},153:(e,t,n)=>{var r=n(43),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function u(e,t,n){var r,a={},u=null,c=null;for(r in void 0!==n&&(u=""+n),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(c=t.ref),t)s.call(t,r)&&!l.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:u,ref:c,props:a,_owner:o.current}}t.Fragment=a,t.jsx=u,t.jsxs=u},202:(e,t)=>{var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function v(){}function _(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var b=_.prototype=new v;b.constructor=_,m(b,y.prototype),b.isPureReactComponent=!0;var w=Array.isArray,C=Object.prototype.hasOwnProperty,k={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,r){var i,a={},s=null,o=null;if(null!=t)for(i in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(s=""+t.key),t)C.call(t,i)&&!S.hasOwnProperty(i)&&(a[i]=t[i]);var l=arguments.length-2;if(1===l)a.children=r;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];a.children=u}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===a[i]&&(a[i]=l[i]);return{$$typeof:n,type:e,key:s,ref:o,props:a,_owner:k.current}}function x(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var N=/\/+/g;function T(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function I(e,t,i,a,s){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return s=s(l=e),e=""===a?"."+T(l,0):a,w(s)?(i="",null!=e&&(i=e.replace(N,"$&/")+"/"),I(s,t,i,"",(function(e){return e}))):null!=s&&(x(s)&&(s=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(s,i+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(N,"$&/")+"/")+e)),t.push(s)),1;if(l=0,a=""===a?".":a+":",w(e))for(var u=0;u<e.length;u++){var c=a+T(o=e[u],u);l+=I(o,t,i,c,s)}else if(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof c)for(e=c.call(e),u=0;!(o=e.next()).done;)l+=I(o=o.value,t,i,c=a+T(o,u++),s);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function P(e,t,n){if(null==e)return e;var r=[],i=0;return I(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function R(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var j={current:null},D={transition:null},A={ReactCurrentDispatcher:j,ReactCurrentBatchConfig:D,ReactCurrentOwner:k};function O(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:P,forEach:function(e,t,n){P(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return P(e,(function(){t++})),t},toArray:function(e){return P(e,(function(e){return e}))||[]},only:function(e){if(!x(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=s,t.PureComponent=_,t.StrictMode=a,t.Suspense=c,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=A,t.act=O,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),a=e.key,s=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,o=k.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(u in t)C.call(t,u)&&!S.hasOwnProperty(u)&&(i[u]=void 0===t[u]&&void 0!==l?l[u]:t[u])}var u=arguments.length-2;if(1===u)i.children=r;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];i.children=l}return{$$typeof:n,type:e.type,key:a,ref:s,props:i,_owner:o}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=x,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:R}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=D.transition;D.transition={};try{e()}finally{D.transition=t}},t.unstable_act=O,t.useCallback=function(e,t){return j.current.useCallback(e,t)},t.useContext=function(e){return j.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return j.current.useDeferredValue(e)},t.useEffect=function(e,t){return j.current.useEffect(e,t)},t.useId=function(){return j.current.useId()},t.useImperativeHandle=function(e,t,n){return j.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return j.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return j.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return j.current.useMemo(e,t)},t.useReducer=function(e,t,n){return j.current.useReducer(e,t,n)},t.useRef=function(e){return j.current.useRef(e)},t.useState=function(e){return j.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return j.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return j.current.useTransition()},t.version="18.3.1"},43:(e,t,n)=>{e.exports=n(202)},579:(e,t,n)=>{e.exports=n(153)},234:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,s=i>>>1;r<s;){var o=2*(r+1)-1,l=e[o],u=o+1,c=e[u];if(0>a(l,n))u<i&&0>a(c,l)?(e[r]=c,e[u]=n,r=u):(e[r]=l,e[o]=n,r=o);else{if(!(u<i&&0>a(c,n)))break e;e[r]=c,e[u]=n,r=u}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],c=[],d=1,h=null,f=3,p=!1,m=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,_="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(c);null!==t;){if(null===t.callback)i(c);else{if(!(t.startTime<=e))break;i(c),t.sortIndex=t.expirationTime,n(u,t)}t=r(c)}}function w(e){if(g=!1,b(e),!m)if(null!==r(u))m=!0,D(C);else{var t=r(c);null!==t&&A(w,t.startTime-e)}}function C(e,n){m=!1,g&&(g=!1,v(x),x=-1),p=!0;var a=f;try{for(b(n),h=r(u);null!==h&&(!(h.expirationTime>n)||e&&!I());){var s=h.callback;if("function"===typeof s){h.callback=null,f=h.priorityLevel;var o=s(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof o?h.callback=o:h===r(u)&&i(u),b(n)}else i(u);h=r(u)}if(null!==h)var l=!0;else{var d=r(c);null!==d&&A(w,d.startTime-n),l=!1}return l}finally{h=null,f=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var k,S=!1,E=null,x=-1,N=5,T=-1;function I(){return!(t.unstable_now()-T<N)}function P(){if(null!==E){var e=t.unstable_now();T=e;var n=!0;try{n=E(!0,e)}finally{n?k():(S=!1,E=null)}}else S=!1}if("function"===typeof _)k=function(){_(P)};else if("undefined"!==typeof MessageChannel){var R=new MessageChannel,j=R.port2;R.port1.onmessage=P,k=function(){j.postMessage(null)}}else k=function(){y(P,0)};function D(e){E=e,S||(S=!0,k())}function A(e,n){x=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,D(C))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(u)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,a){var s=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?s+a:s:a=s,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:a,expirationTime:o=a+o,sortIndex:-1},a>s?(e.sortIndex=a,n(c,e),null===r(u)&&e===r(c)&&(g?(v(x),x=-1):g=!0,A(w,a-s))):(e.sortIndex=o,n(u,e),m||p||(m=!0,D(C))),e},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},853:(e,t,n)=>{e.exports=n(234)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.m=e,(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var a=Object.create(null);n.r(a);var s={};e=e||[null,t({}),t([]),t(t)];for(var o=2&i&&r;"object"==typeof o&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach((e=>s[e]=()=>r[e]));return s.default=()=>r,n.d(a,s),a}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,r)=>(n.f[r](e,t),t)),[])),n.u=e=>"static/js/"+e+".2b707faf.chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="trading-games:";n.l=(r,i,a,s)=>{if(e[r])e[r].push(i);else{var o,l;if(void 0!==a)for(var u=document.getElementsByTagName("script"),c=0;c<u.length;c++){var d=u[c];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==t+a){o=d;break}}o||(l=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,n.nc&&o.setAttribute("nonce",n.nc),o.setAttribute("data-webpack",t+a),o.src=r),e[r]=[i];var h=(t,n)=>{o.onerror=o.onload=null,clearTimeout(f);var i=e[r];if(delete e[r],o.parentNode&&o.parentNode.removeChild(o),i&&i.forEach((e=>e(n))),t)return t(n)},f=setTimeout(h.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=h.bind(null,o.onerror),o.onload=h.bind(null,o.onload),l&&document.head.appendChild(o)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/trading-games/",(()=>{var e={792:0};n.f.j=(t,r)=>{var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var a=new Promise(((n,r)=>i=e[t]=[n,r]));r.push(i[2]=a);var s=n.p+n.u(t),o=new Error;n.l(s,(r=>{if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var a=r&&("load"===r.type?"missing":r.type),s=r&&r.target&&r.target.src;o.message="Loading chunk "+t+" failed.\n("+a+": "+s+")",o.name="ChunkLoadError",o.type=a,o.request=s,i[1](o)}}),"chunk-"+t,t)}};var t=(t,r)=>{var i,a,s=r[0],o=r[1],l=r[2],u=0;if(s.some((t=>0!==e[t]))){for(i in o)n.o(o,i)&&(n.m[i]=o[i]);if(l)l(n)}for(t&&t(r);u<s.length;u++)a=s[u],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0},r=self.webpackChunktrading_games=self.webpackChunktrading_games||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var r,i=n(43),a=n.t(i,2),s=n(391),o=n(950),l=n.t(o,2);function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(r||(r={}));const c="popstate";function d(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function h(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function f(e,t){return{usr:e.state,key:e.key,idx:t}}function p(e,t,n,r){return void 0===n&&(n=null),u({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?g(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function m(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function g(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function y(e,t,n,i){void 0===i&&(i={});let{window:a=document.defaultView,v5Compat:s=!1}=i,o=a.history,l=r.Pop,h=null,g=y();function y(){return(o.state||{idx:null}).idx}function v(){l=r.Pop;let e=y(),t=null==e?null:e-g;g=e,h&&h({action:l,location:b.location,delta:t})}function _(e){let t="null"!==a.location.origin?a.location.origin:a.location.href,n="string"===typeof e?e:m(e);return n=n.replace(/ $/,"%20"),d(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==g&&(g=0,o.replaceState(u({},o.state,{idx:g}),""));let b={get action(){return l},get location(){return e(a,o)},listen(e){if(h)throw new Error("A history only accepts one active listener");return a.addEventListener(c,v),h=e,()=>{a.removeEventListener(c,v),h=null}},createHref:e=>t(a,e),createURL:_,encodeLocation(e){let t=_(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){l=r.Push;let i=p(b.location,e,t);n&&n(i,e),g=y()+1;let u=f(i,g),c=b.createHref(i);try{o.pushState(u,"",c)}catch(Gn){if(Gn instanceof DOMException&&"DataCloneError"===Gn.name)throw Gn;a.location.assign(c)}s&&h&&h({action:l,location:b.location,delta:1})},replace:function(e,t){l=r.Replace;let i=p(b.location,e,t);n&&n(i,e),g=y();let a=f(i,g),u=b.createHref(i);o.replaceState(a,"",u),s&&h&&h({action:l,location:b.location,delta:0})},go:e=>o.go(e)};return b}var v;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(v||(v={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function _(e,t,n){return void 0===n&&(n="/"),b(e,t,n,!1)}function b(e,t,n,r){let i=A(("string"===typeof t?g(t):t).pathname||"/",n);if(null==i)return null;let a=w(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(a);let s=null;for(let o=0;null==s&&o<a.length;++o){let e=D(i);s=R(a[o],e,r)}return s}function w(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let i=(e,i,a)=>{let s={relativePath:void 0===a?e.path||"":a,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};s.relativePath.startsWith("/")&&(d(s.relativePath.startsWith(r),'Absolute route path "'+s.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),s.relativePath=s.relativePath.slice(r.length));let o=$([r,s.relativePath]),l=n.concat(s);e.children&&e.children.length>0&&(d(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+o+'".'),w(e.children,t,l,o)),(null!=e.path||e.index)&&t.push({path:o,score:P(o,e.index),routesMeta:l})};return e.forEach(((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of C(e.path))i(e,t,r);else i(e,t)})),t}function C(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),a=n.replace(/\?$/,"");if(0===r.length)return i?[a,""]:[a];let s=C(r.join("/")),o=[];return o.push(...s.map((e=>""===e?a:[a,e].join("/")))),i&&o.push(...s),o.map((t=>e.startsWith("/")&&""===t?"/":t))}const k=/^:[\w-]+$/,S=3,E=2,x=1,N=10,T=-2,I=e=>"*"===e;function P(e,t){let n=e.split("/"),r=n.length;return n.some(I)&&(r+=T),t&&(r+=E),n.filter((e=>!I(e))).reduce(((e,t)=>e+(k.test(t)?S:""===t?x:N)),r)}function R(e,t,n){void 0===n&&(n=!1);let{routesMeta:r}=e,i={},a="/",s=[];for(let o=0;o<r.length;++o){let e=r[o],l=o===r.length-1,u="/"===a?t:t.slice(a.length)||"/",c=j({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},u),d=e.route;if(!c&&l&&n&&!r[r.length-1].route.index&&(c=j({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},u)),!c)return null;Object.assign(i,c.params),s.push({params:i,pathname:$([a,c.pathname]),pathnameBase:z($([a,c.pathnameBase])),route:d}),"/"!==c.pathnameBase&&(a=$([a,c.pathnameBase]))}return s}function j(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);h("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");let a=new RegExp(i,t?void 0:"i");return[a,r]}(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let a=i[0],s=a.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:r.reduce(((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=o[n]||"";s=a.slice(0,a.length-e.length).replace(/(.)\/+$/,"$1")}const l=o[n];return e[r]=i&&!l?void 0:(l||"").replace(/%2F/g,"/"),e}),{}),pathname:a,pathnameBase:s,pattern:e}}function D(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(Gn){return h(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+Gn+")."),e}}function A(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function O(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function L(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function M(e,t){let n=L(e);return t?n.map(((e,t)=>t===n.length-1?e.pathname:e.pathnameBase)):n.map((e=>e.pathnameBase))}function F(e,t,n,r){let i;void 0===r&&(r=!1),"string"===typeof e?i=g(e):(i=u({},e),d(!i.pathname||!i.pathname.includes("?"),O("?","pathname","search",i)),d(!i.pathname||!i.pathname.includes("#"),O("#","pathname","hash",i)),d(!i.search||!i.search.includes("#"),O("#","search","hash",i)));let a,s=""===e||""===i.pathname,o=s?"/":i.pathname;if(null==o)a=n;else{let e=t.length-1;if(!r&&o.startsWith("..")){let t=o.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}a=e>=0?t[e]:"/"}let l=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:i=""}="string"===typeof e?g(e):e,a=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:a,search:U(r),hash:B(i)}}(i,a),c=o&&"/"!==o&&o.endsWith("/"),h=(s||"."===o)&&n.endsWith("/");return l.pathname.endsWith("/")||!c&&!h||(l.pathname+="/"),l}const $=e=>e.join("/").replace(/\/\/+/g,"/"),z=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),U=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",B=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function W(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const q=["post","put","patch","delete"],H=(new Set(q),["get",...q]);new Set(H),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function V(){return V=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},V.apply(this,arguments)}const Q=i.createContext(null);const K=i.createContext(null);const Y=i.createContext(null);const G=i.createContext(null);const J=i.createContext({outlet:null,matches:[],isDataRoute:!1});const X=i.createContext(null);function Z(){return null!=i.useContext(G)}function ee(){return Z()||d(!1),i.useContext(G).location}function te(e){i.useContext(Y).static||i.useLayoutEffect(e)}function ne(){let{isDataRoute:e}=i.useContext(J);return e?function(){let{router:e}=de(ue.UseNavigateStable),t=fe(ce.UseNavigateStable),n=i.useRef(!1);return te((()=>{n.current=!0})),i.useCallback((function(r,i){void 0===i&&(i={}),n.current&&("number"===typeof r?e.navigate(r):e.navigate(r,V({fromRouteId:t},i)))}),[e,t])}():function(){Z()||d(!1);let e=i.useContext(Q),{basename:t,future:n,navigator:r}=i.useContext(Y),{matches:a}=i.useContext(J),{pathname:s}=ee(),o=JSON.stringify(M(a,n.v7_relativeSplatPath)),l=i.useRef(!1);return te((()=>{l.current=!0})),i.useCallback((function(n,i){if(void 0===i&&(i={}),!l.current)return;if("number"===typeof n)return void r.go(n);let a=F(n,JSON.parse(o),s,"path"===i.relative);null==e&&"/"!==t&&(a.pathname="/"===a.pathname?t:$([t,a.pathname])),(i.replace?r.replace:r.push)(a,i.state,i)}),[t,r,o,s,e])}()}function re(e,t,n,a){Z()||d(!1);let{navigator:s}=i.useContext(Y),{matches:o}=i.useContext(J),l=o[o.length-1],u=l?l.params:{},c=(l&&l.pathname,l?l.pathnameBase:"/");l&&l.route;let h,f=ee();if(t){var p;let e="string"===typeof t?g(t):t;"/"===c||(null==(p=e.pathname)?void 0:p.startsWith(c))||d(!1),h=e}else h=f;let m=h.pathname||"/",y=m;if("/"!==c){let e=c.replace(/^\//,"").split("/");y="/"+m.replace(/^\//,"").split("/").slice(e.length).join("/")}let v=_(e,{pathname:y});let b=le(v&&v.map((e=>Object.assign({},e,{params:Object.assign({},u,e.params),pathname:$([c,s.encodeLocation?s.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?c:$([c,s.encodeLocation?s.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),o,n,a);return t&&b?i.createElement(G.Provider,{value:{location:V({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:r.Pop}},b):b}function ie(){let e=function(){var e;let t=i.useContext(X),n=he(ce.UseRouteError),r=fe(ce.UseRouteError);if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[r]}(),t=W(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:r};return i.createElement(i.Fragment,null,i.createElement("h2",null,"Unexpected Application Error!"),i.createElement("h3",{style:{fontStyle:"italic"}},t),n?i.createElement("pre",{style:a},n):null,null)}const ae=i.createElement(ie,null);class se extends i.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?i.createElement(J.Provider,{value:this.props.routeContext},i.createElement(X.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function oe(e){let{routeContext:t,match:n,children:r}=e,a=i.useContext(Q);return a&&a.static&&a.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=n.route.id),i.createElement(J.Provider,{value:t},r)}function le(e,t,n,r){var a;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===r&&(r=null),null==e){var s;if(!n)return null;if(n.errors)e=n.matches;else{if(!(null!=(s=r)&&s.v7_partialHydration&&0===t.length&&!n.initialized&&n.matches.length>0))return null;e=n.matches}}let o=e,l=null==(a=n)?void 0:a.errors;if(null!=l){let e=o.findIndex((e=>e.route.id&&void 0!==(null==l?void 0:l[e.route.id])));e>=0||d(!1),o=o.slice(0,Math.min(o.length,e+1))}let u=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let i=0;i<o.length;i++){let e=o[i];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(c=i),e.route.id){let{loaderData:t,errors:r}=n,i=e.route.loader&&void 0===t[e.route.id]&&(!r||void 0===r[e.route.id]);if(e.route.lazy||i){u=!0,o=c>=0?o.slice(0,c+1):[o[0]];break}}}return o.reduceRight(((e,r,a)=>{let s,d=!1,h=null,f=null;var p;n&&(s=l&&r.route.id?l[r.route.id]:void 0,h=r.route.errorElement||ae,u&&(c<0&&0===a?(p="route-fallback",!1||pe[p]||(pe[p]=!0),d=!0,f=null):c===a&&(d=!0,f=r.route.hydrateFallbackElement||null)));let m=t.concat(o.slice(0,a+1)),g=()=>{let t;return t=s?h:d?f:r.route.Component?i.createElement(r.route.Component,null):r.route.element?r.route.element:e,i.createElement(oe,{match:r,routeContext:{outlet:e,matches:m,isDataRoute:null!=n},children:t})};return n&&(r.route.ErrorBoundary||r.route.errorElement||0===a)?i.createElement(se,{location:n.location,revalidation:n.revalidation,component:h,error:s,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):g()}),null)}var ue=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(ue||{}),ce=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(ce||{});function de(e){let t=i.useContext(Q);return t||d(!1),t}function he(e){let t=i.useContext(K);return t||d(!1),t}function fe(e){let t=function(){let e=i.useContext(J);return e||d(!1),e}(),n=t.matches[t.matches.length-1];return n.route.id||d(!1),n.route.id}const pe={};a.startTransition;function me(e){d(!1)}function ge(e){let{basename:t="/",children:n=null,location:a,navigationType:s=r.Pop,navigator:o,static:l=!1,future:u}=e;Z()&&d(!1);let c=t.replace(/^\/*/,"/"),h=i.useMemo((()=>({basename:c,navigator:o,static:l,future:V({v7_relativeSplatPath:!1},u)})),[c,u,o,l]);"string"===typeof a&&(a=g(a));let{pathname:f="/",search:p="",hash:m="",state:y=null,key:v="default"}=a,_=i.useMemo((()=>{let e=A(f,c);return null==e?null:{location:{pathname:e,search:p,hash:m,state:y,key:v},navigationType:s}}),[c,f,p,m,y,v,s]);return null==_?null:i.createElement(Y.Provider,{value:h},i.createElement(G.Provider,{children:n,value:_}))}function ye(e){let{children:t,location:n}=e;return re(ve(t),n)}new Promise((()=>{}));i.Component;function ve(e,t){void 0===t&&(t=[]);let n=[];return i.Children.forEach(e,((e,r)=>{if(!i.isValidElement(e))return;let a=[...t,r];if(e.type===i.Fragment)return void n.push.apply(n,ve(e.props.children,a));e.type!==me&&d(!1),e.props.index&&e.props.children&&d(!1);let s={id:e.props.id||a.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(s.children=ve(e.props.children,a)),n.push(s)})),n}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);try{window.__reactRouterVersion="6"}catch(Sl){}new Map;const _e=a.startTransition;l.flushSync,a.useId;function be(e){let{basename:t,children:n,future:r,window:a}=e,s=i.useRef();var o;null==s.current&&(s.current=(void 0===(o={window:a,v5Compat:!0})&&(o={}),y((function(e,t){let{pathname:n="/",search:r="",hash:i=""}=g(e.location.hash.substr(1));return n.startsWith("/")||n.startsWith(".")||(n="/"+n),p("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){let n=e.document.querySelector("base"),r="";if(n&&n.getAttribute("href")){let t=e.location.href,n=t.indexOf("#");r=-1===n?t:t.slice(0,n)}return r+"#"+("string"===typeof t?t:m(t))}),(function(e,t){h("/"===e.pathname.charAt(0),"relative pathnames are not supported in hash history.push("+JSON.stringify(t)+")")}),o)));let l=s.current,[u,c]=i.useState({action:l.action,location:l.location}),{v7_startTransition:d}=r||{},f=i.useCallback((e=>{d&&_e?_e((()=>c(e))):c(e)}),[c,d]);return i.useLayoutEffect((()=>l.listen(f)),[l,f]),i.createElement(ge,{basename:t,children:n,location:u.location,navigationType:u.action,navigator:l,future:r})}"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;var we,Ce;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(we||(we={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Ce||(Ce={}));const ke=!1,Se=!1,Ee="${JSCORE_VERSION}",xe=function(e,t){if(!e)throw Ne(t)},Ne=function(e){return new Error("Firebase Database ("+Ee+") INTERNAL ASSERT FAILED: "+e)},Te=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Ie={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],a=i+1<e.length,s=a?e[i+1]:0,o=i+2<e.length,l=o?e[i+2]:0,u=t>>2,c=(3&t)<<4|s>>4;let d=(15&s)<<2|l>>6,h=63&l;o||(h=64,a||(d=64)),r.push(n[u],n[c],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Te(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){const a=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(a>>10)),t[r++]=String.fromCharCode(56320+(1023&a))}else{const a=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&a)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0;++i;const s=i<e.length?n[e.charAt(i)]:64;++i;const o=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==a||null==s||null==o)throw new Pe;const l=t<<2|a>>4;if(r.push(l),64!==s){const e=a<<4&240|s>>2;if(r.push(e),64!==o){const e=s<<6&192|o;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Pe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Re=function(e){const t=Te(e);return Ie.encodeByteArray(t,!0)},je=function(e){return Re(e).replace(/\./g,"")},De=function(e){try{return Ie.decodeString(e,!0)}catch(Sl){console.error("base64Decode failed: ",Sl)}return null};function Ae(e){return Oe(void 0,e)}function Oe(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=Oe(e[n],t[n]));return e}const Le=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,Me=()=>{try{return Le()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"/trading-games",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"your_api_key_here",REACT_APP_FIREBASE_AUTH_DOMAIN:"your_auth_domain",REACT_APP_FIREBASE_PROJECT_ID:"your_project_id",REACT_APP_FIREBASE_STORAGE_BUCKET:"your_storage_bucket",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"your_sender_id",REACT_APP_FIREBASE_APP_ID:"your_app_id",REACT_APP_FIREBASE_MEASUREMENT_ID:"your_measurement_id",REACT_APP_FIREBASE_DATABASE_URL:"your_database_url"}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(Sl){return}const t=e&&De(e[1]);return t&&JSON.parse(t)})()}catch(Sl){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${Sl}`)}},Fe=e=>{const t=(e=>{var t,n;return null===(n=null===(t=Me())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]})(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},$e=()=>{var e;return null===(e=Me())||void 0===e?void 0:e.config};class ze{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function Ue(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Be(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ue())}function We(){return!0===ke||!0===Se}class qe extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,qe.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,He.prototype.create)}}class He{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n=`${this.service}/${e}`,r=this.errors[e],i=r?function(e,t){return e.replace(Ve,((e,n)=>{const r=t[n];return null!=r?String(r):`<${n}?>`}))}(r,t):"Error",a=`${this.serviceName}: ${i} (${n}).`;return new qe(n,a,t)}}const Ve=/\{\$([^}]+)}/g;function Qe(e){return JSON.parse(e)}function Ke(e){return JSON.stringify(e)}const Ye=function(e){let t={},n={},r={},i="";try{const a=e.split(".");t=Qe(De(a[0])||""),n=Qe(De(a[1])||""),i=a[2],r=n.d||{},delete n.d}catch(Sl){}return{header:t,claims:n,data:r,signature:i}};function Ge(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Je(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function Xe(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Ze(e,t,n){const r={};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function et(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],a=t[i];if(tt(n)&&tt(a)){if(!et(n,a))return!1}else if(n!==a)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function tt(e){return null!==e&&"object"===typeof e}class nt{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const n=this.W_;if("string"===typeof e)for(let c=0;c<16;c++)n[c]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let c=0;c<16;c++)n[c]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let c=16;c<80;c++){const e=n[c-3]^n[c-8]^n[c-14]^n[c-16];n[c]=4294967295&(e<<1|e>>>31)}let r,i,a=this.chain_[0],s=this.chain_[1],o=this.chain_[2],l=this.chain_[3],u=this.chain_[4];for(let c=0;c<80;c++){c<40?c<20?(r=l^s&(o^l),i=1518500249):(r=s^o^l,i=1859775393):c<60?(r=s&o|l&(s|o),i=2400959708):(r=s^o^l,i=3395469782);const e=(a<<5|a>>>27)+r+u+i+n[c]&4294967295;u=l,l=o,o=4294967295&(s<<30|s>>>2),s=a,a=e}this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+u&4294967295}update(e,t){if(null==e)return;void 0===t&&(t=e.length);const n=t-this.blockSize;let r=0;const i=this.buf_;let a=this.inbuf_;for(;r<t;){if(0===a)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[a]=e.charCodeAt(r),++a,++r,a===this.blockSize){this.compress_(i),a=0;break}}else for(;r<t;)if(i[a]=e[r],++a,++r,a===this.blockSize){this.compress_(i),a=0;break}}this.inbuf_=a,this.total_+=t}digest(){const e=[];let t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=255&t,t/=256;this.compress_(this.buf_);let n=0;for(let r=0;r<5;r++)for(let t=24;t>=0;t-=8)e[n]=this.chain_[r]>>t&255,++n;return e}}function rt(e,t){return`${e} failed: ${t} argument `}const it=function(e){let t=0;for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};function at(e){return e&&e._delegate?e._delegate:e}class st{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const ot="[DEFAULT]";class lt{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new ze;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(Sl){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(Sl){if(r)return null;throw Sl}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:ot})}catch(Sl){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(Sl){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ot;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ot;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ot;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,a]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&a.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const a=this.instances.get(r);return a&&e(a,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===ot?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(a){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ot;return this.component?this.component.multipleInstances?e:ot:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ut{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new lt(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const ct=[];var dt;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(dt||(dt={}));const ht={debug:dt.DEBUG,verbose:dt.VERBOSE,info:dt.INFO,warn:dt.WARN,error:dt.ERROR,silent:dt.SILENT},ft=dt.INFO,pt={[dt.DEBUG]:"log",[dt.VERBOSE]:"log",[dt.INFO]:"info",[dt.WARN]:"warn",[dt.ERROR]:"error"},mt=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=pt[t];if(!r)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);for(var i=arguments.length,a=new Array(i>2?i-2:0),s=2;s<i;s++)a[s-2]=arguments[s];console[r](`[${n}]  ${e.name}:`,...a)};class gt{constructor(e){this.name=e,this._logLevel=ft,this._logHandler=mt,this._userLogHandler=null,ct.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in dt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?ht[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,dt.DEBUG,...t),this._logHandler(this,dt.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,dt.VERBOSE,...t),this._logHandler(this,dt.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,dt.INFO,...t),this._logHandler(this,dt.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,dt.WARN,...t),this._logHandler(this,dt.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,dt.ERROR,...t),this._logHandler(this,dt.ERROR,...t)}}let yt,vt;const _t=new WeakMap,bt=new WeakMap,wt=new WeakMap,Ct=new WeakMap,kt=new WeakMap;let St={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return bt.get(e);if("objectStoreNames"===t)return e.objectStoreNames||wt.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Nt(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Et(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(vt||(vt=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Tt(this),n),Nt(_t.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Nt(e.apply(Tt(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const a=e.call(Tt(this),t,...r);return wt.set(a,t.sort?t.sort():[t]),Nt(a)}}function xt(e){return"function"===typeof e?Et(e):(e instanceof IDBTransaction&&function(e){if(bt.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=()=>{t(),r()},a=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));bt.set(e,t)}(e),t=e,(yt||(yt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((e=>t instanceof e))?new Proxy(e,St):e);var t}function Nt(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",a)},i=()=>{t(Nt(e.result)),r()},a=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((t=>{t instanceof IDBCursor&&_t.set(t,e)})).catch((()=>{})),kt.set(t,e),t}(e);if(Ct.has(e))return Ct.get(e);const t=xt(e);return t!==e&&(Ct.set(e,t),kt.set(t,e)),t}const Tt=e=>kt.get(e);const It=["get","getKey","getAll","getAllKeys","count"],Pt=["put","add","delete","clear"],Rt=new Map;function jt(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(Rt.get(t))return Rt.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=Pt.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!It.includes(n))return;const a=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let a=t.store;for(var s=arguments.length,o=new Array(s>1?s-1:0),l=1;l<s;l++)o[l-1]=arguments[l];return r&&(a=a.index(o.shift())),(await Promise.all([a[n](...o),i&&t.done]))[0]};return Rt.set(t,a),a}St=(e=>({...e,get:(t,n,r)=>jt(t,n)||e.get(t,n,r),has:(t,n)=>!!jt(t,n)||e.has(t,n)}))(St);class Dt{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null})).filter((e=>e)).join(" ")}}const At="@firebase/app",Ot="0.10.15",Lt=new gt("@firebase/app"),Mt="@firebase/app-compat",Ft="@firebase/analytics-compat",$t="@firebase/analytics",zt="@firebase/app-check-compat",Ut="@firebase/app-check",Bt="@firebase/auth",Wt="@firebase/auth-compat",qt="@firebase/database",Ht="@firebase/data-connect",Vt="@firebase/database-compat",Qt="@firebase/functions",Kt="@firebase/functions-compat",Yt="@firebase/installations",Gt="@firebase/installations-compat",Jt="@firebase/messaging",Xt="@firebase/messaging-compat",Zt="@firebase/performance",en="@firebase/performance-compat",tn="@firebase/remote-config",nn="@firebase/remote-config-compat",rn="@firebase/storage",an="@firebase/storage-compat",sn="@firebase/firestore",on="@firebase/vertexai",ln="@firebase/firestore-compat",un="firebase",cn="[DEFAULT]",dn={[At]:"fire-core",[Mt]:"fire-core-compat",[$t]:"fire-analytics",[Ft]:"fire-analytics-compat",[Ut]:"fire-app-check",[zt]:"fire-app-check-compat",[Bt]:"fire-auth",[Wt]:"fire-auth-compat",[qt]:"fire-rtdb",[Ht]:"fire-data-connect",[Vt]:"fire-rtdb-compat",[Qt]:"fire-fn",[Kt]:"fire-fn-compat",[Yt]:"fire-iid",[Gt]:"fire-iid-compat",[Jt]:"fire-fcm",[Xt]:"fire-fcm-compat",[Zt]:"fire-perf",[en]:"fire-perf-compat",[tn]:"fire-rc",[nn]:"fire-rc-compat",[rn]:"fire-gcs",[an]:"fire-gcs-compat",[sn]:"fire-fst",[ln]:"fire-fst-compat",[on]:"fire-vertex","fire-js":"fire-js",[un]:"fire-js-all"},hn=new Map,fn=new Map,pn=new Map;function mn(e,t){try{e.container.addComponent(t)}catch(Sl){Lt.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,Sl)}}function gn(e){const t=e.name;if(pn.has(t))return Lt.debug(`There were multiple attempts to register component ${t}.`),!1;pn.set(t,e);for(const n of hn.values())mn(n,e);for(const n of fn.values())mn(n,e);return!0}function yn(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}const vn=new He("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class _n{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new st("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw vn.create("app-deleted",{appName:this._name})}}function bn(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:cn,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw vn.create("bad-app-name",{appName:String(i)});if(n||(n=$e()),!n)throw vn.create("no-options");const a=hn.get(i);if(a){if(et(n,a.options)&&et(r,a.config))return a;throw vn.create("duplicate-app",{appName:i})}const s=new ut(i);for(const l of pn.values())s.addComponent(l);const o=new _n(n,r,s);return hn.set(i,o),o}function wn(e,t,n){var r;let i=null!==(r=dn[e])&&void 0!==r?r:e;n&&(i+=`-${n}`);const a=i.match(/\s|\//),s=t.match(/\s|\//);if(a||s){const e=[`Unable to register library "${i}" with version "${t}":`];return a&&e.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&s&&e.push("and"),s&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void Lt.warn(e.join(" "))}gn(new st(`${i}-version`,(()=>({library:i,version:t})),"VERSION"))}const Cn="firebase-heartbeat-store";let kn=null;function Sn(){return kn||(kn=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=indexedDB.open(e,t),o=Nt(s);return r&&s.addEventListener("upgradeneeded",(e=>{r(Nt(s.result),e.oldVersion,e.newVersion,Nt(s.transaction),e)})),n&&s.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),o.then((e=>{a&&e.addEventListener("close",(()=>a())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),o}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(Cn)}catch(Sl){console.warn(Sl)}}}).catch((e=>{throw vn.create("idb-open",{originalErrorMessage:e.message})}))),kn}async function En(e,t){try{const n=(await Sn()).transaction(Cn,"readwrite"),r=n.objectStore(Cn);await r.put(t,xn(e)),await n.done}catch(Sl){if(Sl instanceof qe)Lt.warn(Sl.message);else{const t=vn.create("idb-set",{originalErrorMessage:null===Sl||void 0===Sl?void 0:Sl.message});Lt.warn(t.message)}}}function xn(e){return`${e.name}!${e.options.appId}`}class Nn{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new In(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Tn();if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some((e=>e.date===r)))return;return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}catch(Sl){Lt.warn(Sl)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=Tn(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),Pn(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Pn(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=je(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(Sl){return Lt.warn(Sl),""}}}function Tn(){return(new Date).toISOString().substring(0,10)}class In{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!function(){try{return"object"===typeof indexedDB}catch(Sl){return!1}}()&&new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(Gn){t(Gn)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await Sn()).transaction(Cn),n=await t.objectStore(Cn).get(xn(e));return await t.done,n}catch(Sl){if(Sl instanceof qe)Lt.warn(Sl.message);else{const t=vn.create("idb-get",{originalErrorMessage:null===Sl||void 0===Sl?void 0:Sl.message});Lt.warn(t.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return En(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return En(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Pn(e){return je(JSON.stringify({version:2,heartbeats:e})).length}var Rn;Rn="",gn(new st("platform-logger",(e=>new Dt(e)),"PRIVATE")),gn(new st("heartbeat",(e=>new Nn(e)),"PRIVATE")),wn(At,Ot,Rn),wn(At,Ot,"esm2017"),wn("fire-js","");const jn="@firebase/database",Dn="1.0.9";let An="";function On(e){An=e}class Ln{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Ke(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:Qe(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class Mn{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return Ge(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const Fn=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){const t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new Ln(t)}}catch(Sl){}return new Mn},$n=Fn("localStorage"),zn=Fn("sessionStorage"),Un=new gt("@firebase/database"),Bn=function(){let e=1;return function(){return e++}}(),Wn=function(e){const t=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);if(i>=55296&&i<=56319){const t=i-55296;r++,xe(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(t<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t}(e),n=new nt;n.update(t);const r=n.digest();return Ie.encodeByteArray(r)},qn=function(){let e="";for(let t=0;t<arguments.length;t++){const n=t<0||arguments.length<=t?void 0:arguments[t];Array.isArray(n)||n&&"object"===typeof n&&"number"===typeof n.length?e+=qn.apply(null,n):e+="object"===typeof n?Ke(n):n,e+=" "}return e};let Hn=null,Vn=!0;const Qn=function(e,t){xe(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(Un.logLevel=dt.VERBOSE,Hn=Un.log.bind(Un),t&&zn.set("logging_enabled",!0)):"function"===typeof e?Hn=e:(Hn=null,zn.remove("logging_enabled"))},Kn=function(){if(!0===Vn&&(Vn=!1,null===Hn&&!0===zn.get("logging_enabled")&&Qn(!0)),Hn){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=qn.apply(null,t);Hn(r)}},Yn=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Kn(e,...n)}},Gn=function(){const e="FIREBASE INTERNAL ERROR: "+qn(...arguments);Un.error(e)},Jn=function(){const e=`FIREBASE FATAL ERROR: ${qn(...arguments)}`;throw Un.error(e),new Error(e)},Xn=function(){const e="FIREBASE WARNING: "+qn(...arguments);Un.warn(e)},Zn=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},er="[MIN_NAME]",tr="[MAX_NAME]",nr=function(e,t){if(e===t)return 0;if(e===er||t===tr)return-1;if(t===er||e===tr)return 1;{const n=cr(e),r=cr(t);return null!==n?null!==r?n-r===0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1}},rr=function(e,t){return e===t?0:e<t?-1:1},ir=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+Ke(t))},ar=function(e){if("object"!==typeof e||null===e)return Ke(e);const t=[];for(const r in e)t.push(r);t.sort();let n="{";for(let r=0;r<t.length;r++)0!==r&&(n+=","),n+=Ke(t[r]),n+=":",n+=ar(e[t[r]]);return n+="}",n},sr=function(e,t){const n=e.length;if(n<=t)return[e];const r=[];for(let i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function or(e,t){for(const n in e)e.hasOwnProperty(n)&&t(n,e[n])}const lr=function(e){xe(!Zn(e),"Invalid JSON number");const t=1023;let n,r,i,a,s;0===e?(r=0,i=0,n=1/e===-1/0?1:0):(n=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(a=Math.min(Math.floor(Math.log(e)/Math.LN2),t),r=a+t,i=Math.round(e*Math.pow(2,52-a)-Math.pow(2,52))):(r=0,i=Math.round(e/Math.pow(2,-1074))));const o=[];for(s=52;s;s-=1)o.push(i%2?1:0),i=Math.floor(i/2);for(s=11;s;s-=1)o.push(r%2?1:0),r=Math.floor(r/2);o.push(n?1:0),o.reverse();const l=o.join("");let u="";for(s=0;s<64;s+=8){let e=parseInt(l.substr(s,8),2).toString(16);1===e.length&&(e="0"+e),u+=e}return u.toLowerCase()};const ur=new RegExp("^-?(0*)\\d{1,10}$"),cr=function(e){if(ur.test(e)){const t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},dr=function(e){try{e()}catch(Sl){setTimeout((()=>{const t=Sl.stack||"";throw Xn("Exception was thrown by user callback.",t),Sl}),Math.floor(0))}},hr=function(e,t){const n=setTimeout(e,t);return"number"===typeof n&&"undefined"!==typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(n):"object"===typeof n&&n.unref&&n.unref(),n};class fr{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null===t||void 0===t?void 0:t.getImmediate({optional:!0}),this.appCheck||null===t||void 0===t||t.get().then((e=>this.appCheck=e))}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise(((t,n)=>{setTimeout((()=>{this.appCheck?this.getToken(e).then(t,n):t(null)}),0)}))}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((t=>t.addTokenListener(e)))}notifyForInvalidToken(){Xn(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class pr{constructor(e,t,n){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit((e=>this.auth_=e))}getToken(e){return this.auth_?this.auth_.getToken(e).catch((e=>e&&"auth/token-not-initialized"===e.code?(Kn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e))):new Promise(((t,n)=>{setTimeout((()=>{this.auth_?this.getToken(e).then(t,n):t(null)}),0)}))}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((t=>t.addAuthTokenListener(e)))}removeTokenChangeListener(e){this.authProvider_.get().then((t=>t.removeAuthTokenListener(e)))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Xn(e)}}class mr{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}mr.OWNER="owner";const gr="5",yr=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,vr="ac",_r="websocket",br="long_polling";class wr{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",s=arguments.length>6&&void 0!==arguments[6]&&arguments[6],o=arguments.length>7&&void 0!==arguments[7]&&arguments[7];this.secure=t,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=a,this.includeNamespaceInQueryParams=s,this.isUsingEmulator=o,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=$n.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&$n.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}}function Cr(e,t,n){let r;if(xe("string"===typeof t,"typeof type must == string"),xe("object"===typeof n,"typeof params must == object"),t===_r)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==br)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);const i=[];return or(n,((e,t)=>{i.push(e+"="+t)})),r+i.join("&")}class kr{constructor(){this.counters_={}}incrementCounter(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;Ge(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return Ae(this.counters_)}}const Sr={},Er={};function xr(e){const t=e.toString();return Sr[t]||(Sr[t]=new kr),Sr[t]}class Nr{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const e=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let t=0;t<e.length;++t)e[t]&&dr((()=>{this.onMessage_(e[t])}));if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}const Tr="start";class Ir{constructor(e,t,n,r,i,a,s){this.connId=e,this.repoInfo=t,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.transportSessionId=a,this.lastSessionId=s,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Yn(e),this.stats_=xr(t),this.urlFn=e=>(this.appCheckToken&&(e[vr]=this.appCheckToken),Cr(t,br,e))}open(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new Nr(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if(We()||"complete"===document.readyState)e();else{let t=!1;const n=function(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(()=>{"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((()=>{if(this.isClosed_)return;this.scriptTagHolder=new Pr((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const[i,a,s,o,l]=t;if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===Tr)n.id=a,n.password=s;else{if("close"!==i)throw new Error("Unrecognized command received: "+i);a?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(a,(()=>{n.onClosed_()}))):n.onClosed_()}}),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const[i,a]=t;n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,a)}),(()=>{this.onClosed_()}),this.urlFn);const e={};e[Tr]="t",e.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=this.scriptTagHolder.uniqueCallbackIdentifier),e.v=gr,this.transportSessionId&&(e.s=this.transportSessionId),this.lastSessionId&&(e.ls=this.lastSessionId),this.applicationId&&(e.p=this.applicationId),this.appCheckToken&&(e[vr]=this.appCheckToken),"undefined"!==typeof location&&location.hostname&&yr.test(location.hostname)&&(e.r="f");const t=this.urlFn(e);this.log_("Connecting via long-poll to "+t),this.scriptTagHolder.addTag(t,(()=>{}))}))}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Ir.forceAllow_=!0}static forceDisallow(){Ir.forceDisallow_=!0}static isAvailable(){return!We()&&(!!Ir.forceAllow_||!Ir.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=Ke(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=Re(t),r=sr(n,1840);for(let i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if(We())return;this.myDisconnFrame=document.createElement("iframe");const n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=Ke(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class Pr{constructor(e,t,n,r){if(this.onDisconnect=n,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,We())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=Bn(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=Pr.createIFrame_();let n="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)){n='<script>document.domain="'+document.domain+'";<\/script>'}const r="<html><body>"+n+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(r),this.myIFrame.doc.close()}catch(Sl){Kn("frame writing exception"),Sl.stack&&Kn(Sl.stack),Kn(Sl)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Kn("No IE domain setting required")}catch(Sl){const n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout((()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)}),Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),n="",r=0;for(;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;{const e=this.pendingSegs.shift();n=n+"&seg"+r+"="+e.seg+"&ts"+r+"="+e.ts+"&d"+r+"="+e.d,r++}}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const n=()=>{this.outstandingRequests.delete(t),this.newRequest_()},r=setTimeout(n,Math.floor(25e3));this.addTag(e,(()=>{clearTimeout(r),n()}))}addTag(e,t){We()?this.doNodeLongPoll(e,t):setTimeout((()=>{try{if(!this.sendNewPolls)return;const n=this.myIFrame.doc.createElement("script");n.type="text/javascript",n.async=!0,n.src=e,n.onload=n.onreadystatechange=function(){const e=n.readyState;e&&"loaded"!==e&&"complete"!==e||(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),t())},n.onerror=()=>{Kn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(n)}catch(Sl){}}),Math.floor(1))}}let Rr=null;"undefined"!==typeof MozWebSocket?Rr=MozWebSocket:"undefined"!==typeof WebSocket&&(Rr=WebSocket);class jr{constructor(e,t,n,r,i,a,s){this.connId=e,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Yn(this.connId),this.stats_=xr(t),this.connURL=jr.connectionURL_(t,a,s,r,n),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,n,r,i){const a={};return a.v=gr,!We()&&"undefined"!==typeof location&&location.hostname&&yr.test(location.hostname)&&(a.r="f"),t&&(a.s=t),n&&(a.ls=n),r&&(a[vr]=r),i&&(a.p=i),Cr(e,_r,a)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,$n.set("previous_websocket_failure",!0);try{let e;if(We()){const t=this.nodeAdmin?"AdminNode":"Node";e={headers:{"User-Agent":`Firebase/${gr}/${An}/${process.platform}/${t}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(e.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(e.headers["X-Firebase-AppCheck"]=this.appCheckToken);const n={NODE_ENV:"production",PUBLIC_URL:"/trading-games",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"your_api_key_here",REACT_APP_FIREBASE_AUTH_DOMAIN:"your_auth_domain",REACT_APP_FIREBASE_PROJECT_ID:"your_project_id",REACT_APP_FIREBASE_STORAGE_BUCKET:"your_storage_bucket",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"your_sender_id",REACT_APP_FIREBASE_APP_ID:"your_app_id",REACT_APP_FIREBASE_MEASUREMENT_ID:"your_measurement_id",REACT_APP_FIREBASE_DATABASE_URL:"your_database_url"},r=0===this.connURL.indexOf("wss://")?n.HTTPS_PROXY||n.https_proxy:n.HTTP_PROXY||n.http_proxy;r&&(e.proxy={origin:r})}this.mySock=new Rr(this.connURL,[],e)}catch(Sl){this.log_("Error instantiating WebSocket.");const t=Sl.message||Sl.data;return t&&this.log_(t),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=e=>{this.handleIncomingFrame(e)},this.mySock.onerror=e=>{this.log_("WebSocket error.  Closing connection.");const t=e.message||e.data;t&&this.log_(t),this.onClosed_()}}start(){}static forceDisallow(){jr.forceDisallow_=!0}static isAvailable(){let e=!1;if("undefined"!==typeof navigator&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,n=navigator.userAgent.match(t);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==Rr&&!jr.forceDisallow_}static previouslyFailed(){return $n.isInMemoryStorage||!0===$n.get("previous_websocket_failure")}markConnectionHealthy(){$n.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const e=this.frames.join("");this.frames=null;const t=Qe(e);this.onMessage(t)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(xe(null===this.frames,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{const e=this.extractFrameCount_(t);null!==e&&this.appendFrame_(e)}}send(e){this.resetKeepAlive();const t=Ke(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=sr(t,16384);n.length>1&&this.sendString_(String(n.length));for(let r=0;r<n.length;r++)this.sendString_(n[r])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()}),Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(Sl){this.log_("Exception thrown from WebSocket.send():",Sl.message||Sl.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}jr.responsesRequiredToBeHealthy=2,jr.healthyTimeout=3e4;class Dr{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[Ir,jr]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const t=jr&&jr.isAvailable();let n=t&&!jr.previouslyFailed();if(e.webSocketOnly&&(t||Xn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),n=!0),n)this.transports_=[jr];else{const e=this.transports_=[];for(const t of Dr.ALL_TRANSPORTS)t&&t.isAvailable()&&e.push(t);Dr.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Dr.globalTransportInitialized_=!1;class Ar{constructor(e,t,n,r,i,a,s,o,l,u){this.id=e,this.repoInfo_=t,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=a,this.onReady_=s,this.onDisconnect_=o,this.onKill_=l,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Yn("c:"+this.id+":"),this.transportManager_=new Dr(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((()=>{this.conn_&&this.conn_.open(t,n)}),Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=hr((()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))}),Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=ir("t",e),n=ir("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=ir("t",e),n=ir("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=ir("t",e);if("d"in e){const n=e.d;if("h"===t){const e=Object.assign({},n);this.repoInfo_.isUsingEmulator&&(e.h=this.repoInfo_.host),this.onHandshake_(e)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let e=0;e<this.pendingDataMessages.length;++e)this.onDataMessage_(this.pendingDataMessages[e]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?Gn("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Gn("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),gr!==n&&Xn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,n),hr((()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())}),Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):hr((()=>{this.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&($n.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class Or{put(e,t,n,r){}merge(e,t,n,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,n){}onDisconnectMerge(e,t,n){}onDisconnectCancel(e,t){}reportStats(e){}}class Lr{constructor(e){this.allowedEvents_=e,this.listeners_={},xe(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(let e=0;e<i.length;e++)i[e].callback.apply(i[e].context,n)}}on(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});const r=this.getInitialEvent(e);r&&t.apply(n,r)}off(e,t,n){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)}validateEventType_(e){xe(this.allowedEvents_.find((t=>t===e)),"Unknown event: "+e)}}class Mr extends Lr{constructor(){super(["online"]),this.online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||Be()||(window.addEventListener("online",(()=>{this.online_||(this.online_=!0,this.trigger("online",!0))}),!1),window.addEventListener("offline",(()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))}),!1))}static getInstance(){return new Mr}getInitialEvent(e){return xe("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class Fr{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let t=0;for(let e=0;e<this.pieces_.length;e++)this.pieces_[e].length>0&&(this.pieces_[t]=this.pieces_[e],t++);this.pieces_.length=t,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function $r(){return new Fr("")}function zr(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function Ur(e){return e.pieces_.length-e.pieceNum_}function Br(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new Fr(e.pieces_,t)}function Wr(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function qr(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.pieces_.slice(e.pieceNum_+t)}function Hr(e){if(e.pieceNum_>=e.pieces_.length)return null;const t=[];for(let n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new Fr(t,0)}function Vr(e,t){const n=[];for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof Fr)for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);else{const e=t.split("/");for(let t=0;t<e.length;t++)e[t].length>0&&n.push(e[t])}return new Fr(n,0)}function Qr(e){return e.pieceNum_>=e.pieces_.length}function Kr(e,t){const n=zr(e),r=zr(t);if(null===n)return t;if(n===r)return Kr(Br(e),Br(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function Yr(e,t){const n=qr(e,0),r=qr(t,0);for(let i=0;i<n.length&&i<r.length;i++){const e=nr(n[i],r[i]);if(0!==e)return e}return n.length===r.length?0:n.length<r.length?-1:1}function Gr(e,t){if(Ur(e)!==Ur(t))return!1;for(let n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function Jr(e,t){let n=e.pieceNum_,r=t.pieceNum_;if(Ur(e)>Ur(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}class Xr{constructor(e,t){this.errorPrefix_=t,this.parts_=qr(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let n=0;n<this.parts_.length;n++)this.byteLength_+=it(this.parts_[n]);Zr(this)}}function Zr(e){if(e.byteLength_>768)throw new Error(e.errorPrefix_+"has a key path longer than 768 bytes ("+e.byteLength_+").");if(e.parts_.length>32)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+ei(e))}function ei(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}class ti extends Lr{constructor(){let e,t;super(["visible"]),"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(t="visibilitychange",e="hidden"):"undefined"!==typeof document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):"undefined"!==typeof document.msHidden?(t="msvisibilitychange",e="msHidden"):"undefined"!==typeof document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,(()=>{const t=!document[e];t!==this.visible_&&(this.visible_=t,this.trigger("visible",t))}),!1)}static getInstance(){return new ti}getInitialEvent(e){return xe("visible"===e,"Unknown event type: "+e),[this.visible_]}}const ni=1e3;class ri extends Or{constructor(e,t,n,r,i,a,s,o){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=n,this.onConnectStatus_=r,this.onServerInfoUpdate_=i,this.authTokenProvider_=a,this.appCheckTokenProvider_=s,this.authOverride_=o,this.id=ri.nextPersistentConnectionId_++,this.log_=Yn("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=ni,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,o&&!We())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");ti.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&Mr.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,n){const r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_(Ke(i)),xe(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}get(e){this.initConnection_();const t=new ze,n={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:e=>{const n=e.d;"ok"===e.s?t.resolve(n):t.reject(n)}};this.outstandingGets_.push(n),this.outstandingGetCount_++;const r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),t.promise}listen(e,t,n,r){this.initConnection_();const i=e._queryIdentifier,a=e._path.toString();this.log_("Listen called for "+a+" "+i),this.listens.has(a)||this.listens.set(a,new Map),xe(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),xe(!this.listens.get(a).has(i),"listen() called twice for same path/queryId.");const s={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(a).set(i,s),this.connected_&&this.sendListen_(s)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,(n=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(n)}))}sendListen_(e){const t=e.query,n=t._path.toString(),r=t._queryIdentifier;this.log_("Listen on "+n+" for "+r);const i={p:n};e.tag&&(i.q=t._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest("q",i,(i=>{const a=i.d,s=i.s;ri.warnOnListenWarnings_(a,t);(this.listens.get(n)&&this.listens.get(n).get(r))===e&&(this.log_("listen response",i),"ok"!==s&&this.removeListen_(n,r),e.onComplete&&e.onComplete(s,a))}))}static warnOnListenWarnings_(e,t){if(e&&"object"===typeof e&&Ge(e,"w")){const n=Je(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){const e='".indexOn": "'+t._queryParams.getIndex().toString()+'"',n=t._path.toString();Xn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${e} at ${n} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(()=>{})),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||function(e){const t=Ye(e).claims;return"object"===typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(()=>{}))}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=function(e){const t=Ye(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")}(e)?"auth":"gauth",n={cred:e};null===this.authOverride_?n.noauth=!0:"object"===typeof this.authOverride_&&(n.authvar=this.authOverride_),this.sendRequest(t,n,(t=>{const n=t.s,r=t.d||"error";this.authToken_===e&&("ok"===n?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(n,r))}))}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(e=>{const t=e.s,n=e.d||"error";"ok"===t?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,n)}))}unlisten(e,t){const n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),xe(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query");this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}sendUnlisten_(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);const i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}onDisconnectPut(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}onDisconnectMerge(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,n,r){const i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(e=>{r&&setTimeout((()=>{r(e.s,e.d)}),Math.floor(0))}))}put(e,t,n,r){this.putInternal("p",e,t,n,r)}merge(e,t,n,r){this.putInternal("m",e,t,n,r)}putInternal(e,t,n,r,i){this.initConnection_();const a={p:t,d:n};void 0!==i&&(a.h=i),this.outstandingPuts_.push({action:e,request:a,onComplete:r}),this.outstandingPutCount_++;const s=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(s):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,n=this.outstandingPuts_[e].request,r=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,n,(n=>{this.log_(t+" response",n),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),r&&r(n.s,n.d)}))}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,(e=>{if("ok"!==e.s){const t=e.d;this.log_("reportStats","Error sending stats: "+t)}}))}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Ke(e));const t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):Gn("Unrecognized action received from server: "+Ke(e)+"\nAre you using the latest client?")}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){xe(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((()=>{this.establishConnectionTimer_=null,this.establishConnection_()}),Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=ni,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=ni,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=ni),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();const e=(new Date).getTime()-this.lastConnectionAttemptTime_;let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),n=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+ri.nextConnectionId_++,i=this.lastSessionId;let a=!1,s=null;const o=function(){s?s.close():(a=!0,n())},l=function(e){xe(s,"sendRequest call when we're not connected not allowed."),s.sendRequest(e)};this.realtime_={close:o,sendRequest:l};const u=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[o,l]=await Promise.all([this.authTokenProvider_.getToken(u),this.appCheckTokenProvider_.getToken(u)]);a?Kn("getToken() completed but was canceled"):(Kn("getToken() completed. Creating connection."),this.authToken_=o&&o.accessToken,this.appCheckToken_=l&&l.token,s=new Ar(r,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,n,(e=>{Xn(e+" ("+this.repoInfo_.toString()+")"),this.interrupt("server_kill")}),i))}catch(Gn){this.log_("Failed to get token: "+Gn),a||(this.repoInfo_.nodeAdmin&&Xn(Gn),o())}}}interrupt(e){Kn("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Kn("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Xe(this.interruptReasons_)&&(this.reconnectDelay_=ni,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let n;n=t?t.map((e=>ar(e))).join("$"):"default";const r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(e,t){const n=new Fr(e).toString();let r;if(this.listens.has(n)){const e=this.listens.get(n);r=e.get(t),e.delete(t),0===e.size&&this.listens.delete(n)}else r=void 0;return r}onAuthRevoked_(e,t){Kn("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){Kn("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";We()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+An.replace(/\./g,"-")]=1,Be()?e["framework.cordova"]=1:"object"===typeof navigator&&"ReactNative"===navigator.product&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Mr.getInstance().currentlyOnline();return Xe(this.interruptReasons_)&&e}}ri.nextPersistentConnectionId_=0,ri.nextConnectionId_=0;class ii{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new ii(e,t)}}class ai{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const n=new ii(er,e),r=new ii(er,t);return 0!==this.compare(n,r)}minPost(){return ii.MIN}}let si;class oi extends ai{static get __EMPTY_NODE(){return si}static set __EMPTY_NODE(e){si=e}compare(e,t){return nr(e.name,t.name)}isDefinedOn(e){throw Ne("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return ii.MIN}maxPost(){return new ii(tr,si)}makePost(e,t){return xe("string"===typeof e,"KeyIndex indexValue must always be a string."),new ii(e,si)}toString(){return".key"}}const li=new oi;class ui{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];let a=1;for(;!e.isEmpty();)if(a=t?n(e.key,t):1,r&&(a*=-1),a<0)e=this.isReverse_?e.left:e.right;else{if(0===a){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class ci{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:ci.RED,this.left=null!=r?r:di.EMPTY_NODE,this.right=null!=i?i:di.EMPTY_NODE}copy(e,t,n,r,i){return new ci(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return di.EMPTY_NODE;let e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let n,r;if(n=this,t(e,n.key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return di.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,ci.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,ci.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}ci.RED=!0,ci.BLACK=!1;class di{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:di.EMPTY_NODE;this.comparator_=e,this.root_=t}insert(e,t){return new di(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,ci.BLACK,null,null))}remove(e){return new di(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,ci.BLACK,null,null))}get(e){let t,n=this.root_;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t)return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}getPredecessorKey(e){let t,n=this.root_,r=null;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new ui(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new ui(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new ui(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new ui(this.root_,null,this.comparator_,!0,e)}}function hi(e,t){return nr(e.name,t.name)}function fi(e,t){return nr(e,t)}let pi;di.EMPTY_NODE=new class{copy(e,t,n,r,i){return this}insert(e,t,n){return new ci(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const mi=function(e){return"number"===typeof e?"number:"+lr(e):"string:"+e},gi=function(e){if(e.isLeafNode()){const t=e.val();xe("string"===typeof t||"number"===typeof t||"object"===typeof t&&Ge(t,".sv"),"Priority must be a string or number.")}else xe(e===pi||e.isEmpty(),"priority of unexpected type.");xe(e===pi||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let yi,vi,_i;class bi{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:bi.__childrenNodeConstructor.EMPTY_NODE;this.value_=e,this.priorityNode_=t,this.lazyHash_=null,xe(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),gi(this.priorityNode_)}static set __childrenNodeConstructor(e){yi=e}static get __childrenNodeConstructor(){return yi}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new bi(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:bi.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Qr(e)?this:".priority"===zr(e)?this.priorityNode_:bi.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return".priority"===e?this.updatePriority(t):t.isEmpty()&&".priority"!==e?this:bi.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const n=zr(e);return null===n?t:t.isEmpty()&&".priority"!==n?this:(xe(".priority"!==n||1===Ur(e),".priority must be the last token in a path"),this.updateImmediateChild(n,bi.__childrenNodeConstructor.EMPTY_NODE.updateChild(Br(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+mi(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",e+="number"===t?lr(this.value_):this.value_,this.lazyHash_=Wn(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===bi.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof bi.__childrenNodeConstructor?-1:(xe(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,n=typeof this.value_,r=bi.VALUE_TYPE_ORDER.indexOf(t),i=bi.VALUE_TYPE_ORDER.indexOf(n);return xe(r>=0,"Unknown leaf type: "+t),xe(i>=0,"Unknown leaf type: "+n),r===i?"object"===n?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-r}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}bi.VALUE_TYPE_ORDER=["object","boolean","number","string"];const wi=new class extends ai{compare(e,t){const n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?nr(e.name,t.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return ii.MIN}maxPost(){return new ii(tr,new bi("[PRIORITY-POST]",_i))}makePost(e,t){const n=vi(e);return new ii(t,new bi("[PRIORITY-POST]",n))}toString(){return".priority"}},Ci=Math.log(2);class ki{constructor(e){var t;this.count=(t=e+1,parseInt(Math.log(t)/Ci,10)),this.current_=this.count-1;const n=(r=this.count,parseInt(Array(r+1).join("1"),2));var r;this.bits_=e+1&n}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Si=function(e,t,n,r){e.sort(t);const i=function(t,r){const a=r-t;let s,o;if(0===a)return null;if(1===a)return s=e[t],o=n?n(s):s,new ci(o,s.node,ci.BLACK,null,null);{const l=parseInt(a/2,10)+t,u=i(t,l),c=i(l+1,r);return s=e[l],o=n?n(s):s,new ci(o,s.node,ci.BLACK,u,c)}},a=function(t){let r=null,a=null,s=e.length;const o=function(t,r){const a=s-t,o=s;s-=t;const u=i(a+1,o),c=e[a],d=n?n(c):c;l(new ci(d,c.node,r,null,u))},l=function(e){r?(r.left=e,r=e):(a=e,r=e)};for(let e=0;e<t.count;++e){const n=t.nextBitIsOne(),r=Math.pow(2,t.count-(e+1));n?o(r,ci.BLACK):(o(r,ci.BLACK),o(r,ci.RED))}return a}(new ki(e.length));return new di(r||t,a)};let Ei;const xi={};class Ni{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return xe(xi&&wi,"ChildrenNode.ts has not been loaded"),Ei=Ei||new Ni({".priority":xi},{".priority":wi}),Ei}get(e){const t=Je(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof di?t:null}hasIndex(e){return Ge(this.indexSet_,e.toString())}addIndex(e,t){xe(e!==li,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const n=[];let r=!1;const i=t.getIterator(ii.Wrap);let a,s=i.getNext();for(;s;)r=r||e.isDefinedOn(s.node),n.push(s),s=i.getNext();a=r?Si(n,e.getCompare()):xi;const o=e.toString(),l=Object.assign({},this.indexSet_);l[o]=e;const u=Object.assign({},this.indexes_);return u[o]=a,new Ni(u,l)}addToIndexes(e,t){const n=Ze(this.indexes_,((n,r)=>{const i=Je(this.indexSet_,r);if(xe(i,"Missing index implementation for "+r),n===xi){if(i.isDefinedOn(e.node)){const n=[],r=t.getIterator(ii.Wrap);let a=r.getNext();for(;a;)a.name!==e.name&&n.push(a),a=r.getNext();return n.push(e),Si(n,i.getCompare())}return xi}{const r=t.get(e.name);let i=n;return r&&(i=i.remove(new ii(e.name,r))),i.insert(e,e.node)}}));return new Ni(n,this.indexSet_)}removeFromIndexes(e,t){const n=Ze(this.indexes_,(n=>{if(n===xi)return n;{const r=t.get(e.name);return r?n.remove(new ii(e.name,r)):n}}));return new Ni(n,this.indexSet_)}}let Ti;class Ii{constructor(e,t,n){this.children_=e,this.priorityNode_=t,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&gi(this.priorityNode_),this.children_.isEmpty()&&xe(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Ti||(Ti=new Ii(new di(fi),null,Ni.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Ti}updatePriority(e){return this.children_.isEmpty()?this:new Ii(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const t=this.children_.get(e);return null===t?Ti:t}}getChild(e){const t=zr(e);return null===t?this:this.getImmediateChild(t).getChild(Br(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,t){if(xe(t,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(t);{const n=new ii(e,t);let r,i;t.isEmpty()?(r=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(n,this.children_)):(r=this.children_.insert(e,t),i=this.indexMap_.addToIndexes(n,this.children_));const a=r.isEmpty()?Ti:this.priorityNode_;return new Ii(r,a,i)}}updateChild(e,t){const n=zr(e);if(null===n)return t;{xe(".priority"!==zr(e)||1===Ur(e),".priority must be the last token in a path");const r=this.getImmediateChild(n).updateChild(Br(e),t);return this.updateImmediateChild(n,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let n=0,r=0,i=!0;if(this.forEachChild(wi,((a,s)=>{t[a]=s.val(e),n++,i&&Ii.INTEGER_REGEXP_.test(a)?r=Math.max(r,Number(a)):i=!1})),!e&&i&&r<2*n){const e=[];for(const n in t)e[n]=t[n];return e}return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+mi(this.getPriority().val())+":"),this.forEachChild(wi,((t,n)=>{const r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":Wn(e)}return this.lazyHash_}getPredecessorChildName(e,t,n){const r=this.resolveIndex_(n);if(r){const n=r.getPredecessorKey(new ii(e,t));return n?n.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.minKey();return e&&e.name}return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new ii(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.maxKey();return e&&e.name}return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new ii(t,this.children_.get(t)):null}forEachChild(e,t){const n=this.resolveIndex_(e);return n?n.inorderTraversal((e=>t(e.name,e.node))):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(e=>e));{const n=this.children_.getIteratorFrom(e.name,ii.Wrap);let r=n.peek();for(;null!=r&&t.compare(r,e)<0;)n.getNext(),r=n.peek();return n}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(e=>e));{const n=this.children_.getReverseIteratorFrom(e.name,ii.Wrap);let r=n.peek();for(;null!=r&&t.compare(r,e)>0;)n.getNext(),r=n.peek();return n}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Pi?-1:0}withIndex(e){if(e===li||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new Ii(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===li||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){const e=this.getIterator(wi),n=t.getIterator(wi);let r=e.getNext(),i=n.getNext();for(;r&&i;){if(r.name!==i.name||!r.node.equals(i.node))return!1;r=e.getNext(),i=n.getNext()}return null===r&&null===i}return!1}return!1}}resolveIndex_(e){return e===li?null:this.indexMap_.get(e.toString())}}Ii.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;const Pi=new class extends Ii{constructor(){super(new di(fi),Ii.EMPTY_NODE,Ni.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Ii.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(ii,{MIN:{value:new ii(er,Ii.EMPTY_NODE)},MAX:{value:new ii(tr,Pi)}}),oi.__EMPTY_NODE=Ii.EMPTY_NODE,bi.__childrenNodeConstructor=Ii,pi=Pi,function(e){_i=e}(Pi);function Ri(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===e)return Ii.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),xe(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e){return new bi(e,Ri(t))}if(e instanceof Array){let n=Ii.EMPTY_NODE;return or(e,((t,r)=>{if(Ge(e,t)&&"."!==t.substring(0,1)){const e=Ri(r);!e.isLeafNode()&&e.isEmpty()||(n=n.updateImmediateChild(t,e))}})),n.updatePriority(Ri(t))}{const n=[];let r=!1;if(or(e,((e,t)=>{if("."!==e.substring(0,1)){const i=Ri(t);i.isEmpty()||(r=r||!i.getPriority().isEmpty(),n.push(new ii(e,i)))}})),0===n.length)return Ii.EMPTY_NODE;const i=Si(n,hi,(e=>e.name),fi);if(r){const e=Si(n,wi.getCompare());return new Ii(i,Ri(t),new Ni({".priority":e},{".priority":wi}))}return new Ii(i,Ri(t),Ni.Default)}}!function(e){vi=e}(Ri);class ji extends ai{constructor(e){super(),this.indexPath_=e,xe(!Qr(e)&&".priority"!==zr(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?nr(e.name,t.name):i}makePost(e,t){const n=Ri(e),r=Ii.EMPTY_NODE.updateChild(this.indexPath_,n);return new ii(t,r)}maxPost(){const e=Ii.EMPTY_NODE.updateChild(this.indexPath_,Pi);return new ii(tr,e)}toString(){return qr(this.indexPath_,0).join("/")}}const Di=new class extends ai{compare(e,t){const n=e.node.compareTo(t.node);return 0===n?nr(e.name,t.name):n}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return ii.MIN}maxPost(){return ii.MAX}makePost(e,t){const n=Ri(e);return new ii(t,n)}toString(){return".value"}};function Ai(e){return{type:"value",snapshotNode:e}}function Oi(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function Li(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function Mi(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}class Fi{constructor(e){this.index_=e}updateChild(e,t,n,r,i,a){xe(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const s=e.getImmediateChild(t);return s.getChild(r).equals(n.getChild(r))&&s.isEmpty()===n.isEmpty()?e:(null!=a&&(n.isEmpty()?e.hasChild(t)?a.trackChildChange(Li(t,s)):xe(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):s.isEmpty()?a.trackChildChange(Oi(t,n)):a.trackChildChange(Mi(t,n,s))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))}updateFullNode(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(wi,((e,r)=>{t.hasChild(e)||n.trackChildChange(Li(e,r))})),t.isLeafNode()||t.forEachChild(wi,((t,r)=>{if(e.hasChild(t)){const i=e.getImmediateChild(t);i.equals(r)||n.trackChildChange(Mi(t,r,i))}else n.trackChildChange(Oi(t,r))}))),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Ii.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class $i{constructor(e){this.indexedFilter_=new Fi(e.getIndex()),this.index_=e.getIndex(),this.startPost_=$i.getStartPost_(e),this.endPost_=$i.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,n=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&n}updateChild(e,t,n,r,i,a){return this.matches(new ii(t,n))||(n=Ii.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,a)}updateFullNode(e,t,n){t.isLeafNode()&&(t=Ii.EMPTY_NODE);let r=t.withIndex(this.index_);r=r.updatePriority(Ii.EMPTY_NODE);const i=this;return t.forEachChild(wi,((e,t)=>{i.matches(new ii(e,t))||(r=r.updateImmediateChild(e,Ii.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(e,r,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class zi{constructor(e){this.withinDirectionalStart=e=>this.reverse_?this.withinEndPost(e):this.withinStartPost(e),this.withinDirectionalEnd=e=>this.reverse_?this.withinStartPost(e):this.withinEndPost(e),this.withinStartPost=e=>{const t=this.index_.compare(this.rangedFilter_.getStartPost(),e);return this.startIsInclusive_?t<=0:t<0},this.withinEndPost=e=>{const t=this.index_.compare(e,this.rangedFilter_.getEndPost());return this.endIsInclusive_?t<=0:t<0},this.rangedFilter_=new $i(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,n,r,i,a){return this.rangedFilter_.matches(new ii(t,n))||(n=Ii.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,a):this.fullLimitUpdateChild_(e,t,n,i,a)}updateFullNode(e,t,n){let r;if(t.isLeafNode()||t.isEmpty())r=Ii.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let e;r=Ii.EMPTY_NODE.withIndex(this.index_),e=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let n=0;for(;e.hasNext()&&n<this.limit_;){const t=e.getNext();if(this.withinDirectionalStart(t)){if(!this.withinDirectionalEnd(t))break;r=r.updateImmediateChild(t.name,t.node),n++}}}else{let e;r=t.withIndex(this.index_),r=r.updatePriority(Ii.EMPTY_NODE),e=this.reverse_?r.getReverseIterator(this.index_):r.getIterator(this.index_);let n=0;for(;e.hasNext();){const t=e.getNext();n<this.limit_&&this.withinDirectionalStart(t)&&this.withinDirectionalEnd(t)?n++:r=r.updateImmediateChild(t.name,Ii.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,n,r,i){let a;if(this.reverse_){const e=this.index_.getCompare();a=(t,n)=>e(n,t)}else a=this.index_.getCompare();const s=e;xe(s.numChildren()===this.limit_,"");const o=new ii(t,n),l=this.reverse_?s.getFirstChild(this.index_):s.getLastChild(this.index_),u=this.rangedFilter_.matches(o);if(s.hasChild(t)){const e=s.getImmediateChild(t);let c=r.getChildAfterChild(this.index_,l,this.reverse_);for(;null!=c&&(c.name===t||s.hasChild(c.name));)c=r.getChildAfterChild(this.index_,c,this.reverse_);const d=null==c?1:a(c,o);if(u&&!n.isEmpty()&&d>=0)return null!=i&&i.trackChildChange(Mi(t,n,e)),s.updateImmediateChild(t,n);{null!=i&&i.trackChildChange(Li(t,e));const n=s.updateImmediateChild(t,Ii.EMPTY_NODE);return null!=c&&this.rangedFilter_.matches(c)?(null!=i&&i.trackChildChange(Oi(c.name,c.node)),n.updateImmediateChild(c.name,c.node)):n}}return n.isEmpty()?e:u&&a(l,o)>=0?(null!=i&&(i.trackChildChange(Li(l.name,l.node)),i.trackChildChange(Oi(t,n))),s.updateImmediateChild(t,n).updateImmediateChild(l.name,Ii.EMPTY_NODE)):e}}class Ui{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=wi}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return xe(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return xe(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:er}hasEnd(){return this.endSet_}getIndexEndValue(){return xe(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return xe(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:tr}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return xe(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===wi}copy(){const e=new Ui;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function Bi(e){const t={};if(e.isDefault())return t;let n;if(e.index_===wi?n="$priority":e.index_===Di?n="$value":e.index_===li?n="$key":(xe(e.index_ instanceof ji,"Unrecognized index type!"),n=e.index_.toString()),t.orderBy=Ke(n),e.startSet_){const n=e.startAfterSet_?"startAfter":"startAt";t[n]=Ke(e.indexStartValue_),e.startNameSet_&&(t[n]+=","+Ke(e.indexStartName_))}if(e.endSet_){const n=e.endBeforeSet_?"endBefore":"endAt";t[n]=Ke(e.indexEndValue_),e.endNameSet_&&(t[n]+=","+Ke(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function Wi(e){const t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;let n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==wi&&(t.i=e.index_.toString()),t}class qi extends Or{constructor(e,t,n,r){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=n,this.appCheckTokenProvider_=r,this.log_=Yn("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:(xe(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,n,r){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const a=qi.getListenId_(e,n),s={};this.listens_[a]=s;const o=Bi(e._queryParams);this.restRequest_(i+".json",o,((e,t)=>{let o=t;if(404===e&&(o=null,e=null),null===e&&this.onDataUpdate_(i,o,!1,n),Je(this.listens_,a)===s){let t;t=e?401===e?"permission_denied":"rest_error:"+e:"ok",r(t,null)}}))}unlisten(e,t){const n=qi.getListenId_(e,t);delete this.listens_[n]}get(e){const t=Bi(e._queryParams),n=e._path.toString(),r=new ze;return this.restRequest_(n+".json",t,((e,t)=>{let i=t;404===e&&(i=null,e=null),null===e?(this.onDataUpdate_(n,i,!1,null),r.resolve(i)):r.reject(new Error(i))})),r.promise}refreshAuthToken(e){}restRequest_(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((r=>{let[i,a]=r;i&&i.accessToken&&(t.auth=i.accessToken),a&&a.token&&(t.ac=a.token);const s=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+function(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}(t);this.log_("Sending REST request for "+s);const o=new XMLHttpRequest;o.onreadystatechange=()=>{if(n&&4===o.readyState){this.log_("REST Response for "+s+" received. status:",o.status,"response:",o.responseText);let e=null;if(o.status>=200&&o.status<300){try{e=Qe(o.responseText)}catch(Sl){Xn("Failed to parse JSON response for "+s+": "+o.responseText)}n(null,e)}else 401!==o.status&&404!==o.status&&Xn("Got unsuccessful REST response for "+s+" Status: "+o.status),n(o.status);n=null}},o.open("GET",s,!0),o.send()}))}}class Hi{constructor(){this.rootNode_=Ii.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function Vi(){return{value:null,children:new Map}}function Qi(e,t,n){if(Qr(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{const r=zr(t);e.children.has(r)||e.children.set(r,Vi());Qi(e.children.get(r),t=Br(t),n)}}function Ki(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach(((e,n)=>{t(n,e)}))}(e,((e,r)=>{Ki(r,new Fr(t.toString()+"/"+e),n)}))}class Yi{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&or(this.last_,((e,n)=>{t[e]=t[e]-n})),this.last_=e,t}}class Gi{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new Yi(e);const n=1e4+2e4*Math.random();hr(this.reportStats_.bind(this),Math.floor(n))}reportStats_(){const e=this.statsListener_.get(),t={};let n=!1;or(e,((e,r)=>{r>0&&Ge(this.statsToReport_,e)&&(t[e]=r,n=!0)})),n&&this.server_.reportStats(t),hr(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Ji;function Xi(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Ji||(Ji={}));class Zi{constructor(e,t,n){this.path=e,this.affectedTree=t,this.revert=n,this.type=Ji.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(Qr(this.path)){if(null!=this.affectedTree.value)return xe(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Fr(e));return new Zi($r(),t,this.revert)}}return xe(zr(this.path)===e,"operationForChild called for unrelated child."),new Zi(Br(this.path),this.affectedTree,this.revert)}}class ea{constructor(e,t){this.source=e,this.path=t,this.type=Ji.LISTEN_COMPLETE}operationForChild(e){return Qr(this.path)?new ea(this.source,$r()):new ea(this.source,Br(this.path))}}class ta{constructor(e,t,n){this.source=e,this.path=t,this.snap=n,this.type=Ji.OVERWRITE}operationForChild(e){return Qr(this.path)?new ta(this.source,$r(),this.snap.getImmediateChild(e)):new ta(this.source,Br(this.path),this.snap)}}class na{constructor(e,t,n){this.source=e,this.path=t,this.children=n,this.type=Ji.MERGE}operationForChild(e){if(Qr(this.path)){const t=this.children.subtree(new Fr(e));return t.isEmpty()?null:t.value?new ta(this.source,$r(),t.value):new na(this.source,$r(),t)}return xe(zr(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new na(this.source,Br(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class ra{constructor(e,t,n){this.node_=e,this.fullyInitialized_=t,this.filtered_=n}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Qr(e))return this.isFullyInitialized()&&!this.filtered_;const t=zr(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class ia{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function aa(e,t,n,r,i,a){const s=r.filter((e=>e.type===n));s.sort(((t,n)=>function(e,t,n){if(null==t.childName||null==n.childName)throw Ne("Should only compare child_ events.");const r=new ii(t.childName,t.snapshotNode),i=new ii(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,t,n))),s.forEach((n=>{const r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,a);i.forEach((i=>{i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))}))}))}function sa(e,t){return{eventCache:e,serverCache:t}}function oa(e,t,n,r){return sa(new ra(t,n,r),e.serverCache)}function la(e,t,n,r){return sa(e.eventCache,new ra(t,n,r))}function ua(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function ca(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}let da;class ha{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(da||(da=new di(rr)),da);this.value=e,this.children=t}static fromObject(e){let t=new ha(null);return or(e,((e,n)=>{t=t.set(new Fr(e),n)})),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:$r(),value:this.value};if(Qr(e))return null;{const n=zr(e),r=this.children.get(n);if(null!==r){const i=r.findRootMostMatchingPathAndValue(Br(e),t);if(null!=i){return{path:Vr(new Fr(n),i.path),value:i.value}}return null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,(()=>!0))}subtree(e){if(Qr(e))return this;{const t=zr(e),n=this.children.get(t);return null!==n?n.subtree(Br(e)):new ha(null)}}set(e,t){if(Qr(e))return new ha(t,this.children);{const n=zr(e),r=(this.children.get(n)||new ha(null)).set(Br(e),t),i=this.children.insert(n,r);return new ha(this.value,i)}}remove(e){if(Qr(e))return this.children.isEmpty()?new ha(null):new ha(null,this.children);{const t=zr(e),n=this.children.get(t);if(n){const r=n.remove(Br(e));let i;return i=r.isEmpty()?this.children.remove(t):this.children.insert(t,r),null===this.value&&i.isEmpty()?new ha(null):new ha(this.value,i)}return this}}get(e){if(Qr(e))return this.value;{const t=zr(e),n=this.children.get(t);return n?n.get(Br(e)):null}}setTree(e,t){if(Qr(e))return t;{const n=zr(e),r=(this.children.get(n)||new ha(null)).setTree(Br(e),t);let i;return i=r.isEmpty()?this.children.remove(n):this.children.insert(n,r),new ha(this.value,i)}}fold(e){return this.fold_($r(),e)}fold_(e,t){const n={};return this.children.inorderTraversal(((r,i)=>{n[r]=i.fold_(Vr(e,r),t)})),t(e,this.value,n)}findOnPath(e,t){return this.findOnPath_(e,$r(),t)}findOnPath_(e,t,n){const r=!!this.value&&n(t,this.value);if(r)return r;if(Qr(e))return null;{const r=zr(e),i=this.children.get(r);return i?i.findOnPath_(Br(e),Vr(t,r),n):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,$r(),t)}foreachOnPath_(e,t,n){if(Qr(e))return this;{this.value&&n(t,this.value);const r=zr(e),i=this.children.get(r);return i?i.foreachOnPath_(Br(e),Vr(t,r),n):new ha(null)}}foreach(e){this.foreach_($r(),e)}foreach_(e,t){this.children.inorderTraversal(((n,r)=>{r.foreach_(Vr(e,n),t)})),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal(((t,n)=>{n.value&&e(t,n.value)}))}}class fa{constructor(e){this.writeTree_=e}static empty(){return new fa(new ha(null))}}function pa(e,t,n){if(Qr(t))return new fa(new ha(n));{const r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){const i=r.path;let a=r.value;const s=Kr(i,t);return a=a.updateChild(s,n),new fa(e.writeTree_.set(i,a))}{const r=new ha(n),i=e.writeTree_.setTree(t,r);return new fa(i)}}}function ma(e,t,n){let r=e;return or(n,((e,n)=>{r=pa(r,Vr(t,e),n)})),r}function ga(e,t){if(Qr(t))return fa.empty();{const n=e.writeTree_.setTree(t,new ha(null));return new fa(n)}}function ya(e,t){return null!=va(e,t)}function va(e,t){const n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(Kr(n.path,t)):null}function _a(e){const t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(wi,((e,n)=>{t.push(new ii(e,n))})):e.writeTree_.children.inorderTraversal(((e,n)=>{null!=n.value&&t.push(new ii(e,n.value))})),t}function ba(e,t){if(Qr(t))return e;{const n=va(e,t);return new fa(null!=n?new ha(n):e.writeTree_.subtree(t))}}function wa(e){return e.writeTree_.isEmpty()}function Ca(e,t){return ka($r(),e.writeTree_,t)}function ka(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);{let r=null;return t.children.inorderTraversal(((t,i)=>{".priority"===t?(xe(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=ka(Vr(e,t),i,n)})),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(Vr(e,".priority"),r)),n}}function Sa(e,t){return Ma(t,e)}function Ea(e,t){const n=e.allWrites.findIndex((e=>e.writeId===t));xe(n>=0,"removeWrite called with nonexistent writeId.");const r=e.allWrites[n];e.allWrites.splice(n,1);let i=r.visible,a=!1,s=e.allWrites.length-1;for(;i&&s>=0;){const t=e.allWrites[s];t.visible&&(s>=n&&xa(t,r.path)?i=!1:Jr(r.path,t.path)&&(a=!0)),s--}if(i){if(a)return function(e){e.visibleWrites=Ta(e.allWrites,Na,$r()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;if(r.snap)e.visibleWrites=ga(e.visibleWrites,r.path);else{or(r.children,(t=>{e.visibleWrites=ga(e.visibleWrites,Vr(r.path,t))}))}return!0}return!1}function xa(e,t){if(e.snap)return Jr(e.path,t);for(const n in e.children)if(e.children.hasOwnProperty(n)&&Jr(Vr(e.path,n),t))return!0;return!1}function Na(e){return e.visible}function Ta(e,t,n){let r=fa.empty();for(let i=0;i<e.length;++i){const a=e[i];if(t(a)){const e=a.path;let t;if(a.snap)Jr(n,e)?(t=Kr(n,e),r=pa(r,t,a.snap)):Jr(e,n)&&(t=Kr(e,n),r=pa(r,$r(),a.snap.getChild(t)));else{if(!a.children)throw Ne("WriteRecord should have .snap or .children");if(Jr(n,e))t=Kr(n,e),r=ma(r,t,a.children);else if(Jr(e,n))if(t=Kr(e,n),Qr(t))r=ma(r,$r(),a.children);else{const e=Je(a.children,zr(t));if(e){const n=e.getChild(Br(t));r=pa(r,$r(),n)}}}}}return r}function Ia(e,t,n,r,i){if(r||i){const a=ba(e.visibleWrites,t);if(!i&&wa(a))return n;if(i||null!=n||ya(a,$r())){const a=function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(Jr(e.path,t)||Jr(t,e.path))};return Ca(Ta(e.allWrites,a,t),n||Ii.EMPTY_NODE)}return null}{const r=va(e.visibleWrites,t);if(null!=r)return r;{const r=ba(e.visibleWrites,t);if(wa(r))return n;if(null!=n||ya(r,$r())){return Ca(r,n||Ii.EMPTY_NODE)}return null}}}function Pa(e,t,n,r){return Ia(e.writeTree,e.treePath,t,n,r)}function Ra(e,t){return function(e,t,n){let r=Ii.EMPTY_NODE;const i=va(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(wi,((e,t)=>{r=r.updateImmediateChild(e,t)})),r;if(n){const i=ba(e.visibleWrites,t);return n.forEachChild(wi,((e,t)=>{const n=Ca(ba(i,new Fr(e)),t);r=r.updateImmediateChild(e,n)})),_a(i).forEach((e=>{r=r.updateImmediateChild(e.name,e.node)})),r}return _a(ba(e.visibleWrites,t)).forEach((e=>{r=r.updateImmediateChild(e.name,e.node)})),r}(e.writeTree,e.treePath,t)}function ja(e,t,n,r){return function(e,t,n,r,i){xe(r||i,"Either existingEventSnap or existingServerSnap must exist");const a=Vr(t,n);if(ya(e.visibleWrites,a))return null;{const t=ba(e.visibleWrites,a);return wa(t)?i.getChild(n):Ca(t,i.getChild(n))}}(e.writeTree,e.treePath,t,n,r)}function Da(e,t){return function(e,t){return va(e.visibleWrites,t)}(e.writeTree,Vr(e.treePath,t))}function Aa(e,t,n,r,i,a){return function(e,t,n,r,i,a,s){let o;const l=ba(e.visibleWrites,t),u=va(l,$r());if(null!=u)o=u;else{if(null==n)return[];o=Ca(l,n)}if(o=o.withIndex(s),o.isEmpty()||o.isLeafNode())return[];{const e=[],t=s.getCompare(),n=a?o.getReverseIteratorFrom(r,s):o.getIteratorFrom(r,s);let l=n.getNext();for(;l&&e.length<i;)0!==t(l,r)&&e.push(l),l=n.getNext();return e}}(e.writeTree,e.treePath,t,n,r,i,a)}function Oa(e,t,n){return function(e,t,n,r){const i=Vr(t,n),a=va(e.visibleWrites,i);if(null!=a)return a;if(r.isCompleteForChild(n))return Ca(ba(e.visibleWrites,i),r.getNode().getImmediateChild(n));return null}(e.writeTree,e.treePath,t,n)}function La(e,t){return Ma(Vr(e.treePath,t),e.writeTree)}function Ma(e,t){return{treePath:e,writeTree:t}}class Fa{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,n=e.childName;xe("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),xe(".priority"!==n,"Only non-priority child changes can be tracked.");const r=this.changeMap.get(n);if(r){const i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,Mi(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,Li(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,Oi(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw Ne("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,Mi(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)}getChanges(){return Array.from(this.changeMap.values())}}const $a=new class{getCompleteChild(e){return null}getChildAfterChild(e,t,n){return null}};class za{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=n}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const t=null!=this.optCompleteServerCache_?new ra(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Oa(this.writes_,e,t)}}getChildAfterChild(e,t,n){const r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:ca(this.viewCache_),i=Aa(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]}}function Ua(e,t,n,r,i){const a=new Fa;let s,o;if(n.type===Ji.OVERWRITE){const l=n;l.source.fromUser?s=qa(e,t,l.path,l.snap,r,i,a):(xe(l.source.fromServer,"Unknown source."),o=l.source.tagged||t.serverCache.isFiltered()&&!Qr(l.path),s=Wa(e,t,l.path,l.snap,r,i,o,a))}else if(n.type===Ji.MERGE){const l=n;l.source.fromUser?s=function(e,t,n,r,i,a,s){let o=t;return r.foreach(((r,l)=>{const u=Vr(n,r);Ha(t,zr(u))&&(o=qa(e,o,u,l,i,a,s))})),r.foreach(((r,l)=>{const u=Vr(n,r);Ha(t,zr(u))||(o=qa(e,o,u,l,i,a,s))})),o}(e,t,l.path,l.children,r,i,a):(xe(l.source.fromServer,"Unknown source."),o=l.source.tagged||t.serverCache.isFiltered(),s=Qa(e,t,l.path,l.children,r,i,o,a))}else if(n.type===Ji.ACK_USER_WRITE){const o=n;s=o.revert?function(e,t,n,r,i,a){let s;if(null!=Da(r,n))return t;{const o=new za(r,t,i),l=t.eventCache.getNode();let u;if(Qr(n)||".priority"===zr(n)){let n;if(t.serverCache.isFullyInitialized())n=Pa(r,ca(t));else{const e=t.serverCache.getNode();xe(e instanceof Ii,"serverChildren would be complete if leaf node"),n=Ra(r,e)}u=e.filter.updateFullNode(l,n,a)}else{const i=zr(n);let c=Oa(r,i,t.serverCache);null==c&&t.serverCache.isCompleteForChild(i)&&(c=l.getImmediateChild(i)),u=null!=c?e.filter.updateChild(l,i,c,Br(n),o,a):t.eventCache.getNode().hasChild(i)?e.filter.updateChild(l,i,Ii.EMPTY_NODE,Br(n),o,a):l,u.isEmpty()&&t.serverCache.isFullyInitialized()&&(s=Pa(r,ca(t)),s.isLeafNode()&&(u=e.filter.updateFullNode(u,s,a)))}return s=t.serverCache.isFullyInitialized()||null!=Da(r,$r()),oa(t,u,s,e.filter.filtersNodes())}}(e,t,o.path,r,i,a):function(e,t,n,r,i,a,s){if(null!=Da(i,n))return t;const o=t.serverCache.isFiltered(),l=t.serverCache;if(null!=r.value){if(Qr(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return Wa(e,t,n,l.getNode().getChild(n),i,a,o,s);if(Qr(n)){let r=new ha(null);return l.getNode().forEachChild(li,((e,t)=>{r=r.set(new Fr(e),t)})),Qa(e,t,n,r,i,a,o,s)}return t}{let u=new ha(null);return r.foreach(((e,t)=>{const r=Vr(n,e);l.isCompleteForPath(r)&&(u=u.set(e,l.getNode().getChild(r)))})),Qa(e,t,n,u,i,a,o,s)}}(e,t,o.path,o.affectedTree,r,i,a)}else{if(n.type!==Ji.LISTEN_COMPLETE)throw Ne("Unknown operation type: "+n.type);s=function(e,t,n,r,i){const a=t.serverCache,s=la(t,a.getNode(),a.isFullyInitialized()||Qr(n),a.isFiltered());return Ba(e,s,n,r,$a,i)}(e,t,n.path,r,a)}const l=a.getChanges();return function(e,t,n){const r=t.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=ua(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&n.push(Ai(ua(t)))}}(t,s,l),{viewCache:s,changes:l}}function Ba(e,t,n,r,i,a){const s=t.eventCache;if(null!=Da(r,n))return t;{let o,l;if(Qr(n))if(xe(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const n=ca(t),i=Ra(r,n instanceof Ii?n:Ii.EMPTY_NODE);o=e.filter.updateFullNode(t.eventCache.getNode(),i,a)}else{const n=Pa(r,ca(t));o=e.filter.updateFullNode(t.eventCache.getNode(),n,a)}else{const u=zr(n);if(".priority"===u){xe(1===Ur(n),"Can't have a priority with additional path components");const i=s.getNode();l=t.serverCache.getNode();const a=ja(r,n,i,l);o=null!=a?e.filter.updatePriority(i,a):s.getNode()}else{const c=Br(n);let d;if(s.isCompleteForChild(u)){l=t.serverCache.getNode();const e=ja(r,n,s.getNode(),l);d=null!=e?s.getNode().getImmediateChild(u).updateChild(c,e):s.getNode().getImmediateChild(u)}else d=Oa(r,u,t.serverCache);o=null!=d?e.filter.updateChild(s.getNode(),u,d,c,i,a):s.getNode()}}return oa(t,o,s.isFullyInitialized()||Qr(n),e.filter.filtersNodes())}}function Wa(e,t,n,r,i,a,s,o){const l=t.serverCache;let u;const c=s?e.filter:e.filter.getIndexedFilter();if(Qr(n))u=c.updateFullNode(l.getNode(),r,null);else if(c.filtersNodes()&&!l.isFiltered()){const e=l.getNode().updateChild(n,r);u=c.updateFullNode(l.getNode(),e,null)}else{const e=zr(n);if(!l.isCompleteForPath(n)&&Ur(n)>1)return t;const i=Br(n),a=l.getNode().getImmediateChild(e).updateChild(i,r);u=".priority"===e?c.updatePriority(l.getNode(),a):c.updateChild(l.getNode(),e,a,i,$a,null)}const d=la(t,u,l.isFullyInitialized()||Qr(n),c.filtersNodes());return Ba(e,d,n,i,new za(i,d,a),o)}function qa(e,t,n,r,i,a,s){const o=t.eventCache;let l,u;const c=new za(i,t,a);if(Qr(n))u=e.filter.updateFullNode(t.eventCache.getNode(),r,s),l=oa(t,u,!0,e.filter.filtersNodes());else{const i=zr(n);if(".priority"===i)u=e.filter.updatePriority(t.eventCache.getNode(),r),l=oa(t,u,o.isFullyInitialized(),o.isFiltered());else{const a=Br(n),u=o.getNode().getImmediateChild(i);let d;if(Qr(a))d=r;else{const e=c.getCompleteChild(i);d=null!=e?".priority"===Wr(a)&&e.getChild(Hr(a)).isEmpty()?e:e.updateChild(a,r):Ii.EMPTY_NODE}if(u.equals(d))l=t;else{l=oa(t,e.filter.updateChild(o.getNode(),i,d,a,c,s),o.isFullyInitialized(),e.filter.filtersNodes())}}}return l}function Ha(e,t){return e.eventCache.isCompleteForChild(t)}function Va(e,t,n){return n.foreach(((e,n)=>{t=t.updateChild(e,n)})),t}function Qa(e,t,n,r,i,a,s,o){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let l,u=t;l=Qr(n)?r:new ha(null).setTree(n,r);const c=t.serverCache.getNode();return l.children.inorderTraversal(((n,r)=>{if(c.hasChild(n)){const l=Va(0,t.serverCache.getNode().getImmediateChild(n),r);u=Wa(e,u,new Fr(n),l,i,a,s,o)}})),l.children.inorderTraversal(((n,r)=>{const l=!t.serverCache.isCompleteForChild(n)&&null===r.value;if(!c.hasChild(n)&&!l){const l=Va(0,t.serverCache.getNode().getImmediateChild(n),r);u=Wa(e,u,new Fr(n),l,i,a,s,o)}})),u}class Ka{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const n=this.query_._queryParams,r=new Fi(n.getIndex()),i=(a=n).loadsAllData()?new Fi(a.getIndex()):a.hasLimit()?new zi(a):new $i(a);var a;this.processor_=function(e){return{filter:e}}(i);const s=t.serverCache,o=t.eventCache,l=r.updateFullNode(Ii.EMPTY_NODE,s.getNode(),null),u=i.updateFullNode(Ii.EMPTY_NODE,o.getNode(),null),c=new ra(l,s.isFullyInitialized(),r.filtersNodes()),d=new ra(u,o.isFullyInitialized(),i.filtersNodes());this.viewCache_=sa(d,c),this.eventGenerator_=new ia(this.query_)}get query(){return this.query_}}function Ya(e,t){const n=ca(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!Qr(t)&&!n.getImmediateChild(zr(t)).isEmpty())?n.getChild(t):null}function Ga(e){return 0===e.eventRegistrations_.length}function Ja(e,t,n){const r=[];if(n){xe(null==t,"A cancel should cancel all event registrations.");const i=e.query._path;e.eventRegistrations_.forEach((e=>{const t=e.createCancelEvent(n,i);t&&r.push(t)}))}if(t){let n=[];for(let r=0;r<e.eventRegistrations_.length;++r){const i=e.eventRegistrations_[r];if(i.matches(t)){if(t.hasAnyCallback()){n=n.concat(e.eventRegistrations_.slice(r+1));break}}else n.push(i)}e.eventRegistrations_=n}else e.eventRegistrations_=[];return r}function Xa(e,t,n,r){t.type===Ji.MERGE&&null!==t.source.queryId&&(xe(ca(e.viewCache_),"We should always have a full cache before handling merges"),xe(ua(e.viewCache_),"Missing event cache, even though we have a server cache"));const i=e.viewCache_,a=Ua(e.processor_,i,t,n,r);var s,o;return s=e.processor_,o=a.viewCache,xe(o.eventCache.getNode().isIndexed(s.filter.getIndex()),"Event snap not indexed"),xe(o.serverCache.getNode().isIndexed(s.filter.getIndex()),"Server snap not indexed"),xe(a.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=a.viewCache,Za(e,a.changes,a.viewCache.eventCache.getNode(),null)}function Za(e,t,n,r){const i=r?[r]:e.eventRegistrations_;return function(e,t,n,r){const i=[],a=[];return t.forEach((t=>{var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&a.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),aa(e,i,"child_removed",t,r,n),aa(e,i,"child_added",t,r,n),aa(e,i,"child_moved",a,r,n),aa(e,i,"child_changed",t,r,n),aa(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,i)}let es,ts;class ns{constructor(){this.views=new Map}}function rs(e,t,n,r){const i=t.source.queryId;if(null!==i){const a=e.views.get(i);return xe(null!=a,"SyncTree gave us an op for an invalid query."),Xa(a,t,n,r)}{let i=[];for(const a of e.views.values())i=i.concat(Xa(a,t,n,r));return i}}function is(e,t,n,r,i){const a=t._queryIdentifier,s=e.views.get(a);if(!s){let e=Pa(n,i?r:null),a=!1;e?a=!0:r instanceof Ii?(e=Ra(n,r),a=!1):(e=Ii.EMPTY_NODE,a=!1);const s=sa(new ra(e,a,!1),new ra(r,i,!1));return new Ka(t,s)}return s}function as(e,t,n,r,i,a){const s=is(e,t,r,i,a);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,s),function(e,t){e.eventRegistrations_.push(t)}(s,n),function(e,t){const n=e.viewCache_.eventCache,r=[];n.getNode().isLeafNode()||n.getNode().forEachChild(wi,((e,t)=>{r.push(Oi(e,t))}));return n.isFullyInitialized()&&r.push(Ai(n.getNode())),Za(e,r,n.getNode(),t)}(s,n)}function ss(e,t,n,r){const i=t._queryIdentifier,a=[];let s=[];const o=ds(e);if("default"===i)for(const[l,u]of e.views.entries())s=s.concat(Ja(u,n,r)),Ga(u)&&(e.views.delete(l),u.query._queryParams.loadsAllData()||a.push(u.query));else{const t=e.views.get(i);t&&(s=s.concat(Ja(t,n,r)),Ga(t)&&(e.views.delete(i),t.query._queryParams.loadsAllData()||a.push(t.query)))}return o&&!ds(e)&&a.push(new(xe(es,"Reference.ts has not been loaded"),es)(t._repo,t._path)),{removed:a,events:s}}function os(e){const t=[];for(const n of e.views.values())n.query._queryParams.loadsAllData()||t.push(n);return t}function ls(e,t){let n=null;for(const r of e.views.values())n=n||Ya(r,t);return n}function us(e,t){if(t._queryParams.loadsAllData())return hs(e);{const n=t._queryIdentifier;return e.views.get(n)}}function cs(e,t){return null!=us(e,t)}function ds(e){return null!=hs(e)}function hs(e){for(const t of e.views.values())if(t.query._queryParams.loadsAllData())return t;return null}let fs=1;class ps{constructor(e){this.listenProvider_=e,this.syncPointTree_=new ha(null),this.pendingWriteTree_={visibleWrites:fa.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function ms(e,t,n,r,i){return function(e,t,n,r,i){xe(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=pa(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?Ss(e,new ta({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function gs(e,t,n,r){!function(e,t,n,r){xe(r>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:t,children:n,writeId:r,visible:!0}),e.visibleWrites=ma(e.visibleWrites,t,n),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r);const i=ha.fromObject(n);return Ss(e,new na({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,i))}function ys(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=function(e,t){for(let n=0;n<e.allWrites.length;n++){const r=e.allWrites[n];if(r.writeId===t)return r}return null}(e.pendingWriteTree_,t);if(Ea(e.pendingWriteTree_,t)){let t=new ha(null);return null!=r.snap?t=t.set($r(),!0):or(r.children,(e=>{t=t.set(new Fr(e),!0)})),Ss(e,new Zi(r.path,t,n))}return[]}function vs(e,t,n){return Ss(e,new ta({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function _s(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const a=t._path,s=e.syncPointTree_.get(a);let o=[];if(s&&("default"===t._queryIdentifier||cs(s,t))){const l=ss(s,t,n,r);0===s.views.size&&(e.syncPointTree_=e.syncPointTree_.remove(a));const u=l.removed;if(o=l.events,!i){const n=-1!==u.findIndex((e=>e._queryParams.loadsAllData())),i=e.syncPointTree_.findOnPath(a,((e,t)=>ds(t)));if(n&&!i){const t=e.syncPointTree_.subtree(a);if(!t.isEmpty()){const n=function(e){return e.fold(((e,t,n)=>{if(t&&ds(t)){return[hs(t)]}{let e=[];return t&&(e=os(t)),or(n,((t,n)=>{e=e.concat(n)})),e}}))}(t);for(let t=0;t<n.length;++t){const r=n[t],i=r.query,a=Ns(e,r);e.listenProvider_.startListening(Ds(i),Ts(e,i),a.hashFn,a.onComplete)}}}if(!i&&u.length>0&&!r)if(n){const n=null;e.listenProvider_.stopListening(Ds(t),n)}else u.forEach((t=>{const n=e.queryToTagMap.get(Is(t));e.listenProvider_.stopListening(Ds(t),n)}))}!function(e,t){for(let n=0;n<t.length;++n){const r=t[n];if(!r._queryParams.loadsAllData()){const t=Is(r),n=e.queryToTagMap.get(t);e.queryToTagMap.delete(t),e.tagToQueryMap.delete(n)}}}(e,u)}return o}function bs(e,t,n,r){const i=Ps(e,r);if(null!=i){const r=Rs(i),a=r.path,s=r.queryId,o=Kr(a,t);return js(e,a,new ta(Xi(s),o,n))}return[]}function ws(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=t._path;let a=null,s=!1;e.syncPointTree_.foreachOnPath(i,((e,t)=>{const n=Kr(e,i);a=a||ls(t,n),s=s||ds(t)}));let o,l=e.syncPointTree_.get(i);if(l?(s=s||ds(l),a=a||ls(l,$r())):(l=new ns,e.syncPointTree_=e.syncPointTree_.set(i,l)),null!=a)o=!0;else{o=!1,a=Ii.EMPTY_NODE;e.syncPointTree_.subtree(i).foreachChild(((e,t)=>{const n=ls(t,$r());n&&(a=a.updateImmediateChild(e,n))}))}const u=cs(l,t);if(!u&&!t._queryParams.loadsAllData()){const n=Is(t);xe(!e.queryToTagMap.has(n),"View does not exist, but we have a tag");const r=fs++;e.queryToTagMap.set(n,r),e.tagToQueryMap.set(r,n)}let c=as(l,t,n,Sa(e.pendingWriteTree_,i),a,o);if(!u&&!s&&!r){const n=us(l,t);c=c.concat(function(e,t,n){const r=t._path,i=Ts(e,t),a=Ns(e,n),s=e.listenProvider_.startListening(Ds(t),i,a.hashFn,a.onComplete),o=e.syncPointTree_.subtree(r);if(i)xe(!ds(o.value),"If we're adding a query, it shouldn't be shadowed");else{const t=o.fold(((e,t,n)=>{if(!Qr(e)&&t&&ds(t))return[hs(t).query];{let e=[];return t&&(e=e.concat(os(t).map((e=>e.query)))),or(n,((t,n)=>{e=e.concat(n)})),e}}));for(let n=0;n<t.length;++n){const r=t[n];e.listenProvider_.stopListening(Ds(r),Ts(e,r))}}return s}(e,t,n))}return c}function Cs(e,t,n){const r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,((e,n)=>{const r=ls(n,Kr(e,t));if(r)return r}));return Ia(r,t,i,n,!0)}function ks(e,t){const n=t._path;let r=null;e.syncPointTree_.foreachOnPath(n,((e,t)=>{const i=Kr(e,n);r=r||ls(t,i)}));let i=e.syncPointTree_.get(n);i?r=r||ls(i,$r()):(i=new ns,e.syncPointTree_=e.syncPointTree_.set(n,i));const a=null!=r,s=a?new ra(r,!0,!1):null;return function(e){return ua(e.viewCache_)}(is(i,t,Sa(e.pendingWriteTree_,t._path),a?s.getNode():Ii.EMPTY_NODE,a))}function Ss(e,t){return Es(t,e.syncPointTree_,null,Sa(e.pendingWriteTree_,$r()))}function Es(e,t,n,r){if(Qr(e.path))return xs(e,t,n,r);{const i=t.get($r());null==n&&null!=i&&(n=ls(i,$r()));let a=[];const s=zr(e.path),o=e.operationForChild(s),l=t.children.get(s);if(l&&o){const e=n?n.getImmediateChild(s):null,t=La(r,s);a=a.concat(Es(o,l,e,t))}return i&&(a=a.concat(rs(i,e,r,n))),a}}function xs(e,t,n,r){const i=t.get($r());null==n&&null!=i&&(n=ls(i,$r()));let a=[];return t.children.inorderTraversal(((t,i)=>{const s=n?n.getImmediateChild(t):null,o=La(r,t),l=e.operationForChild(t);l&&(a=a.concat(xs(l,i,s,o)))})),i&&(a=a.concat(rs(i,e,r,n))),a}function Ns(e,t){const n=t.query,r=Ts(e,n);return{hashFn:()=>{const e=function(e){return e.viewCache_.serverCache.getNode()}(t)||Ii.EMPTY_NODE;return e.hash()},onComplete:t=>{if("ok"===t)return r?function(e,t,n){const r=Ps(e,n);if(r){const n=Rs(r),i=n.path,a=n.queryId,s=Kr(i,t);return js(e,i,new ea(Xi(a),s))}return[]}(e,n._path,r):function(e,t){return Ss(e,new ea({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(e,n._path);{const r=function(e,t){let n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");const r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}(t,n);return _s(e,n,null,r)}}}}function Ts(e,t){const n=Is(t);return e.queryToTagMap.get(n)}function Is(e){return e._path.toString()+"$"+e._queryIdentifier}function Ps(e,t){return e.tagToQueryMap.get(t)}function Rs(e){const t=e.indexOf("$");return xe(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new Fr(e.substr(0,t))}}function js(e,t,n){const r=e.syncPointTree_.get(t);xe(r,"Missing sync point for query tag that we're tracking");return rs(r,n,Sa(e.pendingWriteTree_,t),null)}function Ds(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(xe(ts,"Reference.ts has not been loaded"),ts)(e._repo,e._path):e}class As{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new As(t)}node(){return this.node_}}class Os{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Vr(this.path_,e);return new Os(this.syncTree_,t)}node(){return Cs(this.syncTree_,this.path_)}}const Ls=function(e,t,n){return e&&"object"===typeof e?(xe(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?Ms(e[".sv"],t,n):"object"===typeof e[".sv"]?Fs(e[".sv"],t):void xe(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},Ms=function(e,t,n){if("timestamp"===e)return n.timestamp;xe(!1,"Unexpected server value: "+e)},Fs=function(e,t,n){e.hasOwnProperty("increment")||xe(!1,"Unexpected server value: "+JSON.stringify(e,null,2));const r=e.increment;"number"!==typeof r&&xe(!1,"Unexpected increment value: "+r);const i=t.node();if(xe(null!==i&&"undefined"!==typeof i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const a=i.getValue();return"number"!==typeof a?r:a+r},$s=function(e,t,n,r){return Us(t,new Os(n,e),r)},zs=function(e,t,n){return Us(e,new As(t),n)};function Us(e,t,n){const r=e.getPriority().val(),i=Ls(r,t.getImmediateChild(".priority"),n);let a;if(e.isLeafNode()){const r=e,a=Ls(r.getValue(),t,n);return a!==r.getValue()||i!==r.getPriority().val()?new bi(a,Ri(i)):e}{const r=e;return a=r,i!==r.getPriority().val()&&(a=a.updatePriority(new bi(i))),r.forEachChild(wi,((e,r)=>{const i=Us(r,t.getImmediateChild(e),n);i!==r&&(a=a.updateImmediateChild(e,i))})),a}}class Bs{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{children:{},childCount:0};this.name=e,this.parent=t,this.node=n}}function Ws(e,t){let n=t instanceof Fr?t:new Fr(t),r=e,i=zr(n);for(;null!==i;){const e=Je(r.node.children,i)||{children:{},childCount:0};r=new Bs(i,r,e),n=Br(n),i=zr(n)}return r}function qs(e){return e.node.value}function Hs(e,t){e.node.value=t,Gs(e)}function Vs(e){return e.node.childCount>0}function Qs(e,t){or(e.node.children,((n,r)=>{t(new Bs(n,e,r))}))}function Ks(e,t,n,r){n&&!r&&t(e),Qs(e,(e=>{Ks(e,t,!0,r)})),n&&r&&t(e)}function Ys(e){return new Fr(null===e.parent?e.name:Ys(e.parent)+"/"+e.name)}function Gs(e){null!==e.parent&&function(e,t,n){const r=function(e){return void 0===qs(e)&&!Vs(e)}(n),i=Ge(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,Gs(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,Gs(e))}(e.parent,e.name,e)}const Js=/[\[\].#$\/\u0000-\u001F\u007F]/,Xs=/[\[\].#$\u0000-\u001F\u007F]/,Zs=10485760,eo=function(e){return"string"===typeof e&&0!==e.length&&!Js.test(e)},to=function(e){return"string"===typeof e&&0!==e.length&&!Xs.test(e)},no=function(e){return null===e||"string"===typeof e||"number"===typeof e&&!Zn(e)||e&&"object"===typeof e&&Ge(e,".sv")},ro=function(e,t,n){const r=n instanceof Fr?new Xr(n,e):n;if(void 0===t)throw new Error(e+"contains undefined "+ei(r));if("function"===typeof t)throw new Error(e+"contains a function "+ei(r)+" with contents = "+t.toString());if(Zn(t))throw new Error(e+"contains "+t.toString()+" "+ei(r));if("string"===typeof t&&t.length>Zs/3&&it(t)>Zs)throw new Error(e+"contains a string greater than "+Zs+" utf8 bytes "+ei(r)+" ('"+t.substring(0,50)+"...')");if(t&&"object"===typeof t){let n=!1,i=!1;if(or(t,((t,a)=>{if(".value"===t)n=!0;else if(".priority"!==t&&".sv"!==t&&(i=!0,!eo(t)))throw new Error(e+" contains an invalid key ("+t+") "+ei(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');!function(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=it(t),Zr(e)}(r,t),ro(e,a,r),function(e){const t=e.parts_.pop();e.byteLength_-=it(t),e.parts_.length>0&&(e.byteLength_-=1)}(r)})),n&&i)throw new Error(e+' contains ".value" child '+ei(r)+" in addition to actual children.")}},io=function(e,t,n,r){if(r&&void 0===t)return;const i=rt(e,"values");if(!t||"object"!==typeof t||Array.isArray(t))throw new Error(i+" must be an object containing the children to replace.");const a=[];or(t,((e,t)=>{const r=new Fr(e);if(ro(i,t,Vr(n,r)),".priority"===Wr(r)&&!no(t))throw new Error(i+"contains an invalid value for '"+r.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(r)})),function(e,t){let n,r;for(n=0;n<t.length;n++){r=t[n];const i=qr(r);for(let t=0;t<i.length;t++)if(".priority"===i[t]&&t===i.length-1);else if(!eo(i[t]))throw new Error(e+"contains an invalid key ("+i[t]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}t.sort(Yr);let i=null;for(n=0;n<t.length;n++){if(r=t[n],null!==i&&Jr(i,r))throw new Error(e+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,a)},ao=function(e,t,n,r){if((!r||void 0!==n)&&!to(n))throw new Error(rt(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},so=function(e,t){const n=t.path.toString();if("string"!==typeof t.repoInfo.host||0===t.repoInfo.host.length||!eo(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),to(e)}(n))throw new Error(rt(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class oo{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function lo(e,t){let n=null;for(let r=0;r<t.length;r++){const i=t[r],a=i.getPath();null===n||Gr(a,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:a}),n.events.push(i)}n&&e.eventLists_.push(n)}function uo(e,t,n){lo(e,n),ho(e,(e=>Gr(e,t)))}function co(e,t,n){lo(e,n),ho(e,(e=>Jr(e,t)||Jr(t,e)))}function ho(e,t){e.recursionDepth_++;let n=!0;for(let r=0;r<e.eventLists_.length;r++){const i=e.eventLists_[r];if(i){t(i.path)?(fo(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}}n&&(e.eventLists_=[]),e.recursionDepth_--}function fo(e){for(let t=0;t<e.events.length;t++){const n=e.events[t];if(null!==n){e.events[t]=null;const r=n.getEventRunner();Hn&&Kn("event: "+n.toString()),dr(r)}}}const po="repo_interrupt";class mo{constructor(e,t,n,r){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new oo,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Vi(),this.transactionQueueTree_=new Bs,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function go(e,t,n){if(e.stats_=xr(e.repoInfo_),e.forceRestClient_||("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new qi(e.repoInfo_,((t,n,r,i)=>{_o(e,t,n,r,i)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((()=>bo(e,!0)),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Ke(n)}catch(Sl){throw new Error("Invalid authOverride provided: "+Sl)}}e.persistentConnection_=new ri(e.repoInfo_,t,((t,n,r,i)=>{_o(e,t,n,r,i)}),(t=>{bo(e,t)}),(t=>{!function(e,t){or(t,((t,n)=>{wo(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((t=>{e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((t=>{e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=function(e,t){const n=e.toString();return Er[n]||(Er[n]=t()),Er[n]}(e.repoInfo_,(()=>new Gi(e.stats_,e.server_))),e.infoData_=new Hi,e.infoSyncTree_=new ps({startListening:(t,n,r,i)=>{let a=[];const s=e.infoData_.getNode(t._path);return s.isEmpty()||(a=vs(e.infoSyncTree_,t._path,s),setTimeout((()=>{i("ok")}),0)),a},stopListening:()=>{}}),wo(e,"connected",!1),e.serverSyncTree_=new ps({startListening:(t,n,r,i)=>(e.server_.listen(t,r,n,((n,r)=>{const a=i(n,r);co(e.eventQueue_,t._path,a)})),[]),stopListening:(t,n)=>{e.server_.unlisten(t,n)}})}function yo(e){const t=e.infoData_.getNode(new Fr(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function vo(e){return(t=(t={timestamp:yo(e)})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t}function _o(e,t,n,r,i){e.dataUpdateCount++;const a=new Fr(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;let s=[];if(i)if(r){const t=Ze(n,(e=>Ri(e)));s=function(e,t,n,r){const i=Ps(e,r);if(i){const r=Rs(i),a=r.path,s=r.queryId,o=Kr(a,t),l=ha.fromObject(n);return js(e,a,new na(Xi(s),o,l))}return[]}(e.serverSyncTree_,a,t,i)}else{const t=Ri(n);s=bs(e.serverSyncTree_,a,t,i)}else if(r){const t=Ze(n,(e=>Ri(e)));s=function(e,t,n){const r=ha.fromObject(n);return Ss(e,new na({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,a,t)}else{const t=Ri(n);s=vs(e.serverSyncTree_,a,t)}let o=a;s.length>0&&(o=Io(e,a)),co(e.eventQueue_,o,s)}function bo(e,t){wo(e,"connected",t),!1===t&&function(e){Eo(e,"onDisconnectEvents");const t=vo(e),n=Vi();Ki(e.onDisconnect_,$r(),((r,i)=>{const a=$s(r,i,e.serverSyncTree_,t);Qi(n,r,a)}));let r=[];Ki(n,$r(),((t,n)=>{r=r.concat(vs(e.serverSyncTree_,t,n));const i=Ao(e,t);Io(e,i)})),e.onDisconnect_=Vi(),co(e.eventQueue_,$r(),r)}(e)}function wo(e,t,n){const r=new Fr("/.info/"+t),i=Ri(n);e.infoData_.updateSnapshot(r,i);const a=vs(e.infoSyncTree_,r,i);co(e.eventQueue_,r,a)}function Co(e){return e.nextWriteId_++}function ko(e,t,n){let r;r=".info"===zr(t._path)?_s(e.infoSyncTree_,t,n):_s(e.serverSyncTree_,t,n),uo(e.eventQueue_,t._path,r)}function So(e){e.persistentConnection_&&e.persistentConnection_.interrupt(po)}function Eo(e){let t="";e.persistentConnection_&&(t=e.persistentConnection_.id+":");for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];Kn(t,...r)}function xo(e,t,n,r){t&&dr((()=>{if("ok"===n)t(null);else{const e=(n||"error").toUpperCase();let i=e;r&&(i+=": "+r);const a=new Error(i);a.code=e,t(a)}}))}function No(e,t,n){return Cs(e.serverSyncTree_,t,n)||Ii.EMPTY_NODE}function To(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transactionQueueTree_;if(t||Do(e,t),qs(t)){const n=Ro(e,t);xe(n.length>0,"Sending zero length transaction queue");n.every((e=>0===e.status))&&function(e,t,n){const r=n.map((e=>e.currentWriteId)),i=No(e,t,r);let a=i;const s=i.hash();for(let u=0;u<n.length;u++){const e=n[u];xe(0===e.status,"tryToSendTransactionQueue_: items in queue should all be run."),e.status=1,e.retryCount++;const r=Kr(t,e.path);a=a.updateChild(r,e.currentOutputSnapshotRaw)}const o=a.val(!0),l=t;e.server_.put(l.toString(),o,(r=>{Eo(e,"transaction put response",{path:l.toString(),status:r});let i=[];if("ok"===r){const r=[];for(let t=0;t<n.length;t++)n[t].status=2,i=i.concat(ys(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&r.push((()=>n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved))),n[t].unwatcher();Do(e,Ws(e.transactionQueueTree_,t)),To(e,e.transactionQueueTree_),co(e.eventQueue_,t,i);for(let e=0;e<r.length;e++)dr(r[e])}else{if("datastale"===r)for(let e=0;e<n.length;e++)3===n[e].status?n[e].status=4:n[e].status=0;else{Xn("transaction at "+l.toString()+" failed: "+r);for(let e=0;e<n.length;e++)n[e].status=4,n[e].abortReason=r}Io(e,t)}}),s)}(e,Ys(t),n)}else Vs(t)&&Qs(t,(t=>{To(e,t)}))}function Io(e,t){const n=Po(e,t),r=Ys(n);return function(e,t,n){if(0===t.length)return;const r=[];let i=[];const a=t.filter((e=>0===e.status)),s=a.map((e=>e.currentWriteId));for(let l=0;l<t.length;l++){const a=t[l],u=Kr(n,a.path);let c,d=!1;if(xe(null!==u,"rerunTransactionsUnderNode_: relativePath should not be null."),4===a.status)d=!0,c=a.abortReason,i=i.concat(ys(e.serverSyncTree_,a.currentWriteId,!0));else if(0===a.status)if(a.retryCount>=25)d=!0,c="maxretry",i=i.concat(ys(e.serverSyncTree_,a.currentWriteId,!0));else{const n=No(e,a.path,s);a.currentInputSnapshot=n;const r=t[l].update(n.val());if(void 0!==r){ro("transaction failed: Data returned ",r,a.path);let t=Ri(r);"object"===typeof r&&null!=r&&Ge(r,".priority")||(t=t.updatePriority(n.getPriority()));const o=a.currentWriteId,l=vo(e),u=zs(t,n,l);a.currentOutputSnapshotRaw=t,a.currentOutputSnapshotResolved=u,a.currentWriteId=Co(e),s.splice(s.indexOf(o),1),i=i.concat(ms(e.serverSyncTree_,a.path,u,a.currentWriteId,a.applyLocally)),i=i.concat(ys(e.serverSyncTree_,o,!0))}else d=!0,c="nodata",i=i.concat(ys(e.serverSyncTree_,a.currentWriteId,!0))}co(e.eventQueue_,n,i),i=[],d&&(t[l].status=2,o=t[l].unwatcher,setTimeout(o,Math.floor(0)),t[l].onComplete&&("nodata"===c?r.push((()=>t[l].onComplete(null,!1,t[l].currentInputSnapshot))):r.push((()=>t[l].onComplete(new Error(c),!1,null)))))}var o;Do(e,e.transactionQueueTree_);for(let l=0;l<r.length;l++)dr(r[l]);To(e,e.transactionQueueTree_)}(e,Ro(e,n),r),r}function Po(e,t){let n,r=e.transactionQueueTree_;for(n=zr(t);null!==n&&void 0===qs(r);)r=Ws(r,n),n=zr(t=Br(t));return r}function Ro(e,t){const n=[];return jo(e,t,n),n.sort(((e,t)=>e.order-t.order)),n}function jo(e,t,n){const r=qs(t);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);Qs(t,(t=>{jo(e,t,n)}))}function Do(e,t){const n=qs(t);if(n){let e=0;for(let t=0;t<n.length;t++)2!==n[t].status&&(n[e]=n[t],e++);n.length=e,Hs(t,n.length>0?n:void 0)}Qs(t,(t=>{Do(e,t)}))}function Ao(e,t){const n=Ys(Po(e,t)),r=Ws(e.transactionQueueTree_,t);return function(e,t,n){let r=n?e:e.parent;for(;null!==r;){if(t(r))return!0;r=r.parent}}(r,(t=>{Oo(e,t)})),Oo(e,r),Ks(r,(t=>{Oo(e,t)})),n}function Oo(e,t){const n=qs(t);if(n){const r=[];let i=[],a=-1;for(let t=0;t<n.length;t++)3===n[t].status||(1===n[t].status?(xe(a===t-1,"All SENT items should be at beginning of queue."),a=t,n[t].status=3,n[t].abortReason="set"):(xe(0===n[t].status,"Unexpected transaction status in abort"),n[t].unwatcher(),i=i.concat(ys(e.serverSyncTree_,n[t].currentWriteId,!0)),n[t].onComplete&&r.push(n[t].onComplete.bind(null,new Error("set"),!1,null))));-1===a?Hs(t,void 0):n.length=a+1,co(e.eventQueue_,Ys(t),i);for(let e=0;e<r.length;e++)dr(r[e])}}const Lo=function(e,t){const n=Mo(e),r=n.namespace;"firebase.com"===n.domain&&Jn(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||Jn("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Xn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");const i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new wr(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new Fr(n.pathString)}},Mo=function(e){let t="",n="",r="",i="",a="",s=!0,o="https",l=443;if("string"===typeof e){let u=e.indexOf("//");u>=0&&(o=e.substring(0,u-1),e=e.substring(u+2));let c=e.indexOf("/");-1===c&&(c=e.length);let d=e.indexOf("?");-1===d&&(d=e.length),t=e.substring(0,Math.min(c,d)),c<d&&(i=function(e){let t="";const n=e.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let e=n[r];try{e=decodeURIComponent(e.replace(/\+/g," "))}catch(Sl){}t+="/"+e}return t}(e.substring(c,d)));const h=function(e){const t={};"?"===e.charAt(0)&&(e=e.substring(1));for(const n of e.split("&")){if(0===n.length)continue;const r=n.split("=");2===r.length?t[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Xn(`Invalid query segment '${n}' in query '${e}'`)}return t}(e.substring(Math.min(e.length,d)));u=t.indexOf(":"),u>=0?(s="https"===o||"wss"===o,l=parseInt(t.substring(u+1),10)):u=t.length;const f=t.slice(0,u);if("localhost"===f.toLowerCase())n="localhost";else if(f.split(".").length<=2)n=f;else{const e=t.indexOf(".");r=t.substring(0,e).toLowerCase(),n=t.substring(e+1),a=r}"ns"in h&&(a=h.ns)}return{host:t,port:l,domain:n,subdomain:r,secure:s,scheme:o,pathString:i,namespace:a}},Fo="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz";!function(){let e=0;const t=[]}();class $o{constructor(e,t,n,r){this.eventType=e,this.eventRegistration=t,this.snapshot=n,this.prevName=r}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Ke(this.snapshot.exportVal())}}class zo{constructor(e,t,n){this.eventRegistration=e,this.error=t,this.path=n}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class Uo{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return xe(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class Bo{constructor(e,t,n,r){this._repo=e,this._path=t,this._queryParams=n,this._orderByCalled=r}get key(){return Qr(this._path)?null:Wr(this._path)}get ref(){return new Wo(this._repo,this._path)}get _queryIdentifier(){const e=Wi(this._queryParams),t=ar(e);return"{}"===t?"default":t}get _queryObject(){return Wi(this._queryParams)}isEqual(e){if(!((e=at(e))instanceof Bo))return!1;const t=this._repo===e._repo,n=Gr(this._path,e._path),r=this._queryIdentifier===e._queryIdentifier;return t&&n&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(e){let t="";for(let n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}class Wo extends Bo{constructor(e,t){super(e,t,new Ui,!1)}get parent(){const e=Hr(this._path);return null===e?null:new Wo(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class qo{constructor(e,t,n){this._node=e,this.ref=t,this._index=n}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new Fr(e),n=Vo(this.ref,e);return new qo(this._node.getChild(t),n,wi)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){if(this._node.isLeafNode())return!1;return!!this._node.forEachChild(this._index,((t,n)=>e(new qo(n,Vo(this.ref,t),wi))))}hasChild(e){const t=new Fr(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Ho(e,t){return(e=at(e))._checkNotDeleted("ref"),void 0!==t?Vo(e._root,t):e._root}function Vo(e,t){var n,r,i,a;return null===zr((e=at(e))._path)?(n="child",r="path",a=!1,(i=t)&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),ao(n,r,i,a)):ao("child","path",t,!1),new Wo(e._repo,Vr(e._path,t))}function Qo(e,t){io("update",t,e._path,!1);const n=new ze;return function(e,t,n,r){Eo(e,"update",{path:t.toString(),value:n});let i=!0;const a=vo(e),s={};if(or(n,((n,r)=>{i=!1,s[n]=$s(Vr(t,n),Ri(r),e.serverSyncTree_,a)})),i)Kn("update() called with empty data.  Don't do anything."),xo(0,r,"ok",void 0);else{const i=Co(e),a=gs(e.serverSyncTree_,t,s,i);lo(e.eventQueue_,a),e.server_.merge(t.toString(),n,((n,a)=>{const s="ok"===n;s||Xn("update at "+t+" failed: "+n);const o=ys(e.serverSyncTree_,i,!s),l=o.length>0?Io(e,t):t;co(e.eventQueue_,l,o),xo(0,r,n,a)})),or(n,(n=>{const r=Ao(e,Vr(t,n));Io(e,r)})),co(e.eventQueue_,t,[])}}(e._repo,e._path,t,n.wrapCallback((()=>{}))),n.promise}function Ko(e){e=at(e);const t=new Uo((()=>{})),n=new Yo(t);return function(e,t,n){const r=ks(e.serverSyncTree_,t);return null!=r?Promise.resolve(r):e.server_.get(t).then((r=>{const i=Ri(r).withIndex(t._queryParams.getIndex());let a;if(ws(e.serverSyncTree_,t,n,!0),t._queryParams.loadsAllData())a=vs(e.serverSyncTree_,t._path,i);else{const n=Ts(e.serverSyncTree_,t);a=bs(e.serverSyncTree_,t._path,i,n)}return co(e.eventQueue_,t._path,a),_s(e.serverSyncTree_,t,n,null,!0),i}),(n=>(Eo(e,"get for query "+Ke(t)+" failed: "+n),Promise.reject(new Error(n)))))}(e._repo,e,n).then((t=>new qo(t,new Wo(e._repo,e._path),e._queryParams.getIndex())))}class Yo{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const n=t._queryParams.getIndex();return new $o("value",this,new qo(e.snapshotNode,new Wo(t._repo,t._path),n))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new zo(this,e,t):null}matches(e){return e instanceof Yo&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class Go{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new zo(this,e,t):null}createEvent(e,t){xe(null!=e.childName,"Child events should have a childName.");const n=Vo(new Wo(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new $o(e.type,this,new qo(e.snapshotNode,n,r),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof Go&&(this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)))}hasAnyCallback(){return!!this.callbackContext}}function Jo(e,t,n,r,i){let a;if("object"===typeof r&&(a=void 0,i=r),"function"===typeof r&&(a=r),i&&i.onlyOnce){const t=n,r=(n,r)=>{ko(e._repo,e,o),t(n,r)};r.userCallback=n.userCallback,r.context=n.context,n=r}const s=new Uo(n,a||void 0),o="value"===t?new Yo(s):new Go(t,s);return function(e,t,n){let r;r=".info"===zr(t._path)?ws(e.infoSyncTree_,t,n):ws(e.serverSyncTree_,t,n),uo(e.eventQueue_,t._path,r)}(e._repo,e,o),()=>ko(e._repo,e,o)}function Xo(e,t,n,r){return Jo(e,"value",t,n,r)}!function(e){xe(!es,"__referenceConstructor has already been defined"),es=e}(Wo),function(e){xe(!ts,"__referenceConstructor has already been defined"),ts=e}(Wo);const Zo={};let el=!1;function tl(e,t,n,r,i){let a=r||e.options.databaseURL;void 0===a&&(e.options.projectId||Jn("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Kn("Using default host for project ",e.options.projectId),a=`${e.options.projectId}-default-rtdb.firebaseio.com`);let s,o,l=Lo(a,i),u=l.repoInfo;"undefined"!==typeof process&&(o={NODE_ENV:"production",PUBLIC_URL:"/trading-games",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"your_api_key_here",REACT_APP_FIREBASE_AUTH_DOMAIN:"your_auth_domain",REACT_APP_FIREBASE_PROJECT_ID:"your_project_id",REACT_APP_FIREBASE_STORAGE_BUCKET:"your_storage_bucket",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"your_sender_id",REACT_APP_FIREBASE_APP_ID:"your_app_id",REACT_APP_FIREBASE_MEASUREMENT_ID:"your_measurement_id",REACT_APP_FIREBASE_DATABASE_URL:"your_database_url"}.FIREBASE_DATABASE_EMULATOR_HOST),o?(s=!0,a=`http://${o}?ns=${u.namespace}`,l=Lo(a,i),u=l.repoInfo):s=!l.repoInfo.secure;const c=i&&s?new mr(mr.OWNER):new pr(e.name,e.options,t);so("Invalid Firebase Database URL",l),Qr(l.path)||Jn("Database URL must point to the root of a Firebase Database (not including a child path).");const d=function(e,t,n,r){let i=Zo[t.name];i||(i={},Zo[t.name]=i);let a=i[e.toURLString()];a&&Jn("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return a=new mo(e,el,n,r),i[e.toURLString()]=a,a}(u,e,c,new fr(e.name,n));return new nl(d,e)}class nl{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(go(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Wo(this._repo,$r())),this._rootInternal}_delete(){return null!==this._rootInternal&&(!function(e,t){const n=Zo[t];n&&n[e.key]===e||Jn(`Database ${t}(${e.repoInfo_}) has already been deleted.`),So(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Jn("Cannot call "+e+" on a deleted database.")}}ri.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},ri.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};!function(e){On("11.0.1"),gn(new st("database",((e,t)=>{let{instanceIdentifier:n}=t;return tl(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n)}),"PUBLIC").setMultipleInstances(!0)),wn(jn,Dn,e),wn(jn,Dn,"esm2017")}();wn("firebase","11.0.1","app");const rl=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:cn;const t=hn.get(e);if(!t&&e===cn&&$e())return bn();if(!t)throw vn.create("no-app",{appName:e});return t}(),t=arguments.length>1?arguments[1]:void 0;const n=yn(e,"database").getImmediate({identifier:t});if(!n._instanceStarted){const e=Fe("database");e&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e=at(e),e._checkNotDeleted("useEmulator"),e._instanceStarted&&Jn("Cannot call useEmulator() after instance has already been initialized.");const i=e._repoInternal;let a;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Jn('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new mr(mr.OWNER);else if(r.mockUserToken){const t="string"===typeof r.mockUserToken?r.mockUserToken:function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[je(JSON.stringify({alg:"none",type:"JWT"})),je(JSON.stringify(a)),""].join(".")}(r.mockUserToken,e.app.options.projectId);a=new mr(t)}!function(e,t,n,r){e.repoInfo_=new wr(`${t}:${n}`,!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0),r&&(e.authTokenProvider_=r)}(i,t,n,a)}(n,...e)}return n}(bn({apiKey:"AIzaSyAcAgMeP-HwxgyCdE5AEgxvRuMjapfZFq0",authDomain:"trading-games.firebaseapp.com",projectId:"trading-games",storageBucket:"trading-games.firebasestorage.app",messagingSenderId:"313563345675",appId:"1:313563345675:web:0a873f9e1ca9b3da19280e",measurementId:"G-SC14R44CHP",databaseURL:"https://trading-games-default-rtdb.europe-west1.firebasedatabase.app/"})),il={randomUUID:"undefined"!==typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let al;const sl=new Uint8Array(16);function ol(){if(!al){if("undefined"===typeof crypto||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");al=crypto.getRandomValues.bind(crypto)}return al(sl)}const ll=[];for(let El=0;El<256;++El)ll.push((El+256).toString(16).slice(1));function ul(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(ll[e[t+0]]+ll[e[t+1]]+ll[e[t+2]]+ll[e[t+3]]+"-"+ll[e[t+4]]+ll[e[t+5]]+"-"+ll[e[t+6]]+ll[e[t+7]]+"-"+ll[e[t+8]]+ll[e[t+9]]+"-"+ll[e[t+10]]+ll[e[t+11]]+ll[e[t+12]]+ll[e[t+13]]+ll[e[t+14]]+ll[e[t+15]]).toLowerCase()}const cl=function(e,t,n){if(il.randomUUID&&!t&&!e)return il.randomUUID();const r=(e=e||{}).random||(e.rng||ol)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=r[e];return t}return ul(r)};var dl=n(579);const hl=function(){const e=ne(),[t,n]=(0,i.useState)(!1);return(0,dl.jsx)("div",{className:"game-container fade-in",children:(0,dl.jsx)("div",{className:"games-grid",children:[{id:"rps",title:"Rock Paper Scissors",description:"Classic game of strategy. Challenge other players and climb the leaderboard!",icon:"\u270c\ufe0f",minPlayers:2,maxPlayers:2},{id:"speed-trading",title:"Speed Trading",description:"React fast to trading opportunities! First to grab the best trades wins.",icon:"\ud83d\udcc8",minPlayers:2,maxPlayers:6},{id:"multiplication",title:"Speed Math Challenge",description:"Race against others to solve multiplication problems. Test your mental math skills!",icon:"\ud83e\uddee",minPlayers:2,maxPlayers:4},{id:"liars-dice",title:"Liar's Dice",description:"A thrilling game of deception and probability. Bluff your way to victory!",icon:"\ud83c\udfb2",minPlayers:2,maxPlayers:6}].map((r=>(0,dl.jsxs)("div",{className:"game-card",children:[(0,dl.jsx)("div",{className:"game-icon",children:r.icon}),(0,dl.jsx)("h3",{children:r.title}),(0,dl.jsx)("p",{children:r.description}),(0,dl.jsxs)("div",{className:"game-info",children:[(0,dl.jsxs)("span",{children:["\ud83d\udc65 ",r.minPlayers,"-",r.maxPlayers," Players"]}),(0,dl.jsx)("span",{children:"\ud83c\udfae Real-time Trading"})]}),(0,dl.jsx)("button",{onClick:()=>(async t=>{n(!0);try{const n=cl(),r=`${window.location.origin+window.location.pathname}#/game/${n}?type=${t}`;localStorage.setItem("lastGameUrl",r),e(`/game/${n}?type=${t}`)}catch(Gn){console.error("Error creating game:",Gn),alert("Failed to create game. Please try again.")}finally{n(!1)}})(r.id),disabled:t,className:"create-game-btn",children:t?"Creating Game...":"Start Trading"})]},r.id)))})})},fl=e=>Array.from({length:e},(()=>Math.floor(6*Math.random())+1));const pl=function(e){let{message:t="Loading..."}=e;return(0,dl.jsxs)("div",{className:"loading-screen",children:[(0,dl.jsx)("div",{className:"loader"}),(0,dl.jsx)("p",{children:t})]})};const ml=function(e){var t,n,r;let{game:a,gameId:s,playerName:o}=e;const[l,u]=(0,i.useState)(null),[c,d]=(0,i.useState)(null),[h,f]=(0,i.useState)(!1),[p,m]=(0,i.useState)(!1),[g,y]=(0,i.useState)(null),v=ne(),_=null===(t=a.players[o])||void 0===t?void 0:t.isHost,b=Object.keys(a.players||{}).length;(0,i.useEffect)((()=>{null!==a&&void 0!==a&&a.roundResult?(d(a.roundResult),f(!0)):(f(!1),d(null))}),[null===a||void 0===a?void 0:a.roundResult]),(0,i.useEffect)((()=>{if(b>2){var e;const t=(null===(e=a.players[o])||void 0===e?void 0:e.joinedAt)||Date.now();Object.values(a.players).every((e=>(e.joinedAt||0)<=t))&&(alert("Game is full!"),v("/"))}}),[b,o,a.players]);const w=async e=>{const[t,n]=e,r=((e,t)=>e.choice===t.choice?"tie":{rock:"scissors",paper:"rock",scissors:"paper"}[e.choice]===t.choice?e.name:t.name)({name:t[0],choice:t[1].choice},{name:n[0],choice:n[1].choice});await Qo(Ho(rl),{[`/games/${s}/roundResult`]:{winner:r,player1:{name:t[0],choice:t[1].choice},player2:{name:n[0],choice:n[1].choice}}}),setTimeout((()=>C(e,r)),3e3)},C=async(e,t)=>{const n={};"tie"!==t&&e.forEach((e=>{let[r,i]=e;const a=i.score||0;n[`/games/${s}/players/${r}/score`]=a+(r===t?50:-50)})),e.forEach((e=>{let[t]=e;n[`/games/${s}/players/${t}/choice`]=null,n[`/games/${s}/players/${t}/ready`]=!1})),n[`/games/${s}/roundResult`]=null,await Qo(Ho(rl),n),u(null)},k=async()=>{try{m(!0),y(null);const e={[`/games/${s}/status`]:"active",[`/games/${s}/startTime`]:Date.now(),[`/games/${s}/lastUpdated`]:Date.now()};Object.keys(a.players).forEach((t=>{e[`/games/${s}/players/${t}/choice`]=null,e[`/games/${s}/players/${t}/ready`]=!1,e[`/games/${s}/players/${t}/score`]=0})),await Qo(Ho(rl),e)}catch(g){console.error("Error starting game:",g),y("Failed to start game. Please try again.")}finally{m(!1)}};return p?(0,dl.jsx)(pl,{}):a.status&&"waiting"!==a.status?(0,dl.jsxs)("div",{className:"rps-game",children:[(0,dl.jsx)("h3",{children:"Rock Paper Scissors"}),(0,dl.jsx)("div",{className:"players-section",children:(0,dl.jsx)("div",{className:"players-grid",children:Object.entries(a.players).map((e=>{let[t,n]=e;return(0,dl.jsxs)("div",{className:"player-card "+(t===o?"current-player":""),children:[(0,dl.jsxs)("div",{className:"player-info",children:[(0,dl.jsx)("span",{className:"player-name",children:t}),(0,dl.jsxs)("span",{className:"player-score",children:[n.score," coins"]})]}),(0,dl.jsxs)("div",{className:"player-status",children:[n.ready&&(0,dl.jsx)("span",{className:"ready-status",children:"Ready"}),n.isHost&&(0,dl.jsx)("span",{className:"host-badge",children:"Host"})]})]},t)}))})}),(0,dl.jsxs)("div",{className:"rps-controls",children:[(0,dl.jsx)("div",{className:"choice-buttons",children:["rock","paper","scissors"].map((e=>{var t;return(0,dl.jsxs)("button",{className:"choice-btn "+(l===e?"selected":""),onClick:()=>u(e),disabled:null===(t=a.players[o])||void 0===t?void 0:t.ready,children:[(0,dl.jsx)("span",{className:"choice-icon",children:"rock"===e?"\u270a":"paper"===e?"\u270b":"\u270c\ufe0f"}),(0,dl.jsx)("span",{className:"choice-text",children:e})]},e)}))}),(0,dl.jsx)("button",{className:"play-button",onClick:async()=>{var e;if(null===a||void 0===a||null===(e=a.players)||void 0===e||!e[o])return void alert("Game state error. Please rejoin.");if(!l)return void alert("Please make a choice!");const t={};t[`/games/${s}/players/${o}/choice`]=l,t[`/games/${s}/players/${o}/ready`]=!0;try{await Qo(Ho(rl),t);const e=Ho(rl,`games/${s}`),n=(await Ko(e)).val(),r=Object.entries(n.players);2===r.length&&r.every((e=>{let[t,n]=e;return n.ready&&n.choice}))&&w(r)}catch(g){console.error("Error updating game:",g)}},disabled:!l||(null===(n=a.players[o])||void 0===n?void 0:n.ready),children:null!==(r=a.players[o])&&void 0!==r&&r.ready?"Waiting for opponent...":"Play"})]}),h&&c&&(0,dl.jsx)("div",{className:"game-result",children:(0,dl.jsxs)("div",{className:"result-content",children:[(0,dl.jsxs)("div",{className:"player-choice",children:[(0,dl.jsx)("span",{className:"choice-icon large",children:"rock"===c.player1.choice?"\u270a":"paper"===c.player1.choice?"\u270b":"\u270c\ufe0f"}),(0,dl.jsx)("span",{children:c.player1.name})]}),(0,dl.jsx)("div",{className:"vs",children:"VS"}),(0,dl.jsxs)("div",{className:"player-choice",children:[(0,dl.jsx)("span",{className:"choice-icon large",children:"rock"===c.player2.choice?"\u270a":"paper"===c.player2.choice?"\u270b":"\u270c\ufe0f"}),(0,dl.jsx)("span",{children:c.player2.name})]}),(0,dl.jsx)("div",{className:"result-message",children:"tie"===c.winner?"It's a tie!":c.winner===o?"You won! \ud83c\udf89":"You lost..."})]})})]}):(0,dl.jsxs)("div",{className:"rps-game",children:[(0,dl.jsx)("h3",{children:"Rock Paper Scissors"}),(0,dl.jsxs)("div",{className:"lobby-info",children:[(0,dl.jsxs)("h4",{children:["Players in Lobby (",b,"/2)"]}),(0,dl.jsx)("div",{className:"players-grid",children:Object.entries(a.players).map((e=>{let[t,n]=e;return(0,dl.jsxs)("div",{className:"player-card",children:[(0,dl.jsxs)("div",{className:"player-info",children:[(0,dl.jsx)("span",{className:"player-name",children:t}),n.score&&(0,dl.jsxs)("span",{className:"player-score",children:[n.score," coins"]})]}),n.isHost&&(0,dl.jsx)("span",{className:"host-badge",children:"Host"})]},t)}))})]}),_?(0,dl.jsx)("button",{onClick:k,className:"start-button",disabled:b<2,children:b<2?"Waiting for Players...":"Start Game"}):(0,dl.jsx)("div",{className:"waiting-message",children:"Waiting for host to start the game..."}),g&&(0,dl.jsx)("div",{className:"error-message",children:g})]})};const gl=function(e){var t,n,r,a;let{game:s,gameId:o,playerName:l}=e;const[u,c]=(0,i.useState)({digit1:1,digit2:1,numberOfProblems:5}),[d,h]=(0,i.useState)([]),[f,p]=(0,i.useState)(""),[m,g]=(0,i.useState)(0),[y,v]=(0,i.useState)(!1),[_,b]=(0,i.useState)(null),[w,C]=(0,i.useState)(0),[k,S]=(0,i.useState)(!1),[E,x]=(0,i.useState)(null),[N,T]=(0,i.useState)(null),I=null===(t=s.players[l])||void 0===t?void 0:t.isHost;(0,i.useEffect)((()=>{s.problems&&(h(s.problems),"active"!==s.status||y||(v(!0),b(s.startTime)))}),[s.problems,s.status]),(0,i.useEffect)((()=>{var e;if(y&&(null===(e=s.players[l])||void 0===e||!e.completed)){const e=setInterval((()=>{_&&C(Math.floor((Date.now()-_)/1e3))}),100);return()=>clearInterval(e)}}),[y,s.players,l,_]),(0,i.useEffect)((()=>{"active"===s.status&&s.startTime&&(g(0),p(""),v(!0),C(0),b(s.startTime))}),[s.status,s.startTime]);const P=()=>{const e=[];for(let t=0;t<u.numberOfProblems;t++){const t=Math.floor(Math.random()*(10**u.digit1-2))+2,n=Math.floor(Math.random()*(10**u.digit2-2))+2;e.push({num1:t,num2:n,answer:t*n})}return e},R=async()=>{const e=P(),t={[`/games/${o}/problems`]:e,[`/games/${o}/status`]:"active",[`/games/${o}/startTime`]:Date.now()};Object.keys(s.players).forEach((e=>{t[`/games/${o}/players/${e}/completed`]=!1,t[`/games/${o}/players/${e}/currentProblem`]=0,t[`/games/${o}/players/${e}/finishTime`]=null})),await Qo(Ho(rl),t)},j=(e,t)=>{let n=parseInt(t);e.includes("digit")?n=Math.min(Math.max(1,n),3):"numberOfProblems"===e&&(n=Math.min(Math.max(1,n),100)),c((t=>({...t,[e]:n})))},D=async()=>{try{S(!0),T(null),x(3);for(let n=2;n>=0;n--)await new Promise((e=>setTimeout(e,1e3))),x(n);const e=P(),t={[`/games/${o}/problems`]:e,[`/games/${o}/status`]:"waiting",[`/games/${o}/startTime`]:null,[`/games/${o}/lastUpdated`]:Date.now()};Object.keys(s.players).forEach((e=>{t[`/games/${o}/players/${e}/completed`]=!1,t[`/games/${o}/players/${e}/currentProblem`]=0,t[`/games/${o}/players/${e}/finishTime`]=null,t[`/games/${o}/players/${e}/ready`]=!1})),await Qo(Ho(rl),t),await new Promise((e=>setTimeout(e,1e3))),await Qo(Ho(rl),{[`/games/${o}/status`]:"active",[`/games/${o}/startTime`]:Date.now()})}catch(N){console.error("Error resetting game:",N),T("Failed to reset game. Please try again.")}finally{S(!1),x(null)}};return k?(0,dl.jsxs)("div",{className:"game-loading",children:[(0,dl.jsx)(pl,{}),null!==E&&(0,dl.jsxs)("div",{className:"countdown",children:[(0,dl.jsx)("h2",{children:"New Game Starting in..."}),(0,dl.jsx)("div",{className:"countdown-number",children:E})]})]}):N?(0,dl.jsxs)("div",{className:"error-message",children:[(0,dl.jsx)("p",{children:N}),(0,dl.jsx)("button",{onClick:()=>T(null),className:"retry-button",children:"Try Again"})]}):!y&&"waiting"===s.status&&s.problems?(0,dl.jsxs)("div",{className:"multiplication-game",children:[(0,dl.jsx)("h3",{children:"Multiplication Challenge"}),(0,dl.jsx)("div",{className:"waiting-message",children:"Get ready for the next round..."})]}):!y&&I?(0,dl.jsxs)("div",{className:"multiplication-game",children:[(0,dl.jsx)("h3",{children:"Multiplication Challenge"}),(0,dl.jsxs)("div",{className:"lobby-info",children:[(0,dl.jsxs)("h4",{children:["Players in Lobby (",Object.keys(s.players).length,")"]}),(0,dl.jsx)("div",{className:"players-grid",children:Object.entries(s.players).map((e=>{let[t,n]=e;return(0,dl.jsxs)("div",{className:"player-card",children:[(0,dl.jsx)("div",{className:"player-info",children:(0,dl.jsx)("span",{className:"player-name",children:t})}),n.isHost&&(0,dl.jsx)("span",{className:"host-badge",children:"Host"})]},t)}))})]}),(0,dl.jsxs)("div",{className:"game-settings",children:[(0,dl.jsxs)("div",{className:"setting-group",children:[(0,dl.jsx)("label",{children:"First Number Digits:"}),(0,dl.jsx)("input",{type:"number",min:"1",max:"3",value:u.digit1,onChange:e=>j("digit1",e.target.value),className:"settings-input"}),(0,dl.jsxs)("span",{className:"setting-hint",children:["Range: ",1===u.digit1?"2-9":2===u.digit1?"2-99":"2-999"]})]}),(0,dl.jsxs)("div",{className:"setting-group",children:[(0,dl.jsx)("label",{children:"Second Number Digits:"}),(0,dl.jsx)("input",{type:"number",min:"1",max:"3",value:u.digit2,onChange:e=>j("digit2",e.target.value),className:"settings-input"}),(0,dl.jsxs)("span",{className:"setting-hint",children:["Range: ",1===u.digit2?"2-9":2===u.digit2?"2-99":"2-999"]})]}),(0,dl.jsxs)("div",{className:"setting-group",children:[(0,dl.jsx)("label",{children:"Number of Problems:"}),(0,dl.jsx)("input",{type:"number",min:"1",max:"100",value:u.numberOfProblems,onChange:e=>j("numberOfProblems",e.target.value),className:"settings-input"}),(0,dl.jsx)("span",{className:"setting-hint",children:"Between 1-100 problems"})]}),(0,dl.jsx)("button",{onClick:R,className:"start-button",disabled:Object.keys(s.players).length<2,children:Object.keys(s.players).length<2?"Waiting for Players...":"Start Game"})]})]}):y?(0,dl.jsxs)("div",{className:"multiplication-game",children:[(0,dl.jsx)("h3",{children:"Multiplication Challenge"}),null!==(n=s.players[l])&&void 0!==n&&n.completed?(0,dl.jsxs)("div",{className:"completion-message",children:[(0,dl.jsx)("h4",{children:"You've completed all problems!"}),(0,dl.jsxs)("div",{className:"results-section",children:[(0,dl.jsx)("h5",{children:"Results:"}),Object.entries(s.players).sort(((e,t)=>(e[1].finishTime||1/0)-(t[1].finishTime||1/0))).map(((e,t)=>{let[n,r]=e;return(0,dl.jsxs)("div",{className:"result-card "+(n===l?"current-player":""),children:[(0,dl.jsx)("span",{className:"position",children:t+1}),(0,dl.jsx)("span",{className:"player-name",children:n}),r.completed?(0,dl.jsxs)("span",{className:"finish-time",children:[(r.finishTime/1e3).toFixed(1),"s"]}):(0,dl.jsx)("span",{className:"still-solving",children:"Still solving..."})]},n)}))]}),I&&"waiting"!==s.status&&(0,dl.jsx)("div",{className:"game-actions",children:(0,dl.jsx)("button",{onClick:D,className:"play-again-button",children:"Play Again"})})]}):(0,dl.jsxs)("div",{className:"problem-section",children:[(0,dl.jsxs)("div",{className:"timer",children:["Time: ",(A=w,`${Math.floor(A/60)}:${(A%60).toString().padStart(2,"0")}`)]}),(0,dl.jsxs)("div",{className:"problem",children:[null===(r=d[m])||void 0===r?void 0:r.num1," \xd7 ",null===(a=d[m])||void 0===a?void 0:a.num2," = ?"]}),(0,dl.jsx)("input",{type:"number",value:f,onChange:e=>{p(e.target.value),(async e=>{const t=parseInt(e);if(!isNaN(t)&&t===d[m].answer){if(m===d.length-1){const e=Date.now()-s.startTime;await Qo(Ho(rl),{[`/games/${o}/players/${l}/completed`]:!0,[`/games/${o}/players/${l}/finishTime`]:e,[`/games/${o}/players/${l}/currentProblem`]:d.length})}else{const e=m+1;g(e),await Qo(Ho(rl),{[`/games/${o}/players/${l}/currentProblem`]:e})}p("")}})(e.target.value)},placeholder:"Enter your answer",autoFocus:!0,className:"answer-input"}),(0,dl.jsxs)("div",{className:"progress",children:["Problem ",m+1," of ",d.length]})]}),(0,dl.jsx)("div",{className:"players-section",children:Object.entries(s.players).map((e=>{let[t,n]=e;return(0,dl.jsxs)("div",{className:"player-card "+(t===l?"current-player":""),children:[(0,dl.jsxs)("div",{className:"player-info",children:[(0,dl.jsx)("span",{className:"player-name",children:t}),n.completed?(0,dl.jsxs)("span",{className:"completion-time",children:[(n.finishTime/1e3).toFixed(1),"s"]}):(0,dl.jsxs)("span",{className:"solving-status",children:["Problem ",(n.currentProblem||0)+1,"/",d.length]})]}),n.completed&&(0,dl.jsx)("span",{className:"completed-badge",children:"Completed!"})]},t)}))})]}):(0,dl.jsxs)("div",{className:"multiplication-game",children:[(0,dl.jsx)("h3",{children:"Multiplication Challenge"}),(0,dl.jsxs)("div",{className:"lobby-info",children:[(0,dl.jsxs)("h4",{children:["Players in Lobby (",Object.keys(s.players).length,")"]}),(0,dl.jsx)("div",{className:"players-grid",children:Object.entries(s.players).map((e=>{let[t,n]=e;return(0,dl.jsxs)("div",{className:"player-card",children:[(0,dl.jsx)("div",{className:"player-info",children:(0,dl.jsx)("span",{className:"player-name",children:t})}),n.isHost&&(0,dl.jsx)("span",{className:"host-badge",children:"Host"})]},t)}))})]}),(0,dl.jsx)("div",{className:"waiting-message",children:"Waiting for host to start the game..."})]});var A};const yl=function(e){let{game:t,gameId:n,playerName:r}=e;const[a,s]=(0,i.useState)(1),[o,l]=(0,i.useState)(1),[u,c]=(0,i.useState)(!1),[d,h]=(0,i.useState)(null),f=ne(),p=()=>{var e;return null===(e=t.players[r])||void 0===e?void 0:e.isHost},m=()=>t.currentTurn===r;(0,i.useEffect)((()=>{"waiting"===t.status&&t.players[r]&&!t.players[r].isActive&&Qo(Ho(rl),{[`games/${n}/players/${r}/isActive`]:!0})}),[t.status,t.players,r,n]);const g=async()=>{if(p()){c(!0);try{const e=Object.entries(t.players).sort(((e,t)=>(e[1].joinedAt||0)-(t[1].joinedAt||0))).map((e=>{let[t]=e;return t}));if(e.length<2)return h("Need at least 2 players to start"),void c(!1);const r={[`games/${n}/status`]:"playing",[`games/${n}/currentTurn`]:e[0],[`games/${n}/lastUpdated`]:Date.now()};e.forEach((e=>{r[`games/${n}/players/${e}/dice`]=fl(5),r[`games/${n}/players/${e}/isActive`]=!0})),await Qo(Ho(rl),r)}catch(d){h("Failed to start game"),console.error("Error starting game:",d)}finally{c(!1)}}},y=async()=>{try{await navigator.clipboard.writeText(window.location.href);const e=document.querySelector(".copy-button");e.textContent="Copied!",setTimeout((()=>{e.textContent="Copy Link"}),2e3)}catch(e){console.error("Failed to copy:",e)}};return u?(0,dl.jsx)(pl,{}):"waiting"===t.status?(0,dl.jsxs)("div",{className:"game-lobby",children:[(0,dl.jsx)("h2",{children:"Liar's Dice Lobby"}),(0,dl.jsx)("div",{className:"players-list",children:Object.entries(t.players).map((e=>{let[t,n]=e;return(0,dl.jsxs)("div",{className:"lobby-player",children:[(0,dl.jsx)("span",{className:"player-name",children:t}),n.isHost&&(0,dl.jsx)("span",{className:"host-badge",children:"Host"})]},t)}))}),p()&&(0,dl.jsxs)("div",{className:"lobby-controls",children:[(0,dl.jsx)("button",{onClick:g,disabled:Object.keys(t.players).length<2,className:"start-game-button",children:"Start Game"}),Object.keys(t.players).length<2&&(0,dl.jsx)("p",{className:"waiting-message",children:"Waiting for more players to join..."})]}),(0,dl.jsxs)("div",{className:"share-section",children:[(0,dl.jsx)("h3",{children:"Invite Players"}),(0,dl.jsx)("p",{children:"Share this link with friends:"}),(0,dl.jsxs)("div",{className:"share-link",children:[(0,dl.jsx)("input",{type:"text",readOnly:!0,value:window.location.href,className:"share-input"}),(0,dl.jsx)("button",{onClick:y,className:"copy-button",children:"Copy Link"})]})]})]}):(0,dl.jsx)("div",{className:"liars-dice-game",children:"completed"===t.status?(0,dl.jsx)("div",{className:"game-over-overlay",children:(0,dl.jsxs)("div",{className:"game-over-card",children:[(0,dl.jsx)("h2",{children:"Game Over!"}),(0,dl.jsxs)("div",{className:"winner-announcement",children:[(0,dl.jsx)("p",{children:"Winner:"}),(0,dl.jsx)("h3",{children:t.winner})]}),(0,dl.jsx)("button",{onClick:()=>f("/"),className:"return-home-button",children:"Return to Home"})]})}):(0,dl.jsxs)(dl.Fragment,{children:[(0,dl.jsx)("div",{className:"game-status",children:(0,dl.jsxs)("h3",{children:["Current Turn: ",t.currentTurn]})}),(0,dl.jsx)("div",{className:"players-section",children:Object.entries(t.players).map((e=>{var n,i;let[a,s]=e;return(0,dl.jsxs)("div",{className:`player-card ${a===r?"current-player":""} \n                  ${s.isActive?"":"eliminated"} \n                  ${a===t.currentTurn?"active-turn":""}`,children:[(0,dl.jsxs)("div",{className:"player-info",children:[(0,dl.jsx)("span",{className:"player-name",children:a}),(0,dl.jsxs)("span",{className:"dice-count",children:[(null===(n=s.dice)||void 0===n?void 0:n.length)||0," dice"]}),a===t.currentTurn&&(0,dl.jsx)("span",{className:"current-turn-badge",children:"Current Turn"})]}),(0,dl.jsx)("div",{className:"dice-section",children:(a===r||t.revealedDice)&&s.dice?s.dice.map(((e,t)=>(0,dl.jsx)("div",{className:"die",children:e},t))):Array((null===(i=s.dice)||void 0===i?void 0:i.length)||0).fill(null).map(((e,t)=>(0,dl.jsx)("div",{className:"die hidden",children:"?"},t)))})]},a)}))}),m()&&t.players[r].isActive&&(0,dl.jsx)("div",{className:"game-controls",children:(0,dl.jsxs)("div",{className:"bid-controls",children:[(0,dl.jsxs)("div",{className:"bid-input",children:[(0,dl.jsx)("label",{children:"Count:"}),(0,dl.jsx)("input",{type:"number",min:"1",value:a,onChange:e=>s(parseInt(e.target.value))})]}),(0,dl.jsxs)("div",{className:"bid-input",children:[(0,dl.jsx)("label",{children:"Face:"}),(0,dl.jsx)("select",{value:o,onChange:e=>l(parseInt(e.target.value)),children:[1,2,3,4,5,6].map((e=>(0,dl.jsx)("option",{value:e,children:e},e)))})]}),(0,dl.jsx)("button",{onClick:()=>(async()=>{if(m()&&!u){c(!0);try{if(t.lastBid&&!(a>t.lastBid.count||a===t.lastBid.count&&o>t.lastBid.face))return h("Your bid must be higher than the last bid!"),void c(!1);const e=Object.entries(t.players).filter((e=>{let[t,n]=e;return n.isActive})).sort(((e,t)=>(e[1].joinedAt||0)-(t[1].joinedAt||0))).map((e=>{let[t]=e;return t})),i=e.indexOf(r),s=e[(i+1)%e.length],l={player:r,count:a,face:o,timestamp:Date.now()};await Qo(Ho(rl),{[`games/${n}/lastBid`]:l,[`games/${n}/currentTurn`]:s,[`games/${n}/lastUpdated`]:Date.now()})}catch(d){console.error("Error making bid:",d),h("Failed to make bid")}finally{c(!1)}}})(),className:"bid-button",children:"Make Bid"}),t.lastBid&&(0,dl.jsx)("button",{onClick:()=>(async()=>{if(m()&&!u&&t.lastBid){c(!0);try{const e=Object.entries(t.players).filter((e=>{let[t,n]=e;return n.isActive})).flatMap((e=>{let[t,n]=e;return n.dice||[]})).filter((e=>e===t.lastBid.face)).length,i=e>=t.lastBid.count?r:t.lastBid.player,a=(t.players[i].dice||[]).slice(1);await Qo(Ho(rl),{[`games/${n}/revealedDice`]:!0,[`games/${n}/challengeResult`]:{challenger:r,bidder:t.lastBid.player,actualCount:e,bidCount:t.lastBid.count,bidFace:t.lastBid.face,losingPlayer:i,allPlayerDice:Object.fromEntries(Object.entries(t.players).filter((e=>{let[t,n]=e;return n.isActive})).map((e=>{let[t,n]=e;return[t,n.dice]})))},[`games/${n}/lastUpdated`]:Date.now()}),c(!1),await new Promise((e=>setTimeout(e,1e4))),c(!0);const s={[`games/${n}/lastBid`]:null,[`games/${n}/revealedDice`]:!1,[`games/${n}/challengeResult`]:null,[`games/${n}/lastUpdated`]:Date.now()};if(s[`games/${n}/players/${i}/dice`]=a,0===a.length){s[`games/${n}/players/${i}/isActive`]=!1;const e=Object.entries(t.players).filter((e=>{let[t,n]=e;return n.isActive&&t!==i}));if(console.log("Remaining players:",e),1===e.length)s[`games/${n}/status`]="completed",s[`games/${n}/winner`]=e[0][0],s[`games/${n}/currentTurn`]=null,console.log("Game over, winner:",e[0][0]);else if(e.length>1){const t=e[0][0];s[`games/${n}/currentTurn`]=t,e.forEach((e=>{let[t,r]=e;s[`games/${n}/players/${t}/dice`]=fl(r.dice.length)}))}}else{const e=Object.entries(t.players).filter((e=>{let[t,n]=e;return n.isActive})).sort(((e,t)=>(e[1].joinedAt||0)-(t[1].joinedAt||0))).map((e=>{let[t]=e;return t})),o=e.indexOf(r),l=e[(o+1)%e.length];s[`games/${n}/currentTurn`]=l,Object.entries(t.players).filter((e=>{let[t,n]=e;return n.isActive})).forEach((e=>{let[t,r]=e;const o=t===i?a.length:r.dice.length;s[`games/${n}/players/${t}/dice`]=fl(o)}))}console.log("Final updates:",s),await Qo(Ho(rl),s),c(!1)}catch(d){console.error("Error processing challenge:",d),h("Failed to process challenge"),c(!1)}}})(),className:"challenge-button",children:"Challenge!"})]})}),t.lastBid&&(0,dl.jsx)("div",{className:"last-bid-container",children:(0,dl.jsxs)("div",{className:"last-bid-card",children:[(0,dl.jsx)("div",{className:"bid-header",children:"Last Bid"}),(0,dl.jsxs)("div",{className:"bid-content",children:[(0,dl.jsx)("div",{className:"bid-player",children:t.lastBid.player}),(0,dl.jsxs)("div",{className:"bid-details",children:[(0,dl.jsx)("div",{className:"bid-dice",children:Array(t.lastBid.count).fill(null).map(((e,n)=>(0,dl.jsx)("div",{className:"die bid-die",children:t.lastBid.face},n)))}),(0,dl.jsxs)("div",{className:"bid-text",children:[t.lastBid.count," ",t.lastBid.face,"'s"]})]})]})]})}),t.revealedDice&&t.challengeResult&&(0,dl.jsx)("div",{className:"challenge-result-overlay",children:(0,dl.jsxs)("div",{className:"challenge-result-card",children:[(0,dl.jsx)("h3",{children:"Challenge Result!"}),(0,dl.jsxs)("div",{className:"result-details",children:[(0,dl.jsxs)("p",{children:[(0,dl.jsx)("strong",{children:t.challengeResult.challenger})," challenged"]}),(0,dl.jsxs)("p",{children:[(0,dl.jsx)("strong",{children:t.challengeResult.bidder}),"'s bid of ",t.challengeResult.bidCount," ",t.challengeResult.bidFace,"'s"]}),(0,dl.jsx)("div",{className:"all-player-dice",children:Object.entries(t.challengeResult.allPlayerDice).map((e=>{let[n,r]=e;return(0,dl.jsxs)("div",{className:"player-dice-reveal",children:[(0,dl.jsx)("div",{className:"player-name",children:n}),(0,dl.jsx)("div",{className:"dice-row",children:r.map(((e,n)=>(0,dl.jsx)("div",{className:"die "+(e===t.challengeResult.bidFace?"matching-die":""),children:e},n)))})]},n)}))}),(0,dl.jsxs)("div",{className:"challenge-summary",children:[(0,dl.jsxs)("p",{children:["Total ",t.challengeResult.bidFace,"'s found: ",t.challengeResult.actualCount]}),(0,dl.jsxs)("p",{className:"losing-player",children:[t.challengeResult.losingPlayer," lost a die!"]})]})]})]})}),d&&(0,dl.jsx)("div",{className:"error-message",children:d})]})})};const vl=function(e){var t,n;let{game:r,gameId:a,playerName:s}=e;const[o,l]=(0,i.useState)(!1),[u,c]=(0,i.useState)(null),[d,h]=(0,i.useState)(""),f=(0,i.useRef)(null),p=ne(),m=(0,i.useRef)(null),g=null===(t=r.players[s])||void 0===t?void 0:t.isHost,y=r.currentTrade,v=r.settings||{},_=(null===(n=r.players[s])||void 0===n?void 0:n.money)||0,[b,w]=(0,i.useState)([]),C=Math.floor((v.betFee||1)/100*(v.startingMoney||1e3));(0,i.useEffect)((()=>{if((null===y||void 0===y?void 0:y.timeLeft)>0&&"active"===r.status)return f.current&&clearInterval(f.current),f.current=setInterval((async()=>{const e=Math.max(0,y.timeLeft-1);0!==e||y.takenBy?y.takenBy||await Qo(Ho(rl),{[`/games/${a}/currentTrade/timeLeft`]:e}):(await Qo(Ho(rl),{[`/games/${a}/tradeHistory/${y.timestamp}`]:{...y,timeLeft:0}}),clearInterval(f.current),S())}),1e3),()=>{f.current&&clearInterval(f.current)}}),[null===y||void 0===y?void 0:y.timeLeft,r.status]),(0,i.useEffect)((()=>{if(r.tradeHistory){const e=Object.entries(r.tradeHistory).map((e=>{let[t,n]=e;return n})).sort(((e,t)=>t.timestamp-e.timestamp));w(e)}else w([])}),[r.tradeHistory]),(0,i.useEffect)((()=>{(null===y||void 0===y?void 0:y.timeLeft)>0&&(null===y||void 0===y||!y.takenBy)&&m.current&&m.current.focus()}),[y]);const k=async()=>{try{l(!0),c(null);const e={[`/games/${a}/status`]:"active",[`/games/${a}/currentRound`]:1,[`/games/${a}/startTime`]:Date.now(),[`/games/${a}/lastUpdated`]:Date.now()};Object.keys(r.players).forEach((t=>{e[`/games/${a}/players/${t}/money`]=v.startingMoney||1e3,e[`/games/${a}/players/${t}/trades`]=0})),await Qo(Ho(rl),e),S()}catch(u){console.error("Error starting game:",u),c("Failed to start game")}finally{l(!1)}},S=async()=>{try{if((r.currentRound||0)>=(v.rounds||10))return console.log("Ending game - reached final round"),void await x();const e=(await Ko(Ho(rl,`/games/${a}/currentTrade`))).val();e&&e.timestamp&&await Qo(Ho(rl),{[`/games/${a}/tradeHistory/${e.timestamp}`]:{...e,timeLeft:0}});const t=(e,t)=>{const n=Math.random(),r=Math.random();return e+t*(Math.sqrt(-2*Math.log(n))*Math.cos(2*Math.PI*r))},n=Math.max(1,Math.round(t(10,5))),i=Math.max(1,Math.round(t(10,5))),s=Math.floor(i/(n+i)*100),o=t(0,7.5),l={odds:`${n}:${i}`,probability:Math.max(5,Math.min(95,Math.floor(s+o))),timeLeft:v.tradeTimeout||5,takenBy:null,betAmount:null,result:null,timestamp:Date.now()},u=(r.currentRound||0)+1;await Qo(Ho(rl),{[`/games/${a}/currentTrade`]:l,[`/games/${a}/currentRound`]:u})}catch(u){console.error("Error generating new trade:",u),c("Failed to generate new trade")}},E=async()=>{if(!d||isNaN(d)||d<=0)return void c("Please enter a valid bet amount");if(Number(d)+C>_)c(`Not enough money for bet + fee (${v.betFee}% = $${C})`);else try{l(!0),c(null);const e=(await Ko(Ho(rl,`/games/${a}`))).val();if(e.currentTrade.takenBy||e.currentTrade.timeLeft<=0)return void c("Trade no longer available");const[t,n]=y.odds.split(":").map(Number),i=100*Math.random()<y.probability,o=Math.floor(i?Number(d)*(t/n):-Number(d)),u=Math.floor(o-C),h={...y,takenBy:s,betAmount:Math.floor(Number(d)),betFee:Math.floor(C),result:i?"win":"loss",winAmount:Math.floor(o),finalAmount:Math.floor(u)};await Qo(Ho(rl),{[`/games/${a}/currentTrade`]:h,[`/games/${a}/players/${s}/money`]:Math.floor(_+u),[`/games/${a}/players/${s}/trades`]:(r.players[s].trades||0)+1}),await Qo(Ho(rl),{[`/games/${a}/tradeHistory/${y.timestamp}`]:h}),(r.currentRound||0)>=(v.rounds||10)?(console.log("Ending game after trade - final round"),setTimeout((()=>x()),3e3)):setTimeout((()=>S()),3e3)}catch(u){console.error("Error taking trade:",u),c("Failed to take trade")}finally{l(!1),h("")}},x=async()=>{try{y&&await Qo(Ho(rl),{[`/games/${a}/tradeHistory/${y.timestamp}`]:y});const e=Object.entries(r.players).map((e=>{let[t,n]=e;return{name:t,money:n.money,trades:n.trades}})).sort(((e,t)=>t.money-e.money));console.log("Updating game status to completed"),await Qo(Ho(rl),{[`/games/${a}/status`]:"completed",[`/games/${a}/winner`]:e[0].name,[`/games/${a}/finalStandings`]:e,[`/games/${a}/currentTrade`]:null})}catch(u){console.error("Error ending game:",u),c("Failed to end game")}},N=e=>{"Enter"===e.key&&d&&!o&&E()};return(0,i.useEffect)((()=>{"active"===r.status&&(r.currentRound||0)>(v.rounds||10)&&(console.log("Round count exceeded, ending game"),x())}),[r.currentRound,r.status]),o?(0,dl.jsx)(pl,{}):r.status&&"waiting"!==r.status?"completed"===r.status?(0,dl.jsxs)("div",{className:"game-over",children:[(0,dl.jsx)("h3",{children:"Game Over!"}),(0,dl.jsxs)("div",{className:"final-standings",children:[(0,dl.jsx)("h4",{children:"Final Standings"}),r.finalStandings.map(((e,t)=>(0,dl.jsxs)("div",{className:"standing-row",children:[(0,dl.jsxs)("span",{className:"position",children:["#",t+1]}),(0,dl.jsx)("span",{className:"player-name",children:e.name}),(0,dl.jsxs)("span",{className:"final-money",children:["$",e.money]})]},e.name)))]}),(0,dl.jsx)("button",{onClick:()=>p("/"),className:"return-home",children:"Return to Home"})]}):(0,dl.jsxs)("div",{className:"speed-trading-game",children:[(0,dl.jsxs)("div",{className:"game-header",children:[(0,dl.jsxs)("div",{className:"round-info",children:["Round ",r.currentRound||1," of ",v.rounds||10]}),(0,dl.jsx)("div",{className:"players-money",children:Object.entries(r.players).map((e=>{let[t,n]=e;return(0,dl.jsxs)("div",{className:"player-money "+(t===s?"current-player":""),children:[t,": $",n.money]},t)}))})]}),y&&(0,dl.jsxs)("div",{className:"trade-card",children:[(0,dl.jsxs)("div",{className:"trade-timer",children:["Time Left: ",y.timeLeft,"s"]}),(0,dl.jsxs)("div",{className:"trade-details",children:[(0,dl.jsxs)("div",{className:"trade-odds",children:["Odds: ",y.odds]}),(0,dl.jsxs)("div",{className:"trade-probability",children:["Win Probability: ",y.probability,"%"]})]}),!y.takenBy&&y.timeLeft>0?(0,dl.jsxs)("div",{className:"trade-actions",children:[(0,dl.jsxs)("div",{className:"bet-fee-info",children:["Bet Fee: ",v.betFee||1,"% ($",Math.floor(C),")"]}),(0,dl.jsx)("input",{ref:m,type:"number",value:d,onChange:e=>h(e.target.value),onKeyPress:N,placeholder:"Enter bet amount",min:"1",max:_}),(0,dl.jsx)("button",{onClick:E,disabled:!d||o,className:"take-trade-btn",children:"Take Trade"})]}):y.takenBy?(0,dl.jsxs)("div",{className:"trade-result",children:[(0,dl.jsxs)("div",{children:["Trade taken by ",y.takenBy]}),(0,dl.jsxs)("div",{children:["Bet Amount: $",Math.floor(y.betAmount)]}),(0,dl.jsxs)("div",{children:["Bet Fee: $",Math.floor(y.betFee)]}),y.result&&(0,dl.jsx)("div",{className:`result ${y.result}`,children:"win"===y.result?`Won $${Math.floor(y.winAmount)} (After fee: $${Math.floor(y.finalAmount)})`:`Lost $${Math.floor(y.betAmount+y.betFee)}`})]}):(0,dl.jsx)("div",{className:"trade-expired",children:"Trade Expired"})]}),(0,dl.jsxs)("div",{className:"trade-history",children:[(0,dl.jsx)("h4",{children:"Trade History"}),(0,dl.jsx)("div",{className:"history-list",children:b.map((e=>(0,dl.jsxs)("div",{className:"history-item",children:[(0,dl.jsxs)("div",{className:"history-header",children:[(0,dl.jsxs)("span",{children:["Odds: ",e.odds]}),(0,dl.jsxs)("span",{children:["Probability: ",Math.floor(e.probability),"%"]})]}),e.takenBy?(0,dl.jsxs)("div",{className:"history-details",children:[(0,dl.jsxs)("div",{className:"trade-taker",children:[(0,dl.jsx)("span",{className:"player-name",children:e.takenBy}),(0,dl.jsxs)("span",{className:"bet-amount",children:["Bet: $",Math.floor(e.betAmount)]})]}),e.result&&(0,dl.jsx)("div",{className:`trade-outcome ${e.result}`,children:"win"===e.result?`Won $${Math.floor(e.winAmount)} (After fee: $${Math.floor(e.finalAmount)})`:`Lost $${Math.floor(e.betAmount+e.betFee)}`})]}):(0,dl.jsx)("div",{className:"history-expired",children:"No one took this trade"})]},e.timestamp)))})]}),u&&(0,dl.jsx)("div",{className:"error-message",children:u})]}):(0,dl.jsxs)("div",{className:"speed-trading-game",children:[(0,dl.jsx)("h3",{children:"Speed Trading"}),(0,dl.jsxs)("div",{className:"lobby-info",children:[(0,dl.jsxs)("h4",{children:["Players in Lobby (",Object.keys(r.players).length,"/6)"]}),(0,dl.jsx)("div",{className:"players-grid",children:Object.entries(r.players).map((e=>{let[t,n]=e;return(0,dl.jsxs)("div",{className:"player-card",children:[(0,dl.jsx)("span",{className:"player-name",children:t}),n.isHost&&(0,dl.jsx)("span",{className:"host-badge",children:"Host"})]},t)}))})]}),g&&(0,dl.jsxs)("div",{className:"game-settings",children:[(0,dl.jsx)("h4",{children:"Game Settings"}),(0,dl.jsxs)("div",{className:"settings-grid",children:[(0,dl.jsxs)("div",{className:"setting-item",children:[(0,dl.jsx)("label",{children:"Starting Money:"}),(0,dl.jsx)("input",{type:"number",value:v.startingMoney||1e3,onChange:e=>Qo(Ho(rl),{[`/games/${a}/settings/startingMoney`]:Number(e.target.value)}),min:"100",step:"100"})]}),(0,dl.jsxs)("div",{className:"setting-item",children:[(0,dl.jsx)("label",{children:"Number of Rounds:"}),(0,dl.jsx)("input",{type:"number",value:v.rounds||10,onChange:e=>Qo(Ho(rl),{[`/games/${a}/settings/rounds`]:Number(e.target.value)}),min:"5",max:"30"})]}),(0,dl.jsxs)("div",{className:"setting-item",children:[(0,dl.jsx)("label",{children:"Trade Timeout (seconds):"}),(0,dl.jsx)("input",{type:"number",value:v.tradeTimeout||5,onChange:e=>Qo(Ho(rl),{[`/games/${a}/settings/tradeTimeout`]:Number(e.target.value)}),min:"3",max:"10"})]}),(0,dl.jsxs)("div",{className:"setting-item",children:[(0,dl.jsx)("label",{children:"Bet Fee (%):"}),(0,dl.jsx)("input",{type:"number",value:v.betFee||1,onChange:e=>Qo(Ho(rl),{[`/games/${a}/settings/betFee`]:Number(e.target.value)}),min:"0",max:"20",step:"1"})]})]}),(0,dl.jsx)("button",{onClick:k,className:"start-button",disabled:Object.keys(r.players).length<2,children:"Start Game"})]}),u&&(0,dl.jsx)("div",{className:"error-message",children:u})]})};const _l=function(){var e,t;const{gameId:n}=function(){let{matches:e}=i.useContext(J),t=e[e.length-1];return t?t.params:{}}(),r=ne(),a=ee(),[s,o]=(0,i.useState)(null),[l,u]=(0,i.useState)((()=>localStorage.getItem("playerName")||"")),[c,d]=(0,i.useState)(!0),[h,f]=(0,i.useState)(null),p=()=>{const e=new URLSearchParams(a.search),t=new URLSearchParams(a.hash.split("?")[1]||"");return e.get("type")||t.get("type")};(0,i.useEffect)((()=>{console.log("Current location:",a);const e=Ho(rl,`games/${n}`);d(!0);const t=Xo(e,(async e=>{const t=e.val();if(console.log("Game data:",t),d(!1),t){if(Date.now()-t.lastUpdated>864e5)return await g(),f("This game has expired"),void r("/");o(t)}else{const e=p();if(console.log("Game type from URL:",e),e)try{await m(e)}catch(h){console.error("Error initializing game:",h),f("Failed to create game")}else console.log("No game type found in URL"),f("Game not found"),r("/")}}),(e=>{console.error("Database error:",e),f("Failed to load game"),d(!1)}));return()=>t()}),[n,a,r]);const m=async e=>{console.log("Initializing game of type:",e);Ho(rl,`games/${n}`);const t={rps:2,multiplication:4,"liars-dice":6}[e]||4;try{await Qo(Ho(rl),{[`games/${n}`]:{type:e,status:"waiting",players:{},settings:{maxPlayers:t,timeLimit:300},lastUpdated:Date.now()}}),console.log("Game initialized successfully")}catch(h){throw console.error("Error in initializeGame:",h),h}},g=async()=>{try{await Qo(Ho(rl),{[`games/${n}`]:null})}catch(h){console.error("Error cleaning up stale game:",h)}};return c?(0,dl.jsx)(pl,{message:"Loading game..."}):h?(0,dl.jsx)("div",{className:"error-container",children:(0,dl.jsxs)("div",{className:"error-message",children:[(0,dl.jsx)("h3",{children:"Error"}),(0,dl.jsx)("p",{children:h}),(0,dl.jsx)("button",{onClick:()=>r("/"),className:"primary-button",children:"Return to Dashboard"})]})}):(0,dl.jsxs)("div",{className:"game-container",children:[!(null!==s&&void 0!==s&&null!==(e=s.players)&&void 0!==e&&e[l])&&(0,dl.jsxs)("div",{className:"join-container",children:[(0,dl.jsx)("h2",{children:"Join Game"}),(0,dl.jsxs)("p",{children:["Game Type: ",(null===s||void 0===s?void 0:s.type)||p()]}),(0,dl.jsx)("input",{type:"text",placeholder:"Enter your name",value:l,onChange:e=>u(e.target.value),maxLength:20,className:h?"error":""}),(0,dl.jsx)("button",{onClick:()=>{if(null===l||void 0===l||!l.trim())return void f("Please enter your name");if("rps"===(null===s||void 0===s?void 0:s.type)&&Object.keys((null===s||void 0===s?void 0:s.players)||{}).length>=2)return void f("Game is full!");localStorage.setItem("playerName",l.trim());const e={};e[`games/${n}/players/${l}`]={isHost:!(null!==s&&void 0!==s&&s.players)||0===Object.keys((null===s||void 0===s?void 0:s.players)||{}).length,joinedAt:Date.now()},Qo(Ho(rl),e)},className:"primary-button",children:"Join Game"}),h&&(0,dl.jsx)("p",{className:"error-text",children:h})]}),(null===s||void 0===s||null===(t=s.players)||void 0===t?void 0:t[l])&&(0,dl.jsxs)(dl.Fragment,{children:["rps"===s.type&&(0,dl.jsx)(ml,{game:s,gameId:n,playerName:l}),"multiplication"===s.type&&(0,dl.jsx)(gl,{game:s,gameId:n,playerName:l}),"liars-dice"===s.type&&(0,dl.jsx)(yl,{game:s,gameId:n,playerName:l}),"speed-trading"===s.type&&(0,dl.jsx)(vl,{game:s,gameId:n,playerName:l})]})]})};const bl=function(){const e=ne();return(0,dl.jsx)("header",{className:"app-header",children:(0,dl.jsxs)("div",{className:"header-content",children:[(0,dl.jsxs)("h1",{onClick:()=>e("/"),style:{cursor:"pointer"},children:[(0,dl.jsx)("span",{className:"header-icon",children:"\ud83d\udcc8"}),"Trading Games",(0,dl.jsx)("span",{className:"header-subtitle",children:"Master the Market"})]}),(0,dl.jsxs)("nav",{className:"nav-menu",children:[(0,dl.jsx)("a",{onClick:()=>e("/"),className:"nav-link",children:"Dashboard"}),(0,dl.jsx)("a",{onClick:()=>e("/leaderboard"),className:"nav-link",children:"Rankings"}),(0,dl.jsx)("a",{onClick:()=>e("/learn"),className:"nav-link",children:"Learn"})]})]})})};const wl=()=>(0,dl.jsxs)("div",{className:"not-found",children:[(0,dl.jsx)("h2",{children:"404 - Page Not Found"}),(0,dl.jsx)("p",{children:"Looks like this trading floor doesn't exist."}),(0,dl.jsx)("a",{href:"#/",className:"button primary-button",children:"Return to Dashboard"})]}),Cl=function(){const[e,t]=(0,i.useState)(!0);return(0,i.useEffect)((()=>{setTimeout((()=>t(!1)),1e3)}),[]),e?(0,dl.jsxs)("div",{className:"loading-screen",children:[(0,dl.jsx)("div",{className:"loader"}),(0,dl.jsx)("p",{children:"Loading Trading Games..."})]}):(0,dl.jsx)(be,{basename:"/",children:(0,dl.jsxs)("div",{className:"App",children:[(0,dl.jsx)(bl,{}),(0,dl.jsx)("main",{className:"main-content",children:(0,dl.jsxs)(ye,{children:[(0,dl.jsx)(me,{path:"/",element:(0,dl.jsx)(hl,{})}),(0,dl.jsx)(me,{path:"game/:gameId",element:(0,dl.jsx)(_l,{})}),(0,dl.jsx)(me,{path:"*",element:(0,dl.jsx)(wl,{})})]})}),(0,dl.jsx)("footer",{className:"app-footer",children:(0,dl.jsxs)("div",{className:"footer-content",children:[(0,dl.jsx)("p",{children:"\xa9 2024 Trading Games \u2022 Practice Trading Risk-Free"}),(0,dl.jsxs)("div",{className:"footer-links",children:[(0,dl.jsx)("a",{href:"#/about",children:"About"}),(0,dl.jsx)("a",{href:"#/terms",children:"Terms"}),(0,dl.jsx)("a",{href:"#/privacy",children:"Privacy"})]})]})})]})})},kl=e=>{e&&e instanceof Function&&n.e(453).then(n.bind(n,453)).then((t=>{let{getCLS:n,getFID:r,getFCP:i,getLCP:a,getTTFB:s}=t;n(e),r(e),i(e),a(e),s(e)}))};s.createRoot(document.getElementById("root")).render((0,dl.jsx)(i.StrictMode,{children:(0,dl.jsx)(Cl,{})})),kl()})();
//# sourceMappingURL=main.0735a916.js.map